<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>42 R Markdownで作るダッシュボード | 疫学のための R ハンドブック</title>
<meta name="author" content="the handbook team">
<meta name="description" content="この章では、flexdashboard パッケージの基本的な使い方を解説します。このパッケージは、R Markdown の出力形式をパネルやページを持つダッシュボードとして簡単に整形できます。ダッシュボードの表示内容は、文章、図・表、動的表示などで構成できます。 flexdashboard パッケージを利用するメリットは下記です。 ダッシュボード作成専用の R...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="42 R Markdownで作るダッシュボード | 疫学のための R ハンドブック">
<meta property="og:type" content="book">
<meta property="og:description" content="この章では、flexdashboard パッケージの基本的な使い方を解説します。このパッケージは、R Markdown の出力形式をパネルやページを持つダッシュボードとして簡単に整形できます。ダッシュボードの表示内容は、文章、図・表、動的表示などで構成できます。 flexdashboard パッケージを利用するメリットは下記です。 ダッシュボード作成専用の R...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="42 R Markdownで作るダッシュボード | 疫学のための R ハンドブック">
<meta name="twitter:description" content="この章では、flexdashboard パッケージの基本的な使い方を解説します。このパッケージは、R Markdown の出力形式をパネルやページを持つダッシュボードとして簡単に整形できます。ダッシュボードの表示内容は、文章、図・表、動的表示などで構成できます。 flexdashboard パッケージを利用するメリットは下記です。 ダッシュボード作成専用の R...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.25/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.0/tabwid.css" rel="stylesheet">
<link href="libs/tabwid-1.1.0/scrool.css" rel="stylesheet">
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.9/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.5.1/plotly-basic-2.5.1.min.js"></script><script src="libs/plotly-cartesian-2.5.1/plotly-cartesian-2.5.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script><script type="text/javascript">
        // window.addEventListener("load", function() {
        //     document.getElementById('toc').firstChild.innerHTML = "章目次"; 
        // });
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementsByClassName("d-flex align-items-start justify-content-between")[0].children[0].children[0].innerHTML = "疫学のための R</br>ハンドブック";
            document.getElementById('toc').firstChild.innerHTML = "章目次"; 
            document.getElementById('main-nav').children[1].firstChild.innerHTML = "総目次";
            document.getElementById('search').setAttribute("placeholder", "検索");
        });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">疫学のための R ハンドブック</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">本書について</li>
<li><a class="" href="editorial-style.html"><span class="header-section-number">1</span> 編集前記・技術注記</a></li>
<li><a class="" href="data-used.html"><span class="header-section-number">2</span> ハンドブックとデータのダウンロード</a></li>
<li class="book-part">基本編</li>
<li><a class="" href="basics.html"><span class="header-section-number">3</span> R の基礎</a></li>
<li><a class="" href="transition-to-R.html"><span class="header-section-number">4</span> Excel・Stata・SASとの比較</a></li>
<li><a class="" href="packages-suggested.html"><span class="header-section-number">5</span> 推奨パッケージ</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> R プロジェクト</a></li>
<li><a class="" href="importing.html"><span class="header-section-number">7</span> データのインポート・エクスポート</a></li>
<li class="book-part">データマネジメント</li>
<li><a class="" href="cleaning.html"><span class="header-section-number">8</span> データクリーニングと主要関数</a></li>
<li><a class="" href="dates.html"><span class="header-section-number">9</span> 日付型データ</a></li>
<li><a class="" href="characters-strings.html"><span class="header-section-number">10</span> 文字型・文字列型データ</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> 因子（ファクタ）型データ</a></li>
<li><a class="" href="pivoting.html"><span class="header-section-number">12</span> データの縦横変換</a></li>
<li><a class="" href="grouping.html"><span class="header-section-number">13</span> データのグループ化</a></li>
<li><a class="" href="joining-matching.html"><span class="header-section-number">14</span> データの結合</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> 重複データの排除</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> ループと反復処理・リストの操作</a></li>
<li class="book-part">データ分析</li>
<li><a class="" href="tables-descriptive.html"><span class="header-section-number">17</span> 記述統計表の作り方</a></li>
<li><a class="" href="stat-tests.html"><span class="header-section-number">18</span> 基本的な統計的検定</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">19</span> 単変量と多変量回帰</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> データの欠損</a></li>
<li><a class="" href="standardization.html"><span class="header-section-number">21</span> 標準化率</a></li>
<li><a class="" href="moving-average.html"><span class="header-section-number">22</span> 移動平均</a></li>
<li><a class="" href="time-series.html"><span class="header-section-number">23</span> 時系列分析とアウトブレイクの検出</a></li>
<li><a class="" href="epidemic-models.html"><span class="header-section-number">24</span> エピデミックモデリング</a></li>
<li><a class="" href="contact-tracing.html"><span class="header-section-number">25</span> 接触者の追跡</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">26</span> 標本調査データ分析</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">27</span> 生存時間解析</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">28</span> GIS の基本</a></li>
<li class="book-part">データの可視化</li>
<li><a class="" href="tables-presentation.html"><span class="header-section-number">29</span> 見やすい表の作り方</a></li>
<li><a class="" href="ggplot-basics.html"><span class="header-section-number">30</span> ggplot の基本</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">31</span> ggplotのヒント</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">32</span> 流行曲線（エピカーブ）</a></li>
<li><a class="" href="age-pyramid.html"><span class="header-section-number">33</span> 人口ピラミッドとリッカート尺度</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">34</span> ヒートマップ</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">35</span> フローチャート・サンキー図・タイムライン</a></li>
<li><a class="" href="combination-analysis.html"><span class="header-section-number">36</span> 複数回答データの分析</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">37</span> 感染連鎖</a></li>
<li><a class="" href="phylogenetic-trees.html"><span class="header-section-number">38</span> 系統樹</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">39</span> 動的な図の作成</a></li>
<li class="book-part">レポートとダッシュボード</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">40</span> R Markdown で作るレポート</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">41</span> ルーチンで作成するレポートの整理</a></li>
<li><a class="active" href="flexdashboard.html"><span class="header-section-number">42</span> R Markdownで作るダッシュボード</a></li>
<li><a class="" href="shiny-basics.html"><span class="header-section-number">43</span> Shiny で作るダッシュボード</a></li>
<li class="book-part">その他</li>
<li><a class="" href="writing-functions.html"><span class="header-section-number">44</span> 関数の作成</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">45</span> ディレクトリの操作</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">46</span> Git と Github を使ったバージョン管理と共同作業</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">47</span> よくあるエラー</a></li>
<li><a class="" href="help.html"><span class="header-section-number">48</span> ヘルプ</a></li>
<li><a class="" href="network-drives.html"><span class="header-section-number">49</span> ネットワークドライブで R を使用する場合</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">50</span> data.table パッケージを使用したデータ処理</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="flexdashboard" class="section level1" number="42">
<h1>
<span class="header-section-number">42</span> R Markdownで作るダッシュボード<a class="anchor" aria-label="anchor" href="#flexdashboard"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/flexdashboard_output.png" width="100%" style="display: block; margin: auto;"></div>
<p>この章では、<strong>flexdashboard</strong> パッケージの基本的な使い方を解説します。このパッケージは、R Markdown の出力形式をパネルやページを持つダッシュボードとして簡単に整形できます。ダッシュボードの表示内容は、文章、図・表、動的表示などで構成できます。</p>
<p><strong>flexdashboard</strong> パッケージを利用するメリットは下記です。</p>
<ul>
<li>ダッシュボード作成専用の R コード記述は最小限で済むため、わずかな練習ですぐにダッシュボードを作成できます。</li>
<li>作成したダッシュボードは、自己完結型の HTML ファイルとして同僚に電子メールで送信できます。HTML ファイルを表示するための配信サーバは不要です。</li>
<li>
<strong>flexdashboard</strong> パッケージは、<strong>shiny</strong> パッケージや <strong>ggplotly</strong> パッケージなどの <u>“HTML ウィジェット”</u> と組み合わせて、動的なダッシュボードにできます。</li>
</ul>
<p><strong>flexdashboard</strong> パッケージを利用するデメリットは下記です。</p>
<ul>
<li>
<strong>shiny</strong> パッケージでダッシュボードを作成するのに比べて、カスタマイズ性に劣ります。</li>
</ul>
<p>この章で紹介している <strong>flexdashboard</strong> パッケージの使い方に関する包括的なチュートリアルは、参考資料セクションにあります。以降では、パッケージの主要な機能を説明した上で、<code>linelist</code> データを使ってアウトブレイクを調査するダッシュボードの構築例を紹介します。</p>
<div id="準備-33" class="section level2" number="42.1">
<h2>
<span class="header-section-number">42.1</span> 準備<a class="anchor" aria-label="anchor" href="#%E6%BA%96%E5%82%99-33"><i class="fas fa-link"></i></a>
</h2>
<div id="パッケージの読み込み-22" class="section level3 unnumbered">
<h3>パッケージの読み込み<a class="anchor" aria-label="anchor" href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF-22"><i class="fas fa-link"></i></a>
</h3>
<p>このハンドブックでは、パッケージを読み込むために、<strong>pacman</strong> パッケージの <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load()</a></code> を主に使用しています。p_load() は、必要に応じてパッケージをインストールし、現在の R セッションで使用するためにパッケージを読み込む関数です。また、すでにインストールされたパッケージは、R の基本パッケージである <strong>base</strong> （以下、<strong>base</strong> R）の <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> を使用して読み込むこともできます。R のパッケージに関する詳細は <a href="basics.html#basics">R の基礎</a> の章をご覧ください。</p>
<div class="sourceCode" id="cb1834"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">rio</span>,             <span class="co"># データのインポート・エクスポート</span></span>
<span>  <span class="va">here</span>,            <span class="co"># ファイルパスの指定</span></span>
<span>  <span class="va">tidyverse</span>,       <span class="co"># データの加工と可視化</span></span>
<span>  <span class="va">flexdashboard</span>,   <span class="co"># R Markdown レポートのダッシュボード版</span></span>
<span>  <span class="va">shiny</span>,           <span class="co"># 動的なダッシュボード、作図</span></span>
<span>  <span class="va">plotly</span>           <span class="co"># 動的な作図</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div id="データのインポート-17" class="section level3 unnumbered">
<h3>データのインポート<a class="anchor" aria-label="anchor" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88-17"><i class="fas fa-link"></i></a>
</h3>
<p>エボラ出血熱の流行をシミュレートしたデータセットをインポートします。お手元の環境でこの章の内容を実行したい方は、 <a href="https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/case_linelists/linelist_cleaned.rds" class="download-button">クリック</a>して「前処理された」ラインリスト（linelist）データをダウンロードしてください&gt;（.rds 形式で取得できます）。データは <strong>rio</strong> パッケージの <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> を利用してインポートしましょう（<strong>rio</strong> パッケージは、.xlsx、.csv、.rds など様々な種類のファイルを取り扱うことができます。詳細は、<a href="importing.html#importing">インポートとエクスポート</a> の章をご覧ください）。</p>
<div class="sourceCode" id="cb1835"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># linelist をインポートする</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.rds"</span><span class="op">)</span></span></code></pre></div>
<p>linelist の最初の 50 行を以下に表示します。</p>
<div id="htmlwidget-d8094f7910c9a0c6bf26" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-d8094f7910c9a0c6bf26">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2\" data-max=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399075200000\" data-max=\"1406419200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399939200000\" data-max=\"1407024000000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400025600000\" data-max=\"1407110400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400371200000\" data-max=\"1410566400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-29&quot;,&quot;30-49&quot;,&quot;50-69&quot;,&quot;70+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;,&quot;50-54&quot;,&quot;55-59&quot;,&quot;60-64&quot;,&quot;65-69&quot;,&quot;70-74&quot;,&quot;75-79&quot;,&quot;80-84&quot;,&quot;85+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"-13.2697246824573\" data-max=\"-13.209391925612\" data-scale=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"8.45171855856465\" data-max=\"8.48802917129884\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"11\" data-max=\"241\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"20\" data-max=\"24\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"35.9\" data-max=\"38\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"428.994082840237\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.46183062600728,8.46272931462646,8.46144367534271,8.46191259217774,8.47292327643506,8.48401630165138,8.45837125340844,8.47761705512509,8.47570184950483,8.47779946878972,8.47145134147474,8.47804840685363,8.48528034195779,8.46957530395867,8.45957352078114,8.47404889511544,8.48802917129884,8.473437335922,8.48408263734462,8.46242233645879,8.47026822126572,8.46398447480533,8.4641347894342,8.45623094629607,8.48334624336805,8.47493999153642,8.47832062438022,8.4693933891765,8.48480589906514,8.47121232619015,8.48438437371817,8.48466158574339,8.47714159984428,8.46238127010609,8.45568597813113,8.4632880274758,8.47940722413856,8.46353857052336,8.46178968158864,8.47508713872833,8.45825808128071,8.4532568143863,8.4732571907655,8.47911586641933,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.8184429761563,16.0652496292635,22.4965706447188,71.4144019043841,41.6171224732461,62.0953890870657,0,16.8376536925366,22.7903289734443,53.4119897959184,24.2802636142907,22.4600343506408,54.320987654321,41.0578432556455,28.5664819944598,17.0320552013276,25.0412914912888,38.7172182043977,27.3876813705495,31.5555555555556,14.8069075945662,30.8839811199813,26.6193433895297,59.375,96.6183574879227,19.2394748755093,84.9403122130395,18.4199377406104,27.7722674072605,41.3223140495868,17.2080666586161,24.1671624033314,15.7218971089178,428.994082840237,27.9930220292912,243.261012491782,20.2395007589813,30.527446435638,25.15589569161,47,39.04,31.0661643201798,77.9683671196257,29.5165961238583,166.493236212279,100.308641975309,37.76,20.6037803457852,23.458562375267],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="新規-r-markdown-ファイルを作成する" class="section level2" number="42.2">
<h2>
<span class="header-section-number">42.2</span> 新規 R Markdown ファイルを作成する<a class="anchor" aria-label="anchor" href="#%E6%96%B0%E8%A6%8F-r-markdown-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fas fa-link"></i></a>
</h2>
<p>パッケージをインストールをした後、<u>File &gt; New file &gt; R Markdown</u> と選択して新規 R Markdown ファイルを作成してください。</p>
<div class="inline-figure"><img src="images/flexdashboard_new1.png" width="100%" style="display: block; margin: auto;"></div>
<p>開いたウィンドウから “From Template” を選択して、次に、“Flex Dashboard” テンプレートを選んでください。その後、ドキュメントの名前をつけるように促されます。今回の例では、R Markdown ファイルを “outbreak_dashboard.Rmd” と命名しましょう。</p>
<div class="inline-figure"><img src="images/flexdashboard_new2.png" width="100%" height="75%" style="display: block; margin: auto;"></div>
</div>
<div id="スクリプト-1" class="section level2" number="42.3">
<h2>
<span class="header-section-number">42.3</span> スクリプト<a class="anchor" aria-label="anchor" href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88-1"><i class="fas fa-link"></i></a>
</h2>
<p>ファイルに記述するスクリプトは、R Markdown 記法そのものです。そのため、<a href="rmarkdown.html#rmarkdown">R Markdown で作るレポート</a> の章で解説した内容や記法と同じです。このセクションで、再度、簡単に記法を紹介し、この章で扱う R Markdown の出力形式との違いを示します。</p>
<div id="yaml-ヘッダ" class="section level3 unnumbered">
<h3>YAML ヘッダ<a class="anchor" aria-label="anchor" href="#yaml-%E3%83%98%E3%83%83%E3%83%80"><i class="fas fa-link"></i></a>
</h3>
<p>記述するスクリプトの一番上には、“YAML” ヘッダがあります。YAML ヘッダは、3 本のダッシュ（<code>---</code>）で始め、3 本のダッシュ（<code>---</code>）で閉じる必要があります。YAML ヘッダのパラメータは <code>key:values</code> の組み合わせで記述します。<strong>YAML 記法では、半角スペースによるインデントとコロンの記述が大切です</strong>。<code>key:value</code> パラメータはイコール記号ではなく、コロンで分けらていることに注意が必要です。</p>
<p>YAML ヘッダには文書のメタデータを記述する必要があります。YAML ヘッダに記述される（インデントされていない）パラメータの順番は重要ではありません。例えば次のような形です。</p>
<div class="sourceCode" id="cb1836"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">title</span><span class="op">:</span> <span class="st">"My document"</span></span>
<span><span class="va">author</span><span class="op">:</span> <span class="st">"Me"</span></span>
<span><span class="va">date</span><span class="op">:</span> <span class="st">"`r Sys.Date()`"</span></span></code></pre></div>
<p>インラインコードを書く（<code>r</code> に続いてバックティックの中に記述する）ように、YAML ヘッダの中で R コードを記述できます。また、上記 YAML ヘッダ例内の date パラメータにあるように、二重引用符中にも記述できます。</p>
<p>必須の YAML ヘッダパラメータは <code>output:</code> です。このパラメータは、どのような種類のファイルを生成するかを指定します（例： <code>html_document</code>、<code>pdf_document</code>、<code>word_document</code> や <code>powerpoint_presentation</code> など）。<strong>flexdashboard</strong> パッケージにおいて、このパラメータの指定は少し混乱するかもしれません。<code>output:</code> パラメータを必ず <code>output:flexdashboard::flex_dashboard</code> と指定する必要があります。コロンの個数とアンダースコアに注意してください。ダッシュボード固有の追加のパラメータは YAML ヘッダ内の <code>ouput:flexdashboard::flex_dashboard</code> パラメータの行末に<u>追加のコロン</u>を入力し、その次の行から半角スペースで行頭をインデントして続くことが多いです。（具体例は、以下のコードにある <code>orientation:</code> と <code>vertical_layout:</code> のパラメータを参照してください）。</p>
<div class="sourceCode" id="cb1837"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">title</span><span class="op">:</span> <span class="st">"My dashboard"</span></span>
<span><span class="va">author</span><span class="op">:</span> <span class="st">"Me"</span></span>
<span><span class="va">date</span><span class="op">:</span> <span class="st">"`r Sys.Date()`"</span></span>
<span><span class="va">output</span><span class="op">:</span></span>
<span>  <span class="fu">flexdashboard</span><span class="fu">::</span><span class="va"><a href="https://pkgs.rstudio.com/flexdashboard/reference/flex_dashboard.html">flex_dashboard</a></span><span class="op">:</span></span>
<span>    <span class="va">orientation</span><span class="op">:</span> <span class="va">rows</span></span>
<span>    <span class="va">vertical_layout</span><span class="op">:</span> <span class="va">scroll</span></span></code></pre></div>
<p>上記に示したように、2 つの半角スペースで作られたインデントがサブパラメータの記述に利用されています。サブパラメータを追加する場合は、<code>key:values:</code> のように、上位となるパラメータの行末にコロンを追加で入力するのを忘れないようにしましょう。</p>
<p>ロジカル型値をパラメータに与える必要がある場合は、YAML ヘッダ内では小文字で記述される必要があります（<code>true</code>、<code>false</code>、<code>null</code>）。タイトルなど <code>key:values</code> 内の <code>values</code> の一部に、もしコロンやカッコなど記号を含む場合は <code>values</code> 全体を二重引用符で囲んでください。詳しくは以降のセクションで都度例示される YAML ヘッダを参照してください。</p>
</div>
<div id="コードチャンク-1" class="section level3 unnumbered">
<h3>コードチャンク<a class="anchor" aria-label="anchor" href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%83%81%E3%83%A3%E3%83%B3%E3%82%AF-1"><i class="fas fa-link"></i></a>
</h3>
<p>R Markdown は複数の「チャンク（コードチャンク）」を含むことができます。複数行の R コードをチャンク内に書けて、これらのコードは通常の R スクリプトとして動作します。</p>
<p>コードチャンクは、3 つのバックティックと、小文字の “r” が入った波括弧で作成され、3 つのバックティックで閉じられます。 キーボードショートカット、“Ctrl + Alt + i”（Mac では Cmd + Shift + r）、と入力するか、RStudio スクリプトエディタの上端にある “insert a new code chunk” と表示されている緑のボタンをクリックすることで新しいチャンクを作成してみてください。コードチャンクの例を以降、多数例示しています。</p>
</div>
<div id="本文ナラティブテキスト" class="section level3 unnumbered">
<h3>本文（ナラティブテキスト）<a class="anchor" aria-label="anchor" href="#%E6%9C%AC%E6%96%87%E3%83%8A%E3%83%A9%E3%83%86%E3%82%A3%E3%83%96%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88"><i class="fas fa-link"></i></a>
</h3>
<p>R コード「チャンク」の外には、本文（ナラティブテキスト）を書くことができます。<a href="rmarkdown.html#rmarkdown">R Markdown で作るレポート</a>で解説されているように、アスタリスク（*）1 つでテキストを囲むことで斜体にできます。あるいは、アスタリスク 2 つ（**）でテキストを囲むことで強調体にできます。箇条書きや番号付き箇条書きは、改行、行頭インデント、行末にスペースが 2 つ入力された場合などで表示が変わります。</p>
<p><a href="rmarkdown.html#rmarkdown">R Markdown で作るレポート</a> の章に記述されたように、インライン R コードはバックティック（<code>）で囲まれたコード（``</code>1+1` ``）の先頭に “r” をつけることで入力できます（前述した YAML ヘッダ例の date パラメータを参照してください）。</p>
</div>
<div id="見出し" class="section level3 unnumbered">
<h3>見出し<a class="anchor" aria-label="anchor" href="#%E8%A6%8B%E5%87%BA%E3%81%97"><i class="fas fa-link"></i></a>
</h3>
<p><a href="rmarkdown.html#rmarkdown">R Markdown で作るレポート</a> の章で説明したように、見出しの大小はハッシュ記号の入力個数で表現されます。</p>
<p><strong>flexdashboard</strong> パッケージでは、見出し 1（#）はダッシュボードの「ページ」を作成します。見出し 2（##）は <code>orientation:</code> パラメータに応じてカラム（水平方向の表示枠）やロウ（垂直方向の表示枠）を作ります（詳細は下記を参照ください）。見出し 3（###）は図、表、テキストなど表示のためのパネルを作成します。</p>
<div class="sourceCode" id="cb1838"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb1838-1"><a href="flexdashboard.html#cb1838-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># 見出し１ （ページ）</span></span>
<span id="cb1838-2"><a href="flexdashboard.html#cb1838-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1838-3"><a href="flexdashboard.html#cb1838-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## 見出し２ （垂直方向か水平方向に下位見出し内容を配置する）</span></span>
<span id="cb1838-4"><a href="flexdashboard.html#cb1838-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1838-5"><a href="flexdashboard.html#cb1838-5" aria-hidden="true" tabindex="-1"></a><span class="fu">### 見出し３ （図、表などを表示するパネル）</span></span></code></pre></div>
</div>
</div>
<div id="セクションの属性" class="section level2" number="42.4">
<h2>
<span class="header-section-number">42.4</span> セクションの属性<a class="anchor" aria-label="anchor" href="#%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%B1%9E%E6%80%A7"><i class="fas fa-link"></i></a>
</h2>
<p>ダッシュボードの一部に適用する属性を指定するには、通常の R markdown 記法と同様に、見出しの後、波括弧 <code><a href="https://rdrr.io/r/base/Paren.html">{ }</a></code> の中に <code>key=value</code> オプションを入れます。例えば、典型的な HTML の R markdown レポートでは、<code>## My heading {.tabset}</code> とすることで、小見出しをタブにまとめることができます。</p>
<p>前段落の例では、<u>見出し</u>のテキスト部分の後に属性が記述されていることに注意してください。これらは、R コードチャンクの上部に入力される <strong>knitr</strong> パッケージのオプション（例えば、 <code>out.height =</code>）とは違います。</p>
<p><strong>flexdashboard</strong> パッケージの特徴的な属性には以下があります。</p>
<ul>
<li>
<code>{data-orientation=}</code>：<code>rows</code>（ロウ：垂直方向配置）または <code>columns</code>（カラム：水平方向配置）のいずれかを値に設定します。ダッシュボードに複数のページがある場合は、各ページにこの属性を追加して、内容を配置する方向を指定してください (詳細は <a href="flexdashboard.html#layout">レイアウトセクション</a> で説明しています)。<br>
</li>
<li>
<code>{data-width=}</code> と <code>{data-height=}</code>：同じ表示方向（水平方向配置または垂直方向配置）にレイアウトされたグラフ、カラム、ロウの相対的サイズを設定します。絶対的サイズは、<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes">flexbox</a> CSS 表示エンジンによって、どのようなディスプレイデバイスでも表示範囲が最適になるように調整されます。
<ul>
<li>グラフの高さは、YAML ヘッダパラメータの <code>vertical_layout: fill</code> と <code>vertical_layout: scroll</code> のどちらを設定するかにも依存します。scroll に設定した場合、グラフの高さは R コードチャンクの一般的な <code>fig.height =</code> オプションを反映します。<br>
</li>
<li>サイズ指定に関する完全なドキュメントは <a href="https://rmarkdown.rstudio.com/flexdashboard/using.html#sizing">flexdashboard パッケージの公式ウェブサイト</a> を参照してください。</li>
</ul>
</li>
<li>
<code>{.hidden}</code>：ページの最上段に表示されるナビゲーションバーから特定のページを除外するために利用します。</li>
<li>
<code>{data-navmenu=}</code>：ページレベルの見出し（<code>#</code>）に適用します。該当のページをナビゲーションバーのドロップダウン内のメニューとして表示します。 ドロップダウンメニューの名前を二重引用符で囲んで入力してください。 「レイアウト」セクション内の例をご参考ください。</li>
</ul>
</div>
<div id="layout" class="section level2" number="42.5">
<h2>
<span class="header-section-number">42.5</span> レイアウト<a class="anchor" aria-label="anchor" href="#layout"><i class="fas fa-link"></i></a>
</h2>
<p>このセクションではダッシュボードのレイアウトを以下の方法で整形します。</p>
<ul>
<li>R Markdown の見出し記法（#、##、##など）を使用し、ページ、カラム・ロウ、チャートを追加する</li>
<li>YAML ヘッダパラメータの <code>orientation:</code> を <code>rows</code> または<code>columns</code> のいずれかに指定する</li>
<li>ブラウザの領域いっぱいにレイアウトを表示するか、スクロールさせて表示するかを指定する</li>
<li>特定のセクションの見出しにタブを追加する</li>
</ul>
<div id="ページ" class="section level3 unnumbered">
<h3>ページ<a class="anchor" aria-label="anchor" href="#%E3%83%9A%E3%83%BC%E3%82%B8"><i class="fas fa-link"></i></a>
</h3>
<p>R Markdown で、見出しレベル 1（#）はダッシュボードの「ページ」を意味します。デフォルトの設定では、ページは、一番上に表示されるナビゲーションバーに順番に並んで表示されます。</p>
<div class="inline-figure"><img src="images/flexdashboard_pages_top_script.png" width="100%" height="100%"></div>
<div class="inline-figure"><img src="images/flexdashboard_pages_top_view.png" width="100%"></div>
<p>ページの見出しに <code>{data-navmenu=}</code> 属性を付けることで、ナビゲーションバー内の「メニュー」としてページをまとめることができます。等号演算子（<code>=</code>）の前後にスペースを入れると、うまくいきませんので、気を付けてください！</p>
<div class="inline-figure"><img src="images/flexdashboard_navmenu_script.png" width="100%"></div>
<p>上記スクリプトの実行結果です。</p>
<div class="inline-figure"><img src="images/flexdashboard_navmenu_view.png" width="100%"></div>
<p>また、<code>{.sidebar}</code> 属性を追加することで、ページやカラムをダッシュボードの左側にある「サイドバー」として表示できます。サイドバーには（どのページからも表示可能な）テキストを表示したり、<strong>shiny</strong> パッケージの動的機能を組み込んでいる場合は、スライダーやドロップダウンメニューなどのユーザ入力用コントローラを表示するのに便利です。</p>
<div class="inline-figure"><img src="images/flexdashboard_sidebar_script.png" width="100%" height="100%"></div>
<p>上記スクリプトの実行結果です。</p>
<div class="inline-figure"><img src="images/flexdashboard_sidebar_view.png" width="100%"></div>
</div>
<div id="内容の配置方向指定" class="section level3 unnumbered">
<h3>内容の配置方向指定<a class="anchor" aria-label="anchor" href="#%E5%86%85%E5%AE%B9%E3%81%AE%E9%85%8D%E7%BD%AE%E6%96%B9%E5%90%91%E6%8C%87%E5%AE%9A"><i class="fas fa-link"></i></a>
</h3>
<p>YAML ヘッダパラメータに <code>orientation:</code> を設定して、R Markdown の見出し 2（##）要素以下の内容を水平方向配置または垂直方向配置で並べるか指定します。<code>orientation: columns</code>（水平方向配置）または <code>orientation: rows</code> （垂直方向配置）のどちらかを設定しましょう。</p>
<p>見出し 2（##） は、YAML ヘッダパラメータの <code>orientation</code> 設定に基づいて、新規カラム（水平方向配置）または新規ロウ（垂直方向配置）として解釈されます。</p>
<p>例えば <code>orientation: columns</code> と設定すると、見出し 2 がダッシュボードのページに新規カラム（水平方向配置）として追加されます。以下の例のダッシュボードには、1 つのページ内に 2 つのカラムがあり、合計で 3 つのパネルがあります。カラムの相対的な幅は、以下のように <code>{data-width=}</code> 属性で調整できます。</p>
<div class="inline-figure"><img src="images/flexdashboard_columns_script.png" width="100%" height="100%"></div>
<p>上記スクリプトの実行結果です。</p>
<div class="inline-figure"><img src="images/flexdashboard_columns_view.png" width="100%"></div>
<p><code>orientation: rows</code> を設定すると、見出し 2 はカラムの代わりに新規ロウを作成します。以下は上記と同じスクリプトですが、<code>orientation: rows</code> が設定されており、見出し 2 がカラムではなく ロウを生成するようになります。以下のように、<code>{data-height=}</code> で行の相対的な<u>高さ</u>を調整することもできます。</p>
<div class="inline-figure"><img src="images/flexdashboard_rows_script.png" width="100%" height="100%"></div>
<p>上記スクリプトの実行結果です。</p>
<div class="inline-figure"><img src="images/flexdashboard_rows_view.png" width="100%"></div>
<p>ダッシュボードに複数のページがある場合、各ページのヘッダーに <code>{data-orientation=}</code> 属性を追加することで、各特定ページごとに配置方向を指定できます（引用符なしで <code>rows</code> または <code>columns</code> のどちらかを指定できます）。</p>
</div>
<div id="タブ" class="section level3 unnumbered">
<h3>タブ<a class="anchor" aria-label="anchor" href="#%E3%82%BF%E3%83%96"><i class="fas fa-link"></i></a>
</h3>
<p>他の HTML R Markdown の出力と同様に、<code>{.tabset}</code> 属性で表示内容をタブに分割できます。</p>
<p>この属性を必要な見出しの後に追加するだけです。その見出しの下位にある小見出しは、タブとして表示されるようになります。例えば、下記のスクリプトでは、右の “Colums 2”（##）がタブ化されており、流行曲線（エピカーブ）パネルと表パネル（見出し 3 ###）の内容がタブで表示されるようになりました。</p>
<p>配置方向の設定が <code>row</code> であれば、垂直配置方向でも同じ分割ができます。</p>
<div class="inline-figure"><img src="images/flexdashboard_tabs_script.png" width="100%" height="100%"></div>
<p>上記スクリプトの実行結果です。</p>
<div class="inline-figure"><img src="images/flexdashboard_tabs_view.png" width="100%"></div>
</div>
</div>
<div id="表示内容を追加する" class="section level2" number="42.6">
<h2>
<span class="header-section-number">42.6</span> 表示内容を追加する<a class="anchor" aria-label="anchor" href="#%E8%A1%A8%E7%A4%BA%E5%86%85%E5%AE%B9%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><i class="fas fa-link"></i></a>
</h2>
<p>それでは、ダッシュボードを作り始めましょう。この章で作成するシンプルなダッシュボードは、1 ページ、2 カラム、4 パネルで構成されます。パネルをひとつひとつ組み立てながら解説します。</p>
<p>表示内容には、テキスト、ggplot によるプロット、テーブルなど、R の標準的な出力を簡単に含めることができます（詳しくは、<a href="tables-presentation.html#tables-presentation">見やすい表の作り方</a>の章を参照してください）。他の R Markdown スクリプトのように、R コードチャンク内に出力を生成するコードを追加するだけです。</p>
<p>注：この章で作成する R markdown スクリプトの完成形と HTML ダッシュボードの出力をダウンロードできます。詳しくは、<a href="data-used.html#data-used">ハンドブックとデータのダウンロード</a>の章をご覧ください。</p>
<div id="テキスト-1" class="section level3 unnumbered">
<h3>テキスト<a class="anchor" aria-label="anchor" href="#%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88-1"><i class="fas fa-link"></i></a>
</h3>
<p>Markdown テキストを入力し、他の R Markdown 出力のように<u>インライン</u>コードを含めることができます。詳細については<a href="rmarkdown.html#rmarkdown">R Markdown で作るレポート</a>の章を参照してください。</p>
<p>この章で作成するダッシュボードには、集計した結果を表示するテキストパネルが用意されています。パネル内にはアウトブレイクで報告された最新の入院日と症例数が自動的に変わるテキストを含みます。</p>
</div>
<div id="表-2" class="section level3 unnumbered">
<h3>表<a class="anchor" aria-label="anchor" href="#%E8%A1%A8-2"><i class="fas fa-link"></i></a>
</h3>
<p>パネルには表などを出力する R コードチャンクを含められます。この場合、テーブルを表示するために <strong>knitr</strong> パッケージの <code>kable()</code> 関数を使用すると、出力が最も見栄えよく見え、かつ、ウィンドウサイズに合わせて表示されます。<strong>flextable</strong> パッケージの関数を利用すると、要約表や、一部分を切り落とした表を作成できます。</p>
<p>以下の例では <code>linelist</code> オブジェクトに <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> コマンドを適用して、病院ごとの症例数の要約表を作成しています。最終的に、この要約表は <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">knitr::kable()</a></code> に渡され、ページ上では右側にスクロールバーが表示されます。<code>kable()</code> と <strong>kableExtra</strong> パッケージを使った表のカスタマイズについては、<a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">こちらのドキュメント</a> を参照してください。</p>
<div class="inline-figure"><img src="images/flexdashboard_tables_script.png" width="100%" height="100%"></div>
<p>上記スクリプトの実行結果です。</p>
<div class="inline-figure"><img src="images/flexdashboard_tables_view.png" width="100%"></div>
<p>もし、「ページ」内で、ユーザがデータフレームを抽出、並び変え、操作できるような動的な表を表示したい場合は、以下のコードのように、<strong>DT</strong> パッケージと <code>datatable()</code> 関数を使用します。</p>
<p>以下のサンプルコードで、<code>linelist</code> データフレームが表示されます。<code>rownames = FALSE</code> を設定すると行番号表示を省略し、水平方向のスペースを節約できます。<code>filter = "top"</code> を設定すると、すべての列の一番上にフィルタを配置できます。その他の指定項目はリスト型にまとめて <code>options =</code> に渡します。以下では、options に 5 行ごとにデータフレーム内容が表示されるように <code>pageLength =</code> を設定し、かつ、ユーザが下部のスクロールバーを使って水平方向にスクロールできるように <code>scrollX =</code> を設定しています。引数 <code>class = 'white-space: nowrap'</code> は、各行が 1 行表示となることを保証します（各セル内で改行されません）。その他の引数や値については、 <a href="https://rstudio.github.io/DT/?_ga=2.2810736.1321860763.1619286819-369061888.1601594705">こちら</a>を参照するか、<code>?datatable</code> と入力してみてください。</p>
<div class="sourceCode" id="cb1839"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">linelist</span>, </span>
<span>              rownames <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>              options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pageLength <span class="op">=</span> <span class="fl">5</span>, scrollX <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>              class <span class="op">=</span> <span class="st">'white-space: nowrap'</span> <span class="op">)</span></span></code></pre></div>
</div>
<div id="プロット-1" class="section level3 unnumbered">
<h3>プロット<a class="anchor" aria-label="anchor" href="#%E3%83%97%E3%83%AD%E3%83%83%E3%83%88-1"><i class="fas fa-link"></i></a>
</h3>
<p>通常の R スクリプトでプロットするようにダッシュボードページにプロットを表示できます。以下の例では、<strong>incidence2</strong> パッケージを使用して、2 つの簡単なコマンドで年齢層別の「流行曲線（エピカーブ）」を作成しています（<a href="epicurves.html#epicurves">流行曲線（エピカーブ）</a> の章を参照してください）。他にも、<code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> を使用して、同じようにプロットを表示できます。</p>
<div class="inline-figure"><img src="images/flexdashboard_plots_script.png" width="100%" height="100%"></div>
<p>上記スクリプトの実行結果です。</p>
<div class="inline-figure"><img src="images/flexdashboard_plots_view.png" width="100%"></div>
</div>
<div id="動的なプロット" class="section level3 unnumbered">
<h3>動的なプロット<a class="anchor" aria-label="anchor" href="#%E5%8B%95%E7%9A%84%E3%81%AA%E3%83%97%E3%83%AD%E3%83%83%E3%83%88"><i class="fas fa-link"></i></a>
</h3>
<p>また、標準的な ggplot や他のプロットオブジェクトを <strong>plotly</strong> パッケージの <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code> に渡すこともできます (<a href="interactive-plots.html#interactive-plots">動的な図の作成</a> の章を参照してください)。この関数はプロットを動的にします。つまり、ユーザがプロットを「ズームイン」したり、すべての観測値（この例では、流行曲線（エピカーブ）中の年齢層別、週あたりの症例数）をマウスカーソルをグラフ上に置くことで表示したりできます。</p>
<div class="sourceCode" id="cb1840"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_outbreak</span> <span class="op">&lt;-</span> <span class="fu">incidence</span><span class="op">(</span><span class="va">linelist</span>, <span class="va">date_onset</span>, <span class="st">"week"</span>, groups <span class="op">=</span> <span class="va">age_cat</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">age_outbreak</span>, fill <span class="op">=</span> <span class="va">age_cat</span>, col_pal <span class="op">=</span> <span class="va">muted</span>, title <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>上記スクリプトをダッシュボードで表示するとこんな感じです（gif）。この動的表示機能は、ダッシュボードを静的ファイルとして電子メールで送信しても機能します（インターネットに接続されていなくても表示可能）。</p>
<div class="inline-figure"><img src="images/flexdashboard_ggplotly.gif" width="100%" height="100%"></div>
</div>
<div id="html-ウイジェット" class="section level3 unnumbered">
<h3>HTML ウイジェット<a class="anchor" aria-label="anchor" href="#html-%E3%82%A6%E3%82%A4%E3%82%B8%E3%82%A7%E3%83%83%E3%83%88"><i class="fas fa-link"></i></a>
</h3>
<p><a href="http://www.htmlwidgets.org/">HTML widgets for R</a> ウェブページには、多数の HTML ウィジェットのサンプルがあります。HTML ウィジェットはi JavaScript のライブラリを利用して動的操作性を高める R パッケージの特殊なダッシュボードパーツです。HTML ウィジェットは R Markdown 出力（flexdashboard など）や Shiny ダッシュボードに埋め込むことができます。</p>
<p>HTML ウィジェットに利用できる R パッケージの一般的な使用例は、以下があります。</p>
<ul>
<li>Plotly パッケージ（この章と、本ハンドブックの<a href="interactive-plots.html#interactive-plots">動的な図の作成</a>の章で使用されています）。</li>
<li>visNetwork パッケージ（本ハンドブックの<a href="transmission-chains.html#transmission-chains">感染連鎖の図式化</a>の章で使用されています）。</li>
<li>Leaflet パッケージ（本ハンドブックの<a href="gis.html#gis">GIS の基礎</a>の章で使用されています。</li>
<li>dygraphs パッケージ（時系列データを動的に表示するのに便利です）</li>
<li>DT (<code>datatable()</code>) パッケージ（(フィルタ、ソートなどの機能を持つ動的なテーブルを表示するのに便利です）。</li>
</ul>
<p>以下は、visNetwork パッケージを使用した感染連鎖をダッシュボードページに追加する例です。R Markdown スクリプトの「Column 2」見出し 2 に追加する新しいコードのみを表示しています。追加するコード例の詳細は、ハンドブックの<a href="transmission-chains.html#transmission-chains">感染連鎖の図式化</a>の章をご参照ください。</p>
<div class="inline-figure"><img src="images/flexdashboard_chain_script.png" width="100%" height="100%"></div>
<p>上記スクリプトの実行結果です。</p>
<div class="inline-figure"><img src="images/flexdashboard_chain.gif" width="100%"></div>
</div>
</div>
<div id="コードの構造化" class="section level2" number="42.7">
<h2>
<span class="header-section-number">42.7</span> コードの構造化<a class="anchor" aria-label="anchor" href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E6%A7%8B%E9%80%A0%E5%8C%96"><i class="fas fa-link"></i></a>
</h2>
<p>ここまでの例のようにすべてのコードを <strong>flexdashboard</strong> パッケージを利用した R Markdown スクリプト内に記述できます。また、より整理された簡潔なダッシュボード用の R スクリプトを作成するために、他の R スクリプトで管理または作成されたコード・図を呼び出せます。他の R スクリプトの呼び出しについては、<a href="rmarkdown.html#rmarkdown">R Markdown で作るレポート</a>の章でより詳細に説明しています。</p>
</div>
<div id="shiny-パッケージを利用する" class="section level2" number="42.8">
<h2>
<span class="header-section-number">42.8</span> Shiny パッケージを利用する<a class="anchor" aria-label="anchor" href="#shiny-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B"><i class="fas fa-link"></i></a>
</h2>
<p>R パッケージの <strong>shiny</strong> パッケージを共に用いると、ユーザの入力をより反映させるダッシュボードを作成できます。例えば、ユーザに管轄地域や日付範囲を選択（例、表示されるデータにフィルターをかけるなど）させ、選択内容に対応してグラフ表示が変化するようにできます。<strong>flexdashboard</strong> パッケージを用いた R スクリプトに <strong>shiny</strong> パッケージの柔軟性を組み込むには、スクリプトに少し変更を加えるだけです。</p>
<p><strong>flexdashboard</strong> パッケージを使わなくても、<strong>shiny</strong> パッケージを使ってアプリ・ダッシュボードを作成できます。ハンドブックの<a href="shiny-basics.html#shiny-basics">Shiny で作るダッシュボード</a>の章では、この方法について、<strong>shiny</strong> パッケージ固有の少々の構文、アプリのファイル構造、共有・配信方法の選択肢（無料の配信サーバを含む）についての概要を説明しています。構文と一般的なヒントは、<strong>flexdashboard</strong> パッケージの利用にも当てはまります。</p>
<p>しかしながら、<strong>flexdashboard</strong> パッケージと <strong>shiny</strong> パッケージの機能を共に用いると、作成されるダッシュボードを根本的に変えることになります。<strong>shiny</strong> パッケージを組み込むと電子メールで送信し、誰でも開いて見ることができるような HTML 出力は生成されません。代わりに「アプリ」になります。スクリプトの上部にある「Knit」ボタンは「Run document」アイコンに置き換えられます。「Run document」アイコンを押すと、あなたのローカルコンピュータに、動的なダッシュボード（アプリ）のための配信サーバ（インスタンス）が動作しはじめます。</p>
<p><strong>shiny</strong> パッケージの機能を用いたダッシュボードを共有するには、以下のいずれかが必要となります</p>
<ul>
<li>R markdown スクリプトをユーザに送り、ユーザが自分の PC で R スクリプトを開き、アプリを実行する、または</li>
<li>アプリ・ダッシュボードを、ユーザがアクセス可能な配信サーバにホストする</li>
</ul>
<p>上記のように、<strong>shiny</strong> パッケージの機能を統合することにはメリットもありますが、複雑さもあります。もし、電子メールで簡単に共有することが優先事項であり、<strong>shiny</strong> パッケージの動的機能を必要としないのであれば、「動的なプロット」セクションで例示したような <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly()</a></code> による限定された動的機能の採用を考慮してください。</p>
<p>以下では、ここまでの例で使用した “outbreak_dashboard.Rmd” を使い <strong>shiny</strong> パッケージを導入する簡単な例を紹介します。shiny を <strong>flexdashboard</strong> パッケージと共に用いるための詳細なドキュメントは、<a href="https://rmarkdown.rstudio.com/flexdashboard/shiny.html">オンライン</a>で入手可能です。</p>
<div id="shiny-パッケージを利用する設定" class="section level3 unnumbered">
<h3>shiny パッケージを利用する設定<a class="anchor" aria-label="anchor" href="#shiny-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E8%A8%AD%E5%AE%9A"><i class="fas fa-link"></i></a>
</h3>
<p>以下のように、YAML ヘッダに <code>runtime: shiny</code> パラメータを <code>output:</code> パラメータと同じインデントレベルで追加することで、<strong>flexdashboard</strong> パッケージと <strong>shiny</strong> パッケージの機能を共に用いることができます。</p>
<div class="sourceCode" id="cb1841"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb1841-1"><a href="flexdashboard.html#cb1841-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1841-2"><a href="flexdashboard.html#cb1841-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Outbreak dashboard (Shiny demo)"</span></span>
<span id="cb1841-3"><a href="flexdashboard.html#cb1841-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb1841-4"><a href="flexdashboard.html#cb1841-4" aria-hidden="true" tabindex="-1"></a><span class="co">  flexdashboard::flex_dashboard:</span></span>
<span id="cb1841-5"><a href="flexdashboard.html#cb1841-5" aria-hidden="true" tabindex="-1"></a><span class="co">    orientation: columns</span></span>
<span id="cb1841-6"><a href="flexdashboard.html#cb1841-6" aria-hidden="true" tabindex="-1"></a><span class="co">    vertical_layout: fill</span></span>
<span id="cb1841-7"><a href="flexdashboard.html#cb1841-7" aria-hidden="true" tabindex="-1"></a><span class="an">runtime:</span><span class="co"> shiny</span></span>
<span id="cb1841-8"><a href="flexdashboard.html#cb1841-8" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code></pre></div>
<p>ユーザからの入力値を集約する入力用ウィジェットの配置に「サイドバー」を有効にすると便利です。「レイアウト」セクションで説明したように、カラム用の見出し 2 を作成し、<code>{.sidebar}</code> オプションを定義すると、左側にサイドバーが作成されます。このサイドバー用カラム内に <strong>shiny</strong> パッケージの <code>input</code> コマンドを含む、本文テキストと R コードチャンクを追加できます。</p>
<p>アプリやダッシュボードが配信サーバでホストされていて、複数のユーザが同時に使用する可能性がある場合に有用な方法があります。まず、スクリプト内で最初に作成する R コードチャンクに <code>global</code> という名前を付けます。このコードチャンクにデータをインポート・ロードするためのコマンドを記述します。この特別な名前のコードチャンクは特別に振る舞い、チャンク中でインポートされたデータは一度だけインポートされ（繰り返されることなく）、アプリやダッシュボードにアクセスするすべてのユーザが利用できます。この設定により、アプリの起動速度が向上します。</p>
</div>
<div id="shiny-パッケージを利用した実際の例" class="section level3 unnumbered">
<h3>shiny パッケージを利用した実際の例<a class="anchor" aria-label="anchor" href="#shiny-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E5%AE%9F%E9%9A%9B%E3%81%AE%E4%BE%8B"><i class="fas fa-link"></i></a>
</h3>
<p>このセクションでは、<strong>flexdashboard</strong> パッケージを利用した R markdown スクリプト “outbreak_dashboard.Rmd” に <strong>shiny</strong> パッケージを追加します。追加する機能は、ユーザがドロップダウンメニューから病院を選択し、選択された病院の症例のみを反映した流行曲線（エピカーブ）を、動的なプロットとタイトルとともに表示する機能です。以下に作成概要を箇条書きにします。</p>
<ul>
<li>YAML ヘッダに <code>runtime: shiny</code> パラメータを追加する。<br>
</li>
<li>スクリプトで最初に作成する R コードチャンク（セットアップチャンク）の名前を <code>global</code> に変更する。</li>
<li>サイドバーを次の内容で作成する：
<ul>
<li>個々の病院名を含むベクトルを作成するコード</li>
<li>病院名を選択する <code>selectInput()</code> コマンド (<strong>shiny</strong> パッケージに含まれるドロップダウンメニュー)。選択内容は <code>hospital_choice</code> オブジェクトとして保存され、他のコードから <code>input$hospital_choice</code> として参照できます。</li>
</ul>
</li>
<li>流行曲線（エピカーブ）を表示するコード（Column 2、見出し 2 の下位見出し内）は <code>renderPlot({ })</code> 中に記述されており、以下を含みます。
<ul>
<li>
<code>linelist</code> オブジェクト内の <code>hospital</code> 変数（列）を <code>input$hospital_choice</code> に保存されている値に制限するフィルタ</li>
<li>input$hospital_choice` に保存されている値を反映した動的なプロットとタイトル</li>
</ul>
</li>
</ul>
<p><code>input$</code> に保存されている値を参照するコードは、(値に対応して表示（rendering）を変えるために) <code>render({})</code> 関数の中になければならないことに注意してください。</p>
<p>以下は、YAML ヘッダ、セットアップチャンク、サイドバーなどの記述を含む R markdown スクリプトの最初の部分です：</p>
<div class="inline-figure"><img src="images/flexdashboard_shiny_script1.png" width="100%" height="100%"></div>
<p>以下は「Colums 2」と下位見出し、動的な流行曲線（エピカーブ）プロットのための記述です。</p>
<div class="inline-figure"><img src="images/flexdashboard_shiny_script2.png" width="100%" height="100%"></div>
<p>上記を統合したダッシュボードの表示です。</p>
<div class="inline-figure"><img src="images/flexdashboard_shiny_view.gif" width="100%" height="100%"></div>
</div>
<div id="shiny-パッケージを利用したその他の例" class="section level3 unnumbered">
<h3>shiny パッケージを利用したその他の例<a class="anchor" aria-label="anchor" href="#shiny-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E4%BE%8B"><i class="fas fa-link"></i></a>
</h3>
<p><strong>shiny</strong> パッケージの動的機能と <strong>leaflet</strong> パッケージ内の地図を表示するためのウィジェット機能を使い、ダッシュボードに <strong>shiny</strong> パッケージと <strong>flexdashboard</strong> パッケージを利用した、健康関連を扱った例についてはオンラインブック<a href="https://www.paulamoraga.com/book-geospatial/sec-dashboardswithshiny.html">Geospatial Health Data: Modeling and Visualization with R-INLA and Shiny</a> の該当章をご覧ください。</p>
</div>
</div>
<div id="ユーザとの共有配信方法" class="section level2" number="42.9">
<h2>
<span class="header-section-number">42.9</span> ユーザとの共有、配信方法<a class="anchor" aria-label="anchor" href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%81%A8%E3%81%AE%E5%85%B1%E6%9C%89%E9%85%8D%E4%BF%A1%E6%96%B9%E6%B3%95"><i class="fas fa-link"></i></a>
</h2>
<p><strong>shiny</strong> パッケージの機能を含まないダッシュボードは、HTML ファイル（.html）を出力し、（サイズが許せば）メールで送信できます。この方法は、「ダッシュボード」をレポートとして送ることができ、ウェブサイトとしてホストするための配信サーバを用意する必要がないため、便利です。</p>
<p><strong>shiny</strong> パッケージの機能を利用した場合、出力ファイルをメールで送ることはできませんが、スクリプト自体を R ユーザに送ったり、「Shiny パッケージを利用する」セクションで説明したようにダッシュボードを配信サーバでホストすることが可能です。</p>
</div>
<div id="参考資料-32" class="section level2" number="42.10">
<h2>
<span class="header-section-number">42.10</span> 参考資料<a class="anchor" aria-label="anchor" href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99-32"><i class="fas fa-link"></i></a>
</h2>
<p>この章で参考にした優れたチュートリアルは、以下のとおりです。これらを参考にすれば、おそらく 1 時間以内にあなた自身でダッシュボードを作成できます。</p>
<p><a href="https://bookdown.org/yihui/rmarkdown/dashboards.html" class="uri">https://bookdown.org/yihui/rmarkdown/dashboards.html</a></p>
<p><a href="https://rmarkdown.rstudio.com/flexdashboard/" class="uri">https://rmarkdown.rstudio.com/flexdashboard/</a></p>
<p><a href="https://rmarkdown.rstudio.com/flexdashboard/using.html" class="uri">https://rmarkdown.rstudio.com/flexdashboard/using.html</a></p>
<p><a href="https://rmarkdown.rstudio.com/flexdashboard/examples.html" class="uri">https://rmarkdown.rstudio.com/flexdashboard/examples.html</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="reportfactory.html"><span class="header-section-number">41</span> ルーチンで作成するレポートの整理</a></div>
<div class="next"><a href="shiny-basics.html"><span class="header-section-number">43</span> Shiny で作るダッシュボード</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#flexdashboard"><span class="header-section-number">42</span> R Markdownで作るダッシュボード</a></li>
<li>
<a class="nav-link" href="#%E6%BA%96%E5%82%99-33"><span class="header-section-number">42.1</span> 準備</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF-22">パッケージの読み込み</a></li>
<li><a class="nav-link" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88-17">データのインポート</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E6%96%B0%E8%A6%8F-r-markdown-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><span class="header-section-number">42.2</span> 新規 R Markdown ファイルを作成する</a></li>
<li>
<a class="nav-link" href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88-1"><span class="header-section-number">42.3</span> スクリプト</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#yaml-%E3%83%98%E3%83%83%E3%83%80">YAML ヘッダ</a></li>
<li><a class="nav-link" href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%83%81%E3%83%A3%E3%83%B3%E3%82%AF-1">コードチャンク</a></li>
<li><a class="nav-link" href="#%E6%9C%AC%E6%96%87%E3%83%8A%E3%83%A9%E3%83%86%E3%82%A3%E3%83%96%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88">本文（ナラティブテキスト）</a></li>
<li><a class="nav-link" href="#%E8%A6%8B%E5%87%BA%E3%81%97">見出し</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%B1%9E%E6%80%A7"><span class="header-section-number">42.4</span> セクションの属性</a></li>
<li>
<a class="nav-link" href="#layout"><span class="header-section-number">42.5</span> レイアウト</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E3%83%9A%E3%83%BC%E3%82%B8">ページ</a></li>
<li><a class="nav-link" href="#%E5%86%85%E5%AE%B9%E3%81%AE%E9%85%8D%E7%BD%AE%E6%96%B9%E5%90%91%E6%8C%87%E5%AE%9A">内容の配置方向指定</a></li>
<li><a class="nav-link" href="#%E3%82%BF%E3%83%96">タブ</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E8%A1%A8%E7%A4%BA%E5%86%85%E5%AE%B9%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><span class="header-section-number">42.6</span> 表示内容を追加する</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88-1">テキスト</a></li>
<li><a class="nav-link" href="#%E8%A1%A8-2">表</a></li>
<li><a class="nav-link" href="#%E3%83%97%E3%83%AD%E3%83%83%E3%83%88-1">プロット</a></li>
<li><a class="nav-link" href="#%E5%8B%95%E7%9A%84%E3%81%AA%E3%83%97%E3%83%AD%E3%83%83%E3%83%88">動的なプロット</a></li>
<li><a class="nav-link" href="#html-%E3%82%A6%E3%82%A4%E3%82%B8%E3%82%A7%E3%83%83%E3%83%88">HTML ウイジェット</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E6%A7%8B%E9%80%A0%E5%8C%96"><span class="header-section-number">42.7</span> コードの構造化</a></li>
<li>
<a class="nav-link" href="#shiny-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B"><span class="header-section-number">42.8</span> Shiny パッケージを利用する</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#shiny-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E8%A8%AD%E5%AE%9A">shiny パッケージを利用する設定</a></li>
<li><a class="nav-link" href="#shiny-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E5%AE%9F%E9%9A%9B%E3%81%AE%E4%BE%8B">shiny パッケージを利用した実際の例</a></li>
<li><a class="nav-link" href="#shiny-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E4%BE%8B">shiny パッケージを利用したその他の例</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%81%A8%E3%81%AE%E5%85%B1%E6%9C%89%E9%85%8D%E4%BF%A1%E6%96%B9%E6%B3%95"><span class="header-section-number">42.9</span> ユーザとの共有、配信方法</a></li>
<li><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99-32"><span class="header-section-number">42.10</span> 参考資料</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>疫学のための R ハンドブック</strong>" was written by the handbook team. It was last built on 2022-10-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
