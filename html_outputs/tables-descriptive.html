<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>17 記述統計表の作り方 | 疫学のための R ハンドブック</title>
<meta name="author" content="the handbook team">
<meta name="description" content="本章では、janitor パッケージ、dplyr パッケージ、gtsummary パッケージ、rstatix パッケージ、R の基本パッケージ（以下、ベース R）を使って、データを要約したり、記述統計表を作成したりする方法を紹介します。 本章では、元になるテーブルの作成方法を、見やすい表の作り方章では、表をみやすくフォーマットして印刷する方法をそれぞれ説明しています。...">
<meta name="generator" content="bookdown 0.37 with bs4_book()">
<meta property="og:title" content="17 記述統計表の作り方 | 疫学のための R ハンドブック">
<meta property="og:type" content="book">
<meta property="og:description" content="本章では、janitor パッケージ、dplyr パッケージ、gtsummary パッケージ、rstatix パッケージ、R の基本パッケージ（以下、ベース R）を使って、データを要約したり、記述統計表を作成したりする方法を紹介します。 本章では、元になるテーブルの作成方法を、見やすい表の作り方章では、表をみやすくフォーマットして印刷する方法をそれぞれ説明しています。...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="17 記述統計表の作り方 | 疫学のための R ハンドブック">
<meta name="twitter:description" content="本章では、janitor パッケージ、dplyr パッケージ、gtsummary パッケージ、rstatix パッケージ、R の基本パッケージ（以下、ベース R）を使って、データを要約したり、記述統計表を作成したりする方法を紹介します。 本章では、元になるテーブルの作成方法を、見やすい表の作り方章では、表をみやすくフォーマットして印刷する方法をそれぞれ説明しています。...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.6.1/transition.js"></script><script src="libs/bs3compat-0.6.1/tabs.js"></script><script src="libs/bs3compat-0.6.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.31/datatables.js"></script><link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.2.1/leaflet.js"></script><script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script><script src="libs/leaflet-providers-plugin-2.2.1/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.10/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.3/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script><script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script><script type="text/javascript">
        // window.addEventListener("load", function() {
        //     document.getElementById('toc').firstChild.innerHTML = "章目次"; 
        // });
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementsByClassName("d-flex align-items-start justify-content-between")[0].children[0].children[0].innerHTML = "疫学のための R</br>ハンドブック";
            document.getElementById('toc').firstChild.innerHTML = "章目次"; 
            document.getElementById('main-nav').children[1].firstChild.innerHTML = "総目次";
            document.getElementById('search').setAttribute("placeholder", "検索");
        });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">疫学のための R ハンドブック</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">本書について</li>
<li><a class="" href="editorial-style.html"><span class="header-section-number">1</span> 編集前記・技術注記</a></li>
<li><a class="" href="data-used.html"><span class="header-section-number">2</span> ハンドブックとデータのダウンロード</a></li>
<li class="book-part">基本編</li>
<li><a class="" href="basics.html"><span class="header-section-number">3</span> R の基礎</a></li>
<li><a class="" href="transition-to-R.html"><span class="header-section-number">4</span> Excel・Stata・SASとの比較</a></li>
<li><a class="" href="packages-suggested.html"><span class="header-section-number">5</span> 推奨パッケージ</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> R プロジェクト</a></li>
<li><a class="" href="importing.html"><span class="header-section-number">7</span> データのインポート・エクスポート</a></li>
<li class="book-part">データマネジメント</li>
<li><a class="" href="cleaning.html"><span class="header-section-number">8</span> データクリーニングと主要関数</a></li>
<li><a class="" href="dates.html"><span class="header-section-number">9</span> 日付型データ</a></li>
<li><a class="" href="characters-strings.html"><span class="header-section-number">10</span> 文字型・文字列型データ</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> 因子（ファクタ）型データ</a></li>
<li><a class="" href="pivoting.html"><span class="header-section-number">12</span> データの縦横変換</a></li>
<li><a class="" href="grouping.html"><span class="header-section-number">13</span> データのグループ化</a></li>
<li><a class="" href="joining-matching.html"><span class="header-section-number">14</span> データの結合</a></li>
<li><a class="" href="deduplication.html"><span class="header-section-number">15</span> 重複データの排除</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">16</span> ループと反復処理・リストの操作</a></li>
<li class="book-part">データ分析</li>
<li><a class="active" href="tables-descriptive.html"><span class="header-section-number">17</span> 記述統計表の作り方</a></li>
<li><a class="" href="stat-tests.html"><span class="header-section-number">18</span> 基本的な統計的検定</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">19</span> 単変量と多変量回帰</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> データの欠損</a></li>
<li><a class="" href="standardization.html"><span class="header-section-number">21</span> 標準化率</a></li>
<li><a class="" href="moving-average.html"><span class="header-section-number">22</span> 移動平均</a></li>
<li><a class="" href="time-series.html"><span class="header-section-number">23</span> 時系列分析とアウトブレイクの検出</a></li>
<li><a class="" href="epidemic-models.html"><span class="header-section-number">24</span> エピデミックモデリング</a></li>
<li><a class="" href="contact-tracing.html"><span class="header-section-number">25</span> 接触者の追跡</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">26</span> 標本調査データ分析</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">27</span> 生存時間解析</a></li>
<li><a class="" href="gis.html"><span class="header-section-number">28</span> GIS の基本</a></li>
<li class="book-part">データの可視化</li>
<li><a class="" href="tables-presentation.html"><span class="header-section-number">29</span> 見やすい表の作り方</a></li>
<li><a class="" href="ggplot-basics.html"><span class="header-section-number">30</span> ggplot の基本</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">31</span> ggplotのヒント</a></li>
<li><a class="" href="epicurves.html"><span class="header-section-number">32</span> 流行曲線（エピカーブ）</a></li>
<li><a class="" href="age-pyramid.html"><span class="header-section-number">33</span> 人口ピラミッドとリッカート尺度</a></li>
<li><a class="" href="heatmaps.html"><span class="header-section-number">34</span> ヒートマップ</a></li>
<li><a class="" href="diagrams.html"><span class="header-section-number">35</span> フローチャート・サンキー図・タイムライン</a></li>
<li><a class="" href="combination-analysis.html"><span class="header-section-number">36</span> 複数回答データの分析</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">37</span> 感染連鎖</a></li>
<li><a class="" href="phylogenetic-trees.html"><span class="header-section-number">38</span> 系統樹</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">39</span> 動的な図の作成</a></li>
<li class="book-part">レポートとダッシュボード</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">40</span> R Markdown で作るレポート</a></li>
<li><a class="" href="reportfactory.html"><span class="header-section-number">41</span> ルーチンで作成するレポートの整理</a></li>
<li><a class="" href="flexdashboard.html"><span class="header-section-number">42</span> R Markdownで作るダッシュボード</a></li>
<li><a class="" href="shiny-basics.html"><span class="header-section-number">43</span> Shiny で作るダッシュボード</a></li>
<li class="book-part">その他</li>
<li><a class="" href="writing-functions.html"><span class="header-section-number">44</span> 関数の作成</a></li>
<li><a class="" href="directories.html"><span class="header-section-number">45</span> ディレクトリの操作</a></li>
<li><a class="" href="collaboration.html"><span class="header-section-number">46</span> Git と Github を使ったバージョン管理と共同作業</a></li>
<li><a class="" href="errors.html"><span class="header-section-number">47</span> よくあるエラー</a></li>
<li><a class="" href="help.html"><span class="header-section-number">48</span> ヘルプ</a></li>
<li><a class="" href="network-drives.html"><span class="header-section-number">49</span> ネットワークドライブで R を使用する場合</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">50</span> data.table パッケージを使用したデータ処理</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="tables-descriptive" class="section level1" number="17">
<h1>
<span class="header-section-number">17</span> 記述統計表の作り方<a class="anchor" aria-label="anchor" href="#tables-descriptive"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/descriptive_tables.png" width="75%" style="display: block; margin: auto;"></div>
<p>本章では、<strong>janitor</strong> パッケージ、<strong>dplyr</strong> パッケージ、<strong>gtsummary</strong> パッケージ、<strong>rstatix</strong> パッケージ、R の<strong>基本パッケージ</strong>（以下、ベース R）を使って、データを要約したり、記述統計表を作成したりする方法を紹介します。</p>
<p>本章では、元になるテーブルの作成方法を、<a href="tables-presentation.html#tables-presentation">見やすい表の作り方</a>章では、表をみやすくフォーマットして印刷する方法をそれぞれ説明しています。</p>
<p>各パッケージはコードの簡素化、出力の種類、印刷出力の品質などの面で長所と短所を備えています。本章を参考にして、ご自身の使い方に合ったアプローチをお選びください。</p>
<p>集計表やクロス集計表を作成する際には、いくつかの選択肢があります。例えば、コードの容易さ、カスタマイズ性、出力時に要求されること（R コンソールへの出力、データフレームとしての出力、「きれいな」 .png/.jpeg/.html 画像としての出力）、後処理のしやすさなど、いくつかの要素が考えられます。次の点を考慮して、自分の状況に合ったツールを選択してください。</p>
<ul>
<li>
<strong>janitor</strong> パッケージの <code>tabyl()</code> は、作成した表計算やクロス集計を「加工する」ために使います。</li>
<li>
<strong>rstatix</strong> パッケージの <code>get_summary_stats()</code> を使うと、複数の列やグループの要約統計量を数値化したデータフレームを簡単に生成できます。</li>
<li>より複雑な統計処理、データフレーム出力の整理、または <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> 用データの準備には、<strong>dplyr</strong> パッケージの <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> や<code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> を使います。</li>
<li>
<strong>gtsummary</strong> パッケージから <code>tbl_summary()</code> を使用して、公表用の詳細な表を作成します。</li>
<li>上記のパッケージを利用できない場合は、<strong>ベース R</strong> の <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> を使用してください。</li>
</ul>
<!-- ======================================================= --><div id="準備-8" class="section level2" number="17.1">
<h2>
<span class="header-section-number">17.1</span> 準備<a class="anchor" aria-label="anchor" href="#%E6%BA%96%E5%82%99-8"><i class="fas fa-link"></i></a>
</h2>
<div id="パッケージの読み込み-7" class="section level3 unnumbered">
<h3>パッケージの読み込み<a class="anchor" aria-label="anchor" href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF-7"><i class="fas fa-link"></i></a>
</h3>
<p>以下のコードを実行すると、分析に必要なパッケージが読み込まれます。このハンドブックでは、パッケージを読み込むために、pacman パッケージの p_load() を主に使用しています。p_load() は、必要に応じてパッケージをインストールし、現在の R セッションで使用するためにパッケージを読み込む関数です。また、すでにインストールされたパッケージは、R の基本パッケージである base の library() を使用して読み込むこともできます。R のパッケージについては <a href="basics.html#basics">R の基礎</a>の章を参照してください。</p>
<div class="sourceCode" id="cb829"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">rio</span>,          <span class="co"># ファイルインポート</span></span>
<span>  <span class="va">here</span>,         <span class="co"># ファイルロケータ</span></span>
<span>  <span class="va">skimr</span>,        <span class="co"># データの概要を把握</span></span>
<span>  <span class="va">tidyverse</span>,    <span class="co"># データ管理とggplot2描画</span></span>
<span>  <span class="va">gtsummary</span>,    <span class="co"># 要約統計量と検定</span></span>
<span>  <span class="va">rstatix</span>,      <span class="co"># 要約統計量と統計的検定</span></span>
<span>  <span class="va">janitor</span>,      <span class="co"># 表に合計値とパーセンテージを追加</span></span>
<span>  <span class="va">scales</span>,       <span class="co"># 割合をパーセンテージに簡単に変換</span></span>
<span>  <span class="va">flextable</span>     <span class="co"># 表をきれいな画像に変換</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div id="データのインポート-8" class="section level3 unnumbered">
<h3>データのインポート<a class="anchor" aria-label="anchor" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88-8"><i class="fas fa-link"></i></a>
</h3>
<p>エボラ出血熱の流行をシミュレートしたデータセットをインポートします。お手元の環境でこの章の内容を実行したい方は、 <a href="https://github.com/appliedepi/epiRhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds" class="download-button">クリック</a>して「前処理された」ラインリスト（linelist）データをダウンロードしてください&gt;（.rds 形式で取得できます）。データは <strong>rio</strong> パッケージの <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> を利用してインポートしましょう（<strong>rio</strong> パッケージは、.xlsx、.csv、.rds など様々な種類のファイルを取り扱うことができます。詳細は、<a href="importing.html#importing">インポートとエクスポート</a> の章をご覧ください。）</p>
<div class="sourceCode" id="cb830"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ラインリストをインポート</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_cleaned.rds"</span><span class="op">)</span></span></code></pre></div>
<p>linelist の最初の 50 行を以下に表示します。</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-a19643d4ba04dc54ae49" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a19643d4ba04dc54ae49">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2\" data-max=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399075200000\" data-max=\"1406419200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399939200000\" data-max=\"1407024000000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400025600000\" data-max=\"1407110400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400371200000\" data-max=\"1410566400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-29&quot;,&quot;30-49&quot;,&quot;50-69&quot;,&quot;70+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;,&quot;50-54&quot;,&quot;55-59&quot;,&quot;60-64&quot;,&quot;65-69&quot;,&quot;70-74&quot;,&quot;75-79&quot;,&quot;80-84&quot;,&quot;85+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"-13.2697246824573\" data-max=\"-13.209391925612\" data-scale=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"8.45171855856465\" data-max=\"8.48802917129884\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"11\" data-max=\"241\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"20\" data-max=\"24\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"35.9\" data-max=\"38\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"428.994082840237\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.461830626007281,8.462729314626459,8.461443675342711,8.46191259217774,8.472923276435059,8.48401630165138,8.458371253408441,8.477617055125091,8.47570184950483,8.477799468789719,8.47145134147474,8.478048406853629,8.48528034195779,8.469575303958671,8.45957352078114,8.474048895115439,8.488029171298839,8.473437335922,8.484082637344621,8.46242233645879,8.470268221265719,8.463984474805329,8.464134789434199,8.456230946296071,8.48334624336805,8.47493999153642,8.47832062438022,8.469393389176499,8.48480589906514,8.47121232619015,8.48438437371817,8.484661585743391,8.477141599844281,8.462381270106089,8.455685978131131,8.4632880274758,8.47940722413856,8.46353857052336,8.461789681588639,8.47508713872833,8.458258081280711,8.4532568143863,8.4732571907655,8.479115866419329,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.81844297615629,16.06524962926347,22.49657064471879,71.41440190438405,41.61712247324614,62.09538908706566,0,16.83765369253662,22.79032897344431,53.41198979591836,24.28026361429067,22.46003435064077,54.32098765432099,41.05784325564545,28.56648199445983,17.03205520132763,25.04129149128882,38.7172182043977,27.3876813705495,31.55555555555556,14.80690759456621,30.88398111998135,26.61934338952972,59.37499999999999,96.61835748792272,19.23947487550928,84.94031221303948,18.41993774061044,27.77226740726046,41.32231404958677,17.20806665861611,24.16716240333135,15.72189710891781,428.9940828402366,27.99302202929125,243.2610124917817,20.23950075898128,30.52744643563797,25.15589569160998,47,39.04,31.06616432017979,77.96836711962574,29.51659612385831,166.4932362122789,100.3086419753086,37.76,20.60378034578518,23.45856237526698],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]},{"name":"case_id","targets":0},{"name":"generation","targets":1},{"name":"date_infection","targets":2},{"name":"date_onset","targets":3},{"name":"date_hospitalisation","targets":4},{"name":"date_outcome","targets":5},{"name":"outcome","targets":6},{"name":"gender","targets":7},{"name":"age","targets":8},{"name":"age_unit","targets":9},{"name":"age_years","targets":10},{"name":"age_cat","targets":11},{"name":"age_cat5","targets":12},{"name":"hospital","targets":13},{"name":"lon","targets":14},{"name":"lat","targets":15},{"name":"infector","targets":16},{"name":"source","targets":17},{"name":"wt_kg","targets":18},{"name":"ht_cm","targets":19},{"name":"ct_blood","targets":20},{"name":"fever","targets":21},{"name":"chills","targets":22},{"name":"cough","targets":23},{"name":"aches","targets":24},{"name":"vomit","targets":25},{"name":"temp","targets":26},{"name":"time_admission","targets":27},{"name":"bmi","targets":28},{"name":"days_onset_hosp","targets":29}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><!-- ======================================================= -->
</div>
</div>
<div id="データを閲覧する" class="section level2" number="17.2">
<h2>
<span class="header-section-number">17.2</span> データを閲覧する<a class="anchor" aria-label="anchor" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E9%96%B2%E8%A6%A7%E3%81%99%E3%82%8B"><i class="fas fa-link"></i></a>
</h2>
<div id="skimr-パッケージ" class="section level3 unnumbered">
<h3>
<strong>skimr</strong> パッケージ<a class="anchor" aria-label="anchor" href="#skimr-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8"><i class="fas fa-link"></i></a>
</h3>
<p><strong>skimr</strong>パッケージを使用すると、データセット内の各変数の概要を、詳細かつ見た目にわかりやすいで把握することができます。 <strong>skimr</strong> の詳細については、 <a href="https://github.com/ropensci/skimr">github ページ</a>をご覧ください。</p>
<p>以下では、関数 <code>skim()</code> を <code>linelist</code> データフレーム全体に適用しています。データフレームの概要とすべての列の概要が（データ型別に）生成されます。</p>
<div class="sourceCode" id="cb831"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## データセット内の各変数の情報を取得</span></span>
<span><span class="fu">skim</span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table style="width: auto;" class="table table-condensed">
<caption>
<span id="tab:unnamed-chunk-654">Table 17.1: </span>Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
linelist
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
5888
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
Date
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table></div>
<p><strong>Variable type: character</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
empty
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:right;">
whitespace
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
case_id
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5888
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
outcome
</td>
<td style="text-align:right;">
1323
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
gender
</td>
<td style="text-align:right;">
278
</td>
<td style="text-align:right;">
0.95
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
age_unit
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
hospital
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
infector
</td>
<td style="text-align:right;">
2088
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2697
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
source
</td>
<td style="text-align:right;">
2088
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
fever
</td>
<td style="text-align:right;">
249
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
chills
</td>
<td style="text-align:right;">
249
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
cough
</td>
<td style="text-align:right;">
249
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
aches
</td>
<td style="text-align:right;">
249
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
vomit
</td>
<td style="text-align:right;">
249
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
time_admission
</td>
<td style="text-align:right;">
765
</td>
<td style="text-align:right;">
0.87
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1072
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table></div>
<p><strong>Variable type: Date</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:left;">
min
</th>
<th style="text-align:left;">
max
</th>
<th style="text-align:left;">
median
</th>
<th style="text-align:right;">
n_unique
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
date_infection
</td>
<td style="text-align:right;">
2087
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:left;">
2014-03-19
</td>
<td style="text-align:left;">
2015-04-27
</td>
<td style="text-align:left;">
2014-10-11
</td>
<td style="text-align:right;">
359
</td>
</tr>
<tr>
<td style="text-align:left;">
date_onset
</td>
<td style="text-align:right;">
256
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:left;">
2014-04-07
</td>
<td style="text-align:left;">
2015-04-30
</td>
<td style="text-align:left;">
2014-10-23
</td>
<td style="text-align:right;">
367
</td>
</tr>
<tr>
<td style="text-align:left;">
date_hospitalisation
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
2014-04-17
</td>
<td style="text-align:left;">
2015-04-30
</td>
<td style="text-align:left;">
2014-10-23
</td>
<td style="text-align:right;">
363
</td>
</tr>
<tr>
<td style="text-align:left;">
date_outcome
</td>
<td style="text-align:right;">
936
</td>
<td style="text-align:right;">
0.84
</td>
<td style="text-align:left;">
2014-04-19
</td>
<td style="text-align:left;">
2015-06-04
</td>
<td style="text-align:left;">
2014-11-01
</td>
<td style="text-align:right;">
371
</td>
</tr>
</tbody>
</table></div>
<p><strong>Variable type: factor</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:left;">
ordered
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
age_cat
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
0-4: 1095, 5-9: 1095, 20-: 1073, 10-: 941
</td>
</tr>
<tr>
<td style="text-align:left;">
age_cat5
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
0-4: 1095, 5-9: 1095, 10-: 941, 15-: 743
</td>
</tr>
</tbody>
</table></div>
<p><strong>Variable type: numeric</strong></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
generation
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
16.56
</td>
<td style="text-align:right;">
5.79
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
13.00
</td>
<td style="text-align:right;">
16.00
</td>
<td style="text-align:right;">
20.00
</td>
<td style="text-align:right;">
37.00
</td>
</tr>
<tr>
<td style="text-align:left;">
age
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:right;">
16.07
</td>
<td style="text-align:right;">
12.62
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
6.00
</td>
<td style="text-align:right;">
13.00
</td>
<td style="text-align:right;">
23.00
</td>
<td style="text-align:right;">
84.00
</td>
</tr>
<tr>
<td style="text-align:left;">
age_years
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:right;">
16.02
</td>
<td style="text-align:right;">
12.64
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
6.00
</td>
<td style="text-align:right;">
13.00
</td>
<td style="text-align:right;">
23.00
</td>
<td style="text-align:right;">
84.00
</td>
</tr>
<tr>
<td style="text-align:left;">
lon
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
-13.23
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
-13.27
</td>
<td style="text-align:right;">
-13.25
</td>
<td style="text-align:right;">
-13.23
</td>
<td style="text-align:right;">
-13.22
</td>
<td style="text-align:right;">
-13.21
</td>
</tr>
<tr>
<td style="text-align:left;">
lat
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
8.47
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
8.45
</td>
<td style="text-align:right;">
8.46
</td>
<td style="text-align:right;">
8.47
</td>
<td style="text-align:right;">
8.48
</td>
<td style="text-align:right;">
8.49
</td>
</tr>
<tr>
<td style="text-align:left;">
wt_kg
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
52.64
</td>
<td style="text-align:right;">
18.58
</td>
<td style="text-align:right;">
-11.00
</td>
<td style="text-align:right;">
41.00
</td>
<td style="text-align:right;">
54.00
</td>
<td style="text-align:right;">
66.00
</td>
<td style="text-align:right;">
111.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ht_cm
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
124.96
</td>
<td style="text-align:right;">
49.52
</td>
<td style="text-align:right;">
4.00
</td>
<td style="text-align:right;">
91.00
</td>
<td style="text-align:right;">
129.00
</td>
<td style="text-align:right;">
159.00
</td>
<td style="text-align:right;">
295.00
</td>
</tr>
<tr>
<td style="text-align:left;">
ct_blood
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
21.21
</td>
<td style="text-align:right;">
1.69
</td>
<td style="text-align:right;">
16.00
</td>
<td style="text-align:right;">
20.00
</td>
<td style="text-align:right;">
22.00
</td>
<td style="text-align:right;">
22.00
</td>
<td style="text-align:right;">
26.00
</td>
</tr>
<tr>
<td style="text-align:left;">
temp
</td>
<td style="text-align:right;">
149
</td>
<td style="text-align:right;">
0.97
</td>
<td style="text-align:right;">
38.56
</td>
<td style="text-align:right;">
0.98
</td>
<td style="text-align:right;">
35.20
</td>
<td style="text-align:right;">
38.20
</td>
<td style="text-align:right;">
38.80
</td>
<td style="text-align:right;">
39.20
</td>
<td style="text-align:right;">
40.80
</td>
</tr>
<tr>
<td style="text-align:left;">
bmi
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
46.89
</td>
<td style="text-align:right;">
55.39
</td>
<td style="text-align:right;">
-1200.00
</td>
<td style="text-align:right;">
24.56
</td>
<td style="text-align:right;">
32.12
</td>
<td style="text-align:right;">
50.01
</td>
<td style="text-align:right;">
1250.00
</td>
</tr>
<tr>
<td style="text-align:left;">
days_onset_hosp
</td>
<td style="text-align:right;">
256
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
2.06
</td>
<td style="text-align:right;">
2.26
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
3.00
</td>
<td style="text-align:right;">
22.00
</td>
</tr>
</tbody>
</table></div>
<p>データセット全体の情報を得るために、<strong>ベース</strong> R にある <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> を使用することもできますが、この出力は <strong>skimr</strong> を使用した場合よりも読みづらくなる可能性があります。そのため、ページスペースを倹約するため下記の結果は表示していません。</p>
<div class="sourceCode" id="cb832"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## データセットの各列の情報を取得 </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="要約統計量" class="section level3 unnumbered">
<h3>要約統計量<a class="anchor" aria-label="anchor" href="#%E8%A6%81%E7%B4%84%E7%B5%B1%E8%A8%88%E9%87%8F"><i class="fas fa-link"></i></a>
</h3>
<p><strong>ベース</strong> R を使い、数値列の要約統計量を得ることができます。以下のように <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> を使用すると、数値列の有用な要約統計量の殆どを得ることができます。データフレーム名を以下のように指定しなければならないことにも注意してください。</p>
<div class="sourceCode" id="cb833"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age_years</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
##    0.00    6.00   13.00   16.02   23.00   84.00      86</code></pre>
<p>インデックスブラケット [ ]で特定の一部分にアクセスして保存することができます。:</p>
<div class="sourceCode" id="cb835"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age_years</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>            <span class="co"># 2番目の要素のみを取得</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb837"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 同様に、要素名による指定も可能</span></span>
<span><span class="co"># summary(linelist$age_years)[["1st Qu."]]  </span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>、 <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>、 <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code>、<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>、 <code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code>、 <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code>、および <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> などの <strong>ベース</strong> の関数を使って、個々の統計量を得ることができます。統計量の全リストは <a href="basics.html#basics">R の基礎</a> 章を参照してください。.</p>
<p><span style="color: orange;"><strong><em>注意:</em></strong> R ではデータに欠測値が含まれている場合、そのことを知らせるために NA を表示します。欠測値を無視したい場合は、統計量の関数を指定する際に引数 <code>na.rm = TRUE</code> を指定します。.</span></p>
<p><strong>rstatix</strong> gtsummaryの <code>get_summary_stats()</code> を使用すると <u>データフレーム形式</u> で要約統計量を取得できます。これは、それ以降の演算を行ったり、数値をプロットするのに役立ちます。<strong>rstatix</strong> パッケージとその関数の詳細については、 <a href="stat-tests.html#stat-tests">簡単な統計的検定</a> 章を参照してください。</p>
<div class="sourceCode" id="cb838"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">get_summary_stats</span><span class="op">(</span></span>
<span>    <span class="va">age</span>, <span class="va">wt_kg</span>, <span class="va">ht_cm</span>, <span class="va">ct_blood</span>, <span class="va">temp</span>,  <span class="co"># 計算をする行</span></span>
<span>    type <span class="op">=</span> <span class="st">"common"</span><span class="op">)</span>                    <span class="co"># 利用する要約統計量を指定</span></span></code></pre></div>
<pre><code>## # A tibble: 5 × 10
##   variable     n   min   max median   iqr  mean     sd    se    ci
##   &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 age       5802   0    84     13      17  16.1 12.6   0.166 0.325
## 2 wt_kg     5888 -11   111     54      25  52.6 18.6   0.242 0.475
## 3 ht_cm     5888   4   295    129      68 125.  49.5   0.645 1.26 
## 4 ct_blood  5888  16    26     22       2  21.2  1.69  0.022 0.043
## 5 temp      5739  35.2  40.8   38.8     1  38.6  0.977 0.013 0.025</code></pre>
</div>
</div>
<div id="tbl_janitor" class="section level2" number="17.3">
<h2>
<span class="header-section-number">17.3</span> <strong>janitor</strong> パッケージ<a class="anchor" aria-label="anchor" href="#tbl_janitor"><i class="fas fa-link"></i></a>
</h2>
<p><strong>janitor</strong> パッケージには集計表やクロス集計表を作成するために <code>tabyl()</code> があり、ヘルパー関数を利用して「加工」したり、変更したりすることでパーセンテージ、割合、カウント数などを表示などを行えます。</p>
<p>以下では <code>linelist</code> データフレームを <strong>janitor</strong> パッケージの関数にパイプ演算子で渡し、結果を表示しています。必要に応じて、代入演算子 <code>&lt;-</code>を使って結果のテーブルを保存することもできます。</p>
<div id="tabyl-のシンプルな使い方" class="section level3 unnumbered">
<h3>tabyl のシンプルな使い方<a class="anchor" aria-label="anchor" href="#tabyl-%E3%81%AE%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fas fa-link"></i></a>
</h3>
<p>デフォルトでは、特定の行に対して <code>tabyl()</code> を使用すると、ユニークな値、カウント数、および行ごとの「パーセンテージ」（実際には割合）が生成されます。割合は桁数が多く表示されるかもしれません。後述する <code>adorn_rounding()</code> を使うことで小数部分の桁数を調整できます。</p>
<div class="sourceCode" id="cb840"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  age_cat    n     percent valid_percent
##      0-4 1095 0.185971467   0.188728025
##      5-9 1095 0.185971467   0.188728025
##    10-14  941 0.159816576   0.162185453
##    15-19  743 0.126188859   0.128059290
##    20-29 1073 0.182235054   0.184936229
##    30-49  754 0.128057065   0.129955188
##    50-69   95 0.016134511   0.016373664
##      70+    6 0.001019022   0.001034126
##     &lt;NA&gt;   86 0.014605978            NA</code></pre>
<p>上図のように、欠測値がある場合は行に <code>&lt;NA&gt;</code>と記載されて表示されます。<code>show_na = FALSE</code>と指定すると、表示されなくなります。 欠測値がない場合は、この行が表示されることはありません。欠測値がある場合、割合は、すべての列（分母に <code>NA</code> 数を含む）と「実際の数」（分母に <code>NA</code> 数を含まない）に対しての両方で表示されます。</p>
<p>列が因子型で、データに特定のレベルしか存在しない場合でも、すべてのレベルが表に表示されます。この機能をオフにするには、 <code>show_missing_levels = FALSE</code> と指定します。詳細は <a href="factors.html#factors">因子（ファクタ）型データ</a> 章を参照してください。</p>
</div>
<div id="クロス集計表" class="section level3 unnumbered">
<h3>クロス集計表<a class="anchor" aria-label="anchor" href="#%E3%82%AF%E3%83%AD%E3%82%B9%E9%9B%86%E8%A8%88%E8%A1%A8"><i class="fas fa-link"></i></a>
</h3>
<p>クロス集計表のカウント数は <code>tabyl()</code> 内で 1 つ以上の列を追加することで実現できます現在はカウント数のみが表示されていますが、割合やパーセントは以下の手順で追加できます。</p>
<div class="sourceCode" id="cb842"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  age_cat   f   m NA_
##      0-4 640 416  39
##      5-9 641 412  42
##    10-14 518 383  40
##    15-19 359 364  20
##    20-29 468 575  30
##    30-49 179 557  18
##    50-69   2  91   2
##      70+   0   5   1
##     &lt;NA&gt;   0   0  86</code></pre>
</div>
<div id="tbl_adorn" class="section level3 unnumbered">
<h3>tabyl を 「加工する」<a class="anchor" aria-label="anchor" href="#tbl_adorn"><i class="fas fa-link"></i></a>
</h3>
<p><strong>janitor</strong> パッケージの <code>adorn()</code> 関数を使用して、合計値を加算したり、割合やパーセントに変換したり、その他の方法で表示を調整します。多くの場合、これらの関数のいくつかに tabyl をパイプ演算子で渡します。</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="9%">
<col width="90%">
</colgroup>
<thead><tr class="header">
<th>関数</th>
<th>説明</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>adorn_totals()</code></td>
<td>合計値を追加 （<code>where =</code> “row”、“col”、または “both”）。<code>name =</code> を “Total” と指定。</td>
</tr>
<tr class="even">
<td><code>adorn_percentages()</code></td>
<td>
<code>denominator =</code>を “row”、“col”、または “all” と指定してカウント数を割合に変換する。</td>
</tr>
<tr class="odd">
<td><code>adorn_pct_formatting()</code></td>
<td>割合をパーセントに変換。 <code>digits =</code>で小数点桁数を指定する。“%” 記号を削除する場合は <code>affix_sign = FALSE</code>と指定する。</td>
</tr>
<tr class="even">
<td><code>adorn_rounding()</code></td>
<td>割合を丸めるには、 <code>digits =</code> で小数点桁数を指定する。パーセントを丸めるには<code>adorn_pct_formatting()</code> を用い、<code>digits =</code>で小数点桁数を指定する。</td>
</tr>
<tr class="odd">
<td><code>adorn_ns()</code></td>
<td>割合あるいはパーセントの表にカウント数を追加する。パーセントの後にカウント数を括弧内に表示する場合は <code>position =</code> “rear” （後ろの意味）、カウント数の後にパーセントを括弧内に表示する場合は<code>position =</code> “front”（前の意味）とそれぞれ位置を指定する。</td>
</tr>
<tr class="even">
<td><code>adorn_title()</code></td>
<td>引数 <code>row_name =</code> および/または <code>col_name =</code>で文字列を追加する。</td>
</tr>
</tbody>
</table></div>
<p>上記の関数を利用する場合には、その順序を意識してください。以下に例を示します。</p>
<p>デフォルトの割合の代わりにパーセントを使用したシンプルな一元表（one-way table）です。</p>
<div class="sourceCode" id="cb844"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>               <span class="co"># 症例ラインリスト</span></span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>       <span class="co"># 年齢カテゴリごとにカウント数と割合の表を作成</span></span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span><span class="op">)</span>   <span class="co"># 割合をパーセントに変換</span></span></code></pre></div>
<pre><code>##  age_cat    n percent valid_percent
##      0-4 1095   18.6%         18.9%
##      5-9 1095   18.6%         18.9%
##    10-14  941   16.0%         16.2%
##    15-19  743   12.6%         12.8%
##    20-29 1073   18.2%         18.5%
##    30-49  754   12.8%         13.0%
##    50-69   95    1.6%          1.6%
##      70+    6    0.1%          0.1%
##     &lt;NA&gt;   86    1.5%             -</code></pre>
<p>行合計と行パーセントのクロス集計表です。</p>
<div class="sourceCode" id="cb846"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                  </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  <span class="co"># 年齢と性別のカウント数</span></span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>             <span class="co"># 行合計を追加</span></span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span>denominator <span class="op">=</span> <span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># カウント数を割合に変換</span></span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>            <span class="co"># 割合をパーセントに変換</span></span></code></pre></div>
<pre><code>##  age_cat     f     m    NA_
##      0-4 58.4% 38.0%   3.6%
##      5-9 58.5% 37.6%   3.8%
##    10-14 55.0% 40.7%   4.3%
##    15-19 48.3% 49.0%   2.7%
##    20-29 43.6% 53.6%   2.8%
##    30-49 23.7% 73.9%   2.4%
##    50-69  2.1% 95.8%   2.1%
##      70+  0.0% 83.3%  16.7%
##     &lt;NA&gt;  0.0%  0.0% 100.0%
##    Total 47.7% 47.6%   4.7%</code></pre>
<p>カウント数とパーセントの両方が表示されるように調整したクロス集計表です。</p>
<div class="sourceCode" id="cb848"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                  <span class="co"># 症例ラインリスト</span></span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  <span class="co"># カウント数についてのクロス集計</span></span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>             <span class="co"># 行合計を追加</span></span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span>denominator <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># 割合に変換</span></span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  <span class="co"># パーセントに変換</span></span>
<span>  <span class="fu">adorn_ns</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"front"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>            <span class="co"># "count (percent)"となるように表示を変更</span></span>
<span>  <span class="fu">adorn_title</span><span class="op">(</span>                                <span class="co"># タイトルを調整</span></span>
<span>    row_name <span class="op">=</span> <span class="st">"Age Category"</span>,</span>
<span>    col_name <span class="op">=</span> <span class="st">"Gender"</span><span class="op">)</span></span></code></pre></div>
<pre><code>##                       Gender                            
##  Age Category              f              m          NA_
##           0-4   640  (22.8%)   416  (14.8%)  39  (14.0%)
##           5-9   641  (22.8%)   412  (14.7%)  42  (15.1%)
##         10-14   518  (18.5%)   383  (13.7%)  40  (14.4%)
##         15-19   359  (12.8%)   364  (13.0%)  20   (7.2%)
##         20-29   468  (16.7%)   575  (20.5%)  30  (10.8%)
##         30-49   179   (6.4%)   557  (19.9%)  18   (6.5%)
##         50-69     2   (0.1%)    91   (3.2%)   2   (0.7%)
##           70+     0   (0.0%)     5   (0.2%)   1   (0.4%)
##          &lt;NA&gt;     0   (0.0%)     0   (0.0%)  86  (30.9%)
##         Total 2,807 (100.0%) 2,803 (100.0%) 278 (100.0%)</code></pre>
</div>
<div id="tabyl-の出力" class="section level3 unnumbered">
<h3>tabyl の出力<a class="anchor" aria-label="anchor" href="#tabyl-%E3%81%AE%E5%87%BA%E5%8A%9B"><i class="fas fa-link"></i></a>
</h3>
<p>デフォルトでは、tabyl は R のコンソールに生データを出力します。</p>
<p>ほかに、tabyl を <strong>flextable</strong> などのパッケージに渡して、RStudio ビューアで「きれいな」画像として出力し、.png、.jpeg、.html などの形式でエクスポートすることもできます。 これについては <a href="tables-presentation.html#tables-presentation">見やすい表の作り方</a> 章で説明しています。この方法で出力して <code>adorn_titles()</code> を使用する場合は、 <code>placement = "combined"</code> を指定する必要があることに注意してください。</p>
<div class="sourceCode" id="cb850"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span>denominator <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_ns</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"front"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_title</span><span class="op">(</span></span>
<span>    row_name <span class="op">=</span> <span class="st">"Age Category"</span>,</span>
<span>    col_name <span class="op">=</span> <span class="st">"Gender"</span>,</span>
<span>    placement <span class="op">=</span> <span class="st">"combined"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># 画像として出力するためにこれは必要</span></span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">flextable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>    <span class="co"># きれいな画像に変換</span></span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/autofit.html">autofit</a></span><span class="op">(</span><span class="op">)</span>          <span class="co"># 1行ごとにフォーマット</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-5b6fe08e{}.cl-5b693b80{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5b6be330{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5b6bf690{width:1.942in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf691{width:1.23in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf69a{width:1.133in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf69b{width:1.376in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf69c{width:1.942in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf6a4{width:1.23in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf6a5{width:1.133in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf6ae{width:1.376in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf6af{width:1.942in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf6b0{width:1.23in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf6b8{width:1.133in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5b6bf6b9{width:1.376in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<div class="inline-table"><table data-quarto-disable-processing="true" class="cl-5b6fe08e">
<thead><tr style="overflow-wrap:break-word;">
<th class="cl-5b6bf690"><p class="cl-5b6be330"><span class="cl-5b693b80">Age Category/Gender</span></p></th>
<th class="cl-5b6bf691"><p class="cl-5b6be330"><span class="cl-5b693b80">f</span></p></th>
<th class="cl-5b6bf691"><p class="cl-5b6be330"><span class="cl-5b693b80">m</span></p></th>
<th class="cl-5b6bf69a"><p class="cl-5b6be330"><span class="cl-5b693b80">NA_</span></p></th>
<th class="cl-5b6bf69b"><p class="cl-5b6be330"><span class="cl-5b693b80">Total</span></p></th>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-5b6bf69c"><p class="cl-5b6be330"><span class="cl-5b693b80">0-4</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">640 (22.8%)</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">416 (14.8%)</span></p></td>
<td class="cl-5b6bf6a5"><p class="cl-5b6be330"><span class="cl-5b693b80">39 (14.0%)</span></p></td>
<td class="cl-5b6bf6ae"><p class="cl-5b6be330"><span class="cl-5b693b80">1,095 (18.6%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5b6bf69c"><p class="cl-5b6be330"><span class="cl-5b693b80">5-9</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">641 (22.8%)</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">412 (14.7%)</span></p></td>
<td class="cl-5b6bf6a5"><p class="cl-5b6be330"><span class="cl-5b693b80">42 (15.1%)</span></p></td>
<td class="cl-5b6bf6ae"><p class="cl-5b6be330"><span class="cl-5b693b80">1,095 (18.6%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5b6bf69c"><p class="cl-5b6be330"><span class="cl-5b693b80">10-14</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">518 (18.5%)</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">383 (13.7%)</span></p></td>
<td class="cl-5b6bf6a5"><p class="cl-5b6be330"><span class="cl-5b693b80">40 (14.4%)</span></p></td>
<td class="cl-5b6bf6ae"><p class="cl-5b6be330"><span class="cl-5b693b80">941 (16.0%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5b6bf69c"><p class="cl-5b6be330"><span class="cl-5b693b80">15-19</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">359 (12.8%)</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">364 (13.0%)</span></p></td>
<td class="cl-5b6bf6a5"><p class="cl-5b6be330"><span class="cl-5b693b80">20  (7.2%)</span></p></td>
<td class="cl-5b6bf6ae"><p class="cl-5b6be330"><span class="cl-5b693b80">743 (12.6%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5b6bf69c"><p class="cl-5b6be330"><span class="cl-5b693b80">20-29</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">468 (16.7%)</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">575 (20.5%)</span></p></td>
<td class="cl-5b6bf6a5"><p class="cl-5b6be330"><span class="cl-5b693b80">30 (10.8%)</span></p></td>
<td class="cl-5b6bf6ae"><p class="cl-5b6be330"><span class="cl-5b693b80">1,073 (18.2%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5b6bf69c"><p class="cl-5b6be330"><span class="cl-5b693b80">30-49</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">179  (6.4%)</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">557 (19.9%)</span></p></td>
<td class="cl-5b6bf6a5"><p class="cl-5b6be330"><span class="cl-5b693b80">18  (6.5%)</span></p></td>
<td class="cl-5b6bf6ae"><p class="cl-5b6be330"><span class="cl-5b693b80">754 (12.8%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5b6bf69c"><p class="cl-5b6be330"><span class="cl-5b693b80">50-69</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">2  (0.1%)</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">91  (3.2%)</span></p></td>
<td class="cl-5b6bf6a5"><p class="cl-5b6be330"><span class="cl-5b693b80">2  (0.7%)</span></p></td>
<td class="cl-5b6bf6ae"><p class="cl-5b6be330"><span class="cl-5b693b80">95  (1.6%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5b6bf69c"><p class="cl-5b6be330"><span class="cl-5b693b80">70+</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">0  (0.0%)</span></p></td>
<td class="cl-5b6bf6a4"><p class="cl-5b6be330"><span class="cl-5b693b80">5  (0.2%)</span></p></td>
<td class="cl-5b6bf6a5"><p class="cl-5b6be330"><span class="cl-5b693b80">1  (0.4%)</span></p></td>
<td class="cl-5b6bf6ae"><p class="cl-5b6be330"><span class="cl-5b693b80">6  (0.1%)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5b6bf6af"><p class="cl-5b6be330"><span class="cl-5b693b80"></span></p></td>
<td class="cl-5b6bf6b0"><p class="cl-5b6be330"><span class="cl-5b693b80">0  (0.0%)</span></p></td>
<td class="cl-5b6bf6b0"><p class="cl-5b6be330"><span class="cl-5b693b80">0  (0.0%)</span></p></td>
<td class="cl-5b6bf6b8"><p class="cl-5b6be330"><span class="cl-5b693b80">86 (30.9%)</span></p></td>
<td class="cl-5b6bf6b9"><p class="cl-5b6be330"><span class="cl-5b693b80">86  (1.5%)</span></p></td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="他の表での使用" class="section level3 unnumbered">
<h3>他の表での使用<a class="anchor" aria-label="anchor" href="#%E4%BB%96%E3%81%AE%E8%A1%A8%E3%81%A7%E3%81%AE%E4%BD%BF%E7%94%A8"><i class="fas fa-link"></i></a>
</h3>
<p><strong>janitor</strong> パッケージの <code>adorn_*()</code> は、 <strong>dplyr</strong> パッケージの <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> や count()、 <strong>base</strong> R の <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> で作成した表など、他の表でも使用できます。必要な janitor パッケージの関数を表をパイプ関数に渡すだけです。例えば、以下のようになります。</p>
<div class="sourceCode" id="cb851"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># dplyrパッケージの関数</span></span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span><span class="op">)</span>        <span class="co"># janitorパッケージの関数</span></span></code></pre></div>
<pre><code>##                              hospital    n
##                      Central Hospital  454
##                     Military Hospital  896
##                               Missing 1469
##                                 Other  885
##                         Port Hospital 1762
##  St. Mark's Maternity Hospital (SMMH)  422
##                                 Total 5888</code></pre>
</div>
<div id="tabyl-の保存" class="section level3 unnumbered">
<h3>tabyl の保存<a class="anchor" aria-label="anchor" href="#tabyl-%E3%81%AE%E4%BF%9D%E5%AD%98"><i class="fas fa-link"></i></a>
</h3>
<p><strong>flextable</strong>のようなパッケージを使って表を「きれいな」画像に変換すると、そのパッケージの関数、例えば save_as_html(), save_as_word(), save_as_ppt(), およびsave_as_image() を使って表を保存できます (詳しくは <a href="tables-presentation.html#tables-presentation">見やすい表の作り方</a> の章で説明します)。以下では、表を Word 文書として保存し、さらに手作業で編集できるようにします。</p>
<div class="sourceCode" id="cb853"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span>denominator <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_ns</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"front"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_title</span><span class="op">(</span></span>
<span>    row_name <span class="op">=</span> <span class="st">"Age Category"</span>,</span>
<span>    col_name <span class="op">=</span> <span class="st">"Gender"</span>,</span>
<span>    placement <span class="op">=</span> <span class="st">"combined"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">flextable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                     <span class="co"># 画像に変換</span></span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/autofit.html">autofit</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                       <span class="co"># 1行のみであることを確認</span></span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/save_as_docx.html">save_as_docx</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"tabyl.docx"</span><span class="op">)</span>   <span class="co"># ファイルパスでWordドキュメントとして保存</span></span></code></pre></div>
<div class="inline-figure"><img src="images/tabyl_word.png" width="50%" style="display: block; margin: auto;"></div>
</div>
<div id="janitor_age_out_stats" class="section level3 unnumbered">
<h3>統計量<a class="anchor" aria-label="anchor" href="#janitor_age_out_stats"><i class="fas fa-link"></i></a>
</h3>
<p><strong>stats</strong>パッケージの <code><a href="https://rdrr.io/r/stats/chisq.test.html">chisq.test()</a></code> や <code><a href="https://rdrr.io/r/stats/fisher.test.html">fisher.test()</a></code> のように、以下のように tabyls に統計的検定を用いることができます。欠測値は許容されないため、<code>show_na = FALSE</code> で tabyl から除外されることに注意してください。</p>
<div class="sourceCode" id="cb854"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_by_outcome</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">outcome</span>, show_na <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/chisq.test.html">chisq.test</a></span><span class="op">(</span><span class="va">age_by_outcome</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 
##  Pearson's Chi-squared test
## 
## data:  age_by_outcome
## X-squared = 6.4931, df = 7, p-value = 0.4835</code></pre>
<p>統計に関する詳しいコードやヒントは <a href="stat-tests.html#stat-tests">簡単な統計的検定</a> の章をご覧ください。</p>
</div>
<div id="その他のヒント" class="section level3 unnumbered">
<h3>その他のヒント<a class="anchor" aria-label="anchor" href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E3%83%92%E3%83%B3%E3%83%88"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>上記の計算から欠測値を除外するには、引数 <code>na.rm = TRUE</code> を指定します。</li>
<li>
<code>tabyl()</code> で作成されていない表に <code>adorn_*()</code> ヘルパー関数を用いる場合、 <code>adorn_percentage(,,,c(cases,deaths))</code> のように、特定の列を指定することができます（4 番目の指定していなかった引数にそれらを指定します）。この構文は単純ではありません。代わりに <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> の使用を検討してください。</li>
<li>詳しくは <a href="https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html">janitor ページ</a> and this <a href="https://cran.r-project.org/web/packages/janitor/vignettes/tabyls.html">tabyl ヴィネット</a>をご一読ください.</li>
</ul>
</div>
</div>
<div id="dplyr-パッケージ" class="section level2" number="17.4">
<h2>
<span class="header-section-number">17.4</span> <strong>dplyr</strong> パッケージ<a class="anchor" aria-label="anchor" href="#dplyr-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8"><i class="fas fa-link"></i></a>
</h2>
<p><strong>dplyr</strong> パッケージは、 <strong>tidyverse</strong> パッケージの一部であり、とても一般的なデータ管理ツールです。<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> や <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> といった <strong>dplyr</strong> パッケージの関数による表作成は、要約統計量の計算、<u>グループ</u> ごとの要約、 または <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> への表出力をする際に便利な方法です。</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> は、<u>新しい要約データフレーム</u> を作成します。データが <u>グループ化されていない</u> 場合は、データフレーム全体に対して指定された要約統計量を 1 行のデータフレームとして作成します。データがグループ化されている場合は、新しいデータフレームはグループごとに 1 行が作成されます（ <a href="grouping.html#grouping">データのグループ化</a> の章を参照）。</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> の括弧の中に、それぞれの新しい要約列の名前、等号、適用する統計関数を記入します。</p>
<p><span style="color: darkgreen;"><strong><em>ヒント:</em></strong> summarise 関数は、UK と US の両方のスペルで動作します（<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> および <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code>）。</span></p>
<div id="カウント数の取得" class="section level3 unnumbered">
<h3>カウント数の取得<a class="anchor" aria-label="anchor" href="#%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E6%95%B0%E3%81%AE%E5%8F%96%E5%BE%97"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> 内で適用する最もシンプルな関数は <code><a href="https://dplyr.tidyverse.org/reference/context.html">n()</a></code> です。括弧を空にすると、行数がカウントされます。</p>
<div class="sourceCode" id="cb856"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                 <span class="co"># linelistで開始</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n_rows <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>    <span class="co"># n_rows列の新しい要約データフレームを取得</span></span></code></pre></div>
<pre><code>##   n_rows
## 1   5888</code></pre>
<p>あらかじめデータをグループ化しておくと、さらに面白いことができます。</p>
<div class="sourceCode" id="cb858"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>     <span class="co"># age_cat列のユニークな値でデータをグループ化</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n_rows <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>   <span class="co"># *グループごと* に行数を返す</span></span></code></pre></div>
<pre><code>## # A tibble: 9 × 2
##   age_cat n_rows
##   &lt;fct&gt;    &lt;int&gt;
## 1 0-4       1095
## 2 5-9       1095
## 3 10-14      941
## 4 15-19      743
## 5 20-29     1073
## 6 30-49      754
## 7 50-69       95
## 8 70+          6
## 9 &lt;NA&gt;        86</code></pre>
<p>上記のコマンドは、代わりに <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> を使うと短縮できます。<code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> は次のような処理を行います。:</p>
<ol style="list-style-type: decimal">
<li>与えられた列によってデータをグループ化する</li>
<li>それらを <code><a href="https://dplyr.tidyverse.org/reference/context.html">n()</a></code> でまとめる（ <code>n</code>列を作る）</li>
<li>データのグループ化解除</li>
</ol>
<div class="sourceCode" id="cb860"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   age_cat    n
## 1     0-4 1095
## 2     5-9 1095
## 3   10-14  941
## 4   15-19  743
## 5   20-29 1073
## 6   30-49  754
## 7   50-69   95
## 8     70+    6
## 9    &lt;NA&gt;   86</code></pre>
<p><code>name =</code>に指定すると、カウントする列の名前をデフォルトの <code>n</code> から別の名前に変更できます。</p>
<p>2 つ以上のグループ化された列のカウント数を集計する場合も、カウント数を n 列に入れた「縦」形式で返されます。「縦」および「横」データ形式については、 <a href="pivoting.html#pivoting">データの縦横変換</a> の章を参照してください。</p>
<div class="sourceCode" id="cb862"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">outcome</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    age_cat outcome   n
## 1      0-4   Death 471
## 2      0-4 Recover 364
## 3      0-4    &lt;NA&gt; 260
## 4      5-9   Death 476
## 5      5-9 Recover 391
## 6      5-9    &lt;NA&gt; 228
## 7    10-14   Death 438
## 8    10-14 Recover 303
## 9    10-14    &lt;NA&gt; 200
## 10   15-19   Death 323
## 11   15-19 Recover 251
## 12   15-19    &lt;NA&gt; 169
## 13   20-29   Death 477
## 14   20-29 Recover 367
## 15   20-29    &lt;NA&gt; 229
## 16   30-49   Death 329
## 17   30-49 Recover 238
## 18   30-49    &lt;NA&gt; 187
## 19   50-69   Death  33
## 20   50-69 Recover  38
## 21   50-69    &lt;NA&gt;  24
## 22     70+   Death   3
## 23     70+ Recover   3
## 24    &lt;NA&gt;   Death  32
## 25    &lt;NA&gt; Recover  28
## 26    &lt;NA&gt;    &lt;NA&gt;  26</code></pre>
</div>
<div id="すべてのレベルを表示" class="section level3 unnumbered">
<h3>すべてのレベルを表示<a class="anchor" aria-label="anchor" href="#%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%AC%E3%83%99%E3%83%AB%E3%82%92%E8%A1%A8%E7%A4%BA"><i class="fas fa-link"></i></a>
</h3>
<p><u>因子</u> 型の列を表にする場合、 <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> または <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> コマンドに <code>.drop = FALSE</code> を追加して指定することで、データ内の値を持つレベルだけでなく、<em>すべて</em> のレベルが表示されるようにすることができます。</p>
<p>この手法は、表やグラフを標準化するのに有効です。例えば、複数のサブグループのために数値を作成している場合や、ルーチンレポートのために数値を繰り返し作成している場合などです。これらの状況のいずれにおいても、データ内の値の存在は変動する可能性がありますが、一定に保たれるレベルを定義できます。</p>
<p>詳しくは <a href="factors.html#factors">因子（ファクタ）型データ</a> の章をご覧ください。</p>
</div>
<div id="tbl_dplyr_prop" class="section level3 unnumbered">
<h3>割合<a class="anchor" aria-label="anchor" href="#tbl_dplyr_prop"><i class="fas fa-link"></i></a>
</h3>
<p>割合を追加するには、表を <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> にパイプ演算子に渡して新しい列を作成します。新しい列は、カウントする列（デフォルトでは<code>n</code> ）をカウントする列の <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> で割ったものとして定義します（割合が計算されます）。</p>
<p>この場合、 <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> 中の<code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> コマンドは、割合の分母として使用しているために、列全体の <code>n</code> を合計していることに注意してください。<a href="grouping.html#group_summarise">データのグループ化 の章</a>で説明したように、**もし* <em>グループ化された</em> データの中で <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> が使われた場合（例えば <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> の直後に <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> コマンドが使われた場合）は、<em>グループごと</em>の合計が得られます。先に述べたように、 <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> は <em>グループ化を解除する</em> と結果は変わります。つまり、その場合は、すべての列に対する割合が計算されます。</p>
<p>パーセント（%）を表示させるには、<strong>scales</strong> パッケージの <code>percent()</code> で割合（注：(n / sum (n)のこと）を囲むことで簡単に行えます（文字列型へ変換することに注意してください）。</p>
<div class="sourceCode" id="cb864"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_summary</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                     <span class="co"># 性別によるグループ化とカウント（"n"列を生成）</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>                                <span class="co"># 列のパーセントの作成 - 分母に注意</span></span>
<span>    percent <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># 出力</span></span>
<span><span class="va">age_summary</span></span></code></pre></div>
<pre><code>##   age_cat    n percent
## 1     0-4 1095  18.60%
## 2     5-9 1095  18.60%
## 3   10-14  941  15.98%
## 4   15-19  743  12.62%
## 5   20-29 1073  18.22%
## 6   30-49  754  12.81%
## 7   50-69   95   1.61%
## 8     70+    6   0.10%
## 9    &lt;NA&gt;   86   1.46%</code></pre>
<p>以下は、<em>グループ内</em>の割合を計算する方法です。異なるレベルのデータのグループ化を適用したり削除したりを順番に行っていきます。まず、データは <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> で <code>outcome</code> を指定することでグループ化されます。次に、<code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> を適用します。この関数は、データを<code>age_cat</code> でさらにグループ化し、各結果と <code>outcome</code>-<code>age-cat</code> の組み合わせのカウント数を取得します。重要なことは、<code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> は処理を終えると同時に、<code>age_cat</code> によるグループ化を解除するので、残ったデータのグループ化は元の結果によるグループ化のみになるということです。つまり、割合を計算する最後のステップ（分母 <code>sum(n)</code>）では <code>outcome</code>によってグループ化されたままということになります。</p>
<div class="sourceCode" id="cb866"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_by_outcome</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  <span class="co"># linelistから開始</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                         <span class="co"># 転帰でグループ化</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                            <span class="co"># age_catでグループ化してカウント後、age_catのグループ化を解除</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># パーセントの算出 - 分母が結果グループごとであることに注意</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-84987780399d502f91e2" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-84987780399d502f91e2">{"x":{"filter":"none","vertical":false,"data":[["Death","Death","Death","Death","Death","Death","Death","Death","Death","Recover","Recover","Recover","Recover","Recover","Recover","Recover","Recover","Recover",null,null,null,null,null,null,null,null],["0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+",null,"0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+",null,"0-4","5-9","10-14","15-19","20-29","30-49","50-69",null],[471,476,438,323,477,329,33,3,32,364,391,303,251,367,238,38,3,28,260,228,200,169,229,187,24,26],["18.242%","18.435%","16.964%","12.510%","18.474%","12.742%","1.278%","0.116%","1.239%","18.36%","19.72%","15.28%","12.66%","18.51%","12.00%","1.92%","0.15%","1.41%","19.652%","17.234%","15.117%","12.774%","17.309%","14.135%","1.814%","1.965%"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>outcome<\/th>\n      <th>age_cat<\/th>\n      <th>n<\/th>\n      <th>percent<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2},{"name":"outcome","targets":0},{"name":"age_cat","targets":1},{"name":"n","targets":2},{"name":"percent","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="プロット" class="section level3 unnumbered">
<h3>プロット<a class="anchor" aria-label="anchor" href="#%E3%83%97%E3%83%AD%E3%83%83%E3%83%88"><i class="fas fa-link"></i></a>
</h3>
<p>上記のような「縦」の表出力を <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> で表示するのは、比較的簡単です。データは当然 「縦」持ち形式であり、<code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> はそれを受け入れることができます。<a href="ggplot-basics">ggplot の基礎</a> と <a href="ggplot-tips.html#ggplot-tips">ggplot のヒント</a> の章でさらに例をご覧ください。</p>
<div class="sourceCode" id="cb867"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                      <span class="co"># linelistから開始</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>     <span class="co"># グループ化して2列で集計</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                       <span class="co"># ggplotに新しいデータフレームを渡す</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>                     <span class="co"># 棒グラフの作成</span></span>
<span>      mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>   </span>
<span>        x <span class="op">=</span> <span class="va">outcome</span>,              <span class="co"># X軸にoutcomeをマッピング</span></span>
<span>        fill <span class="op">=</span> <span class="va">age_cat</span>,           <span class="co"># fill に age_catをマッピング（age_catで色分け）</span></span>
<span>        y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span>                   <span class="co"># カウント列"n"を高さにマッピング</span></span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-676-1.png" width="672"></div>
</div>
<div id="要約統計量-1" class="section level3 unnumbered">
<h3>要約統計量<a class="anchor" aria-label="anchor" href="#%E8%A6%81%E7%B4%84%E7%B5%B1%E8%A8%88%E9%87%8F-1"><i class="fas fa-link"></i></a>
</h3>
<p><strong>dplyr</strong> パッケージの <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> の大きな利点は、 <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code>、<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>、<code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>、<code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>、<code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code>（標準偏差）、パーセンタイルなどのより高度な要約統計量を取得できることです。また、 <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> を使って、特定の論理的条件を満たす行の数を取得することもできます。上記のように、データフレームセット全体、またはグループごとにこうした出力を行うことができます。</p>
<p>構文は同じで、 <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> の括弧の中に、新しい各要約列の名前、等号、適用する統計関数を指定します。統計関数の中では、操作する列と関連する引数を指定します（例：殆ど数学関数では <code>na.rm = TRUE</code> ）。</p>
<p>また、<code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> を使って、論理的な基準を満たす行の数を取得することができます。() 内の式が <code>TRUE</code> と評価された場合にカウントされます。例えば、以下のようになります:</p>
<ul>
<li>
<code>sum(age_years &lt; 18, na.rm=T)</code><br>
</li>
<li>
<code>sum(gender == "male", na.rm=T)</code><br>
</li>
<li><code>sum(response %in% c("Likely", "Very Likely"))</code></li>
</ul>
<p>以下では、<code>linelist</code> データを症状発現から入院までの遅延日数（ <code>days_onset_hosp</code> 列）を病院別にまとめています。</p>
<div class="sourceCode" id="cb868"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary_table</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                        <span class="co"># linelist から開始し、新規オブジェクトとして保存</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                             <span class="co"># すべての計算を病院ごとにまとめる</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>                                                         <span class="co"># 以下の列の要約を取得</span></span>
<span>    cases       <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,                                                <span class="co"># グループごとの行数</span></span>
<span>    delay_max   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">days_onset_hosp</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,                    <span class="co"># 最大の遅延日数</span></span>
<span>    delay_mean  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">days_onset_hosp</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,  <span class="co"># 平均の遅延日数（丸める）</span></span>
<span>    delay_sd    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">days_onset_hosp</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,  <span class="co"># 遅延日数の標準偏差（丸める）</span></span>
<span>    delay_3     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">days_onset_hosp</span> <span class="op">&gt;=</span> <span class="fl">3</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,               <span class="co"># 3日以上の遅延日数の行数</span></span>
<span>    pct_delay_3 <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">delay_3</span> <span class="op">/</span> <span class="va">cases</span><span class="op">)</span>                    <span class="co"># 3日以上の遅延日数の行数列をパーセントに変換 </span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">summary_table</span>  <span class="co"># 出力</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 7
##   hospital               cases delay_max delay_mean delay_sd delay_3 pct_delay_3
##   &lt;chr&gt;                  &lt;int&gt;     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;   &lt;int&gt; &lt;chr&gt;      
## 1 Central Hospital         454        12        1.9      1.9     108 24%        
## 2 Military Hospital        896        15        2.1      2.4     253 28%        
## 3 Missing                 1469        22        2.1      2.3     399 27%        
## 4 Other                    885        18        2        2.2     234 26%        
## 5 Port Hospital           1762        16        2.1      2.2     470 27%        
## 6 St. Mark's Maternity …   422        18        2.1      2.3     116 27%</code></pre>
<p>ヒント:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> をロジカル型と共に利用することで、特定の条件 (<code>==</code>)を満たす行を「数える」ことができます。</li>
<li>
<code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>のような数学関数では、 <code>na.rm = TRUE</code> を使用することに注意してください。そうしない場合、欠測値がある場合に <code>NA</code> が返されます。</li>
<li>
<strong>scales</strong> パッケージの関数 <code>percent()</code> を使って、簡単にパーセントに変換することができます。
<ul>
<li>小数点以下1桁を表示するには <code>accuracy =</code> 0.1、また 2桁を表示するには <code>accuracy =</code> 0.01と、それぞれ指定します。</li>
</ul>
</li>
<li>
<strong>base</strong> R の <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> を使用して小数点以下を指定します。</li>
<li>これらの統計量をデータセット全体で計算するには、 <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> を使用せずに <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> を使用します。</li>
<li>後で計算するための列（分母など）を作成し、最終的に <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> でデータフレームから削除することもできます。</li>
</ul>
</div>
<div id="条件付き統計量" class="section level3 unnumbered">
<h3>条件付き統計量<a class="anchor" aria-label="anchor" href="#%E6%9D%A1%E4%BB%B6%E4%BB%98%E3%81%8D%E7%B5%B1%E8%A8%88%E9%87%8F"><i class="fas fa-link"></i></a>
</h3>
<p>特定の条件を満たす行の最大値など、<u>条件付き統計量</u> を取得したい場合がありますこれは、括弧 <code>[ ]</code>で列をサブセットすることで実現できます。以下 の例では、発熱があると分類された患者と発熱がないと分類された患者の最高体温を取得します。ただし、(<a href="tables-descriptive.html#tbls_pivot_wider">下記に示す</a>ように) <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> コマンドや <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a></code> に別の列を追加する方が適切な場合もあるので注意してください。</p>
<div class="sourceCode" id="cb870"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    max_temp_fvr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">temp</span><span class="op">[</span><span class="va">fever</span> <span class="op">==</span> <span class="st">"yes"</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>    max_temp_no <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">temp</span><span class="op">[</span><span class="va">fever</span> <span class="op">==</span> <span class="st">"no"</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   hospital                             max_temp_fvr max_temp_no
##   &lt;chr&gt;                                       &lt;dbl&gt;       &lt;dbl&gt;
## 1 Central Hospital                             40.4        38  
## 2 Military Hospital                            40.5        38  
## 3 Missing                                      40.6        38  
## 4 Other                                        40.8        37.9
## 5 Port Hospital                                40.6        38  
## 6 St. Mark's Maternity Hospital (SMMH)         40.6        37.9</code></pre>
</div>
<div id="のりづけ-glueing" class="section level3 unnumbered">
<h3>のりづけ (Glueing)<a class="anchor" aria-label="anchor" href="#%E3%81%AE%E3%82%8A%E3%81%A5%E3%81%91-glueing"><i class="fas fa-link"></i></a>
</h3>
<p><strong>stringr</strong> の関数 <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> は、複数の列の値を 1 つの新しい列にまとめるのに便利です。この文脈では、一般的に <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> コマンドの <u>後</u> に使用します。</p>
<p><a href="characters-strings.html#characters-strings">文字型・文字列型データ</a> の章では、 <code><a href="https://tidyr.tidyverse.org/reference/unite.html">unite()</a></code> や <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> など、列を結合するためのさまざまなオプションについて説明しています。この使用例では、 <code><a href="https://tidyr.tidyverse.org/reference/unite.html">unite()</a></code> よりも柔軟性があり、<code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> よりもシンプルな構文である <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> を提唱します。</p>
<p>以下では、上で作成した <code>summary_table</code> データフレームを <code>delay_mean</code> 列と<code>delay_sd</code> 列が組み合わされるように変更し、新しい列に括弧の整形を追加し、それぞれの古い列を削除しています。</p>
<p>そして、表の見栄えをよりよくするために、 <strong>janitor</strong> パッケージの <code>adorn_totals()</code> を使って合計行を追加します（これは数字以外の列を無視します）。最後に、 <strong>dplyr</strong> パッケージの <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> を使用して、列の並び替え、より適切な列名に名前を変更します。</p>
<p>これで、 <strong>flextable</strong> パッケージに渡して、表を word、.png、.jpeg、.html、Powerpoint、RMarkdown などに印刷することができるようになりました！( <a href="tables-presentation.html#tables-presentation">見やすい表の作り方</a> の章を参照）。</p>
<div class="sourceCode" id="cb872"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary_table</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>delay <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"{delay_mean} ({delay_sd})"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># 他の値を組み合わせてフォーマット</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">delay_mean</span>, <span class="va">delay_sd</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                       <span class="co"># 古い2列を削除   </span></span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                            <span class="co"># 合計列を追加</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>                                                    <span class="co"># 列の順番と名称を指定</span></span>
<span>    <span class="st">"Hospital Name"</span>   <span class="op">=</span> <span class="va">hospital</span>,</span>
<span>    <span class="st">"Cases"</span>           <span class="op">=</span> <span class="va">cases</span>,</span>
<span>    <span class="st">"Max delay"</span>       <span class="op">=</span> <span class="va">delay_max</span>,</span>
<span>    <span class="st">"Mean (sd)"</span>       <span class="op">=</span> <span class="va">delay</span>,</span>
<span>    <span class="st">"Delay 3+ days"</span>   <span class="op">=</span> <span class="va">delay_3</span>,</span>
<span>    <span class="st">"% delay 3+ days"</span> <span class="op">=</span> <span class="va">pct_delay_3</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<pre><code>##                         Hospital Name Cases Max delay Mean (sd) Delay 3+ days
##                      Central Hospital   454        12 1.9 (1.9)           108
##                     Military Hospital   896        15 2.1 (2.4)           253
##                               Missing  1469        22 2.1 (2.3)           399
##                                 Other   885        18   2 (2.2)           234
##                         Port Hospital  1762        16 2.1 (2.2)           470
##  St. Mark's Maternity Hospital (SMMH)   422        18 2.1 (2.3)           116
##                                 Total  5888       101         -          1580
##  % delay 3+ days
##              24%
##              28%
##              27%
##              26%
##              27%
##              27%
##                -</code></pre>
<div id="パーセンタイル" class="section level4 unnumbered">
<h4>パーセンタイル<a class="anchor" aria-label="anchor" href="#%E3%83%91%E3%83%BC%E3%82%BB%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%AB"><i class="fas fa-link"></i></a>
</h4>
<p><strong>dplyr</strong> パッケージの <u>パーセンタイル</u>と分位数は特筆に値します。分布を取得するには、デフォルトで <code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code> を使用するか、 <code>probs =</code>で必要な値を指定します。</p>
<div class="sourceCode" id="cb874"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 年齢のデフォルトパーセンタイル値の取得 (0%, 25%, 50%, 75%, 100%)</span></span>
<span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>age_percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
## dplyr 1.1.0.
## ℹ Please use `reframe()` instead.
## ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
##   always returns an ungrouped data frame and adjust accordingly.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
## generated.</code></pre>
<pre><code>##   age_percentiles
## 1               0
## 2               6
## 3              13
## 4              23
## 5              84</code></pre>
<div class="sourceCode" id="cb877"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 手動で指定した年齢のパーセンタイル値を取得 (5%, 50%, 75%, 98%)</span></span>
<span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    age_percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span></span>
<span>      <span class="va">age_years</span>,</span>
<span>      probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.05</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">0.98</span><span class="op">)</span>, </span>
<span>      na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
## dplyr 1.1.0.
## ℹ Please use `reframe()` instead.
## ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
##   always returns an ungrouped data frame and adjust accordingly.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
## generated.</code></pre>
<pre><code>##   age_percentiles
## 1               1
## 2              13
## 3              23
## 4              48</code></pre>
<p><u>グループごと</u>に数量を取得したい場合、 <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> に単純に別の列を追加すると、長くてあまり役に立たない出力になる可能性があります。そこで、代わりに「必要な分位数レベルごとに列を作成する
方法を試してみてください。</p>
<div class="sourceCode" id="cb880"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 手動で指定した年齢のパーセンタイル値を取得 (5%, 50%, 75%, 98%)</span></span>
<span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    p05 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, probs <span class="op">=</span> <span class="fl">0.05</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    p50 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, probs <span class="op">=</span> <span class="fl">0.5</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    p75 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, probs <span class="op">=</span> <span class="fl">0.75</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    p98 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, probs <span class="op">=</span> <span class="fl">0.98</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   hospital                               p05   p50   p75   p98
##   &lt;chr&gt;                                &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Central Hospital                         1    12    21  48  
## 2 Military Hospital                        1    13    24  45  
## 3 Missing                                  1    13    23  48.2
## 4 Other                                    1    13    23  50  
## 5 Port Hospital                            1    14    24  49  
## 6 St. Mark's Maternity Hospital (SMMH)     2    12    22  50.2</code></pre>
<p><strong>dplyr</strong> パッケージの <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> は確かにより細かい制御が可能ですが、必要なすべての要約統計量は <strong>rstatix</strong> パッケージの <code>get_summary_stat()</code> で生成できることに気づくかもしれません。グループ化されたデータに適用した場合、 0%、25%、50%、75%、100% の値を取得します。グループ化されていないデータに適用する場合は、<code>probs = c(.05, .5, .75, .98)</code>でパーセンタイルを指定できます。</p>
<div class="sourceCode" id="cb882"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">rstatix</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/rstatix/reference/get_summary_stats.html">get_summary_stats</a></span><span class="op">(</span><span class="va">age</span>, type <span class="op">=</span> <span class="st">"quantile"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 8
##   hospital                         variable     n  `0%` `25%` `50%` `75%` `100%`
##   &lt;chr&gt;                            &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 Central Hospital                 age        445     0     6    12    21     58
## 2 Military Hospital                age        884     0     6    14    24     72
## 3 Missing                          age       1441     0     6    13    23     76
## 4 Other                            age        873     0     6    13    23     69
## 5 Port Hospital                    age       1739     0     6    14    24     68
## 6 St. Mark's Maternity Hospital (… age        420     0     7    12    22     84</code></pre>
<div class="sourceCode" id="cb884"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">rstatix</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/rstatix/reference/get_summary_stats.html">get_summary_stats</a></span><span class="op">(</span><span class="va">age</span>, type <span class="op">=</span> <span class="st">"quantile"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 7
##   variable     n  `0%` `25%` `50%` `75%` `100%`
##   &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 age       5802     0     6    13    23     84</code></pre>
</div>
</div>
<div id="集計されたデータをまとめる" class="section level3 unnumbered">
<h3>集計されたデータをまとめる<a class="anchor" aria-label="anchor" href="#%E9%9B%86%E8%A8%88%E3%81%95%E3%82%8C%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B"><i class="fas fa-link"></i></a>
</h3>
<p><u>集計されたデータから始めた場合</u>、 <code><a href="https://dplyr.tidyverse.org/reference/context.html">n()</a></code> を使用すると、集計されたカウントの合計ではなく、<u>行</u> 数を取得します。合計を取得するには、データのカウント列に対して <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> を使用します。</p>
<p>例えば、下記の件数データフレーム <code>linelist_agg</code> を使用しているとしましょう。 これは、結果と性別ごとのケース数を「縦」持ち形式で表示しています。</p>
<p>以下では、結果および性別ごとの <code>linelist</code> 症例数のデータフレームの例を作成しています（わかりやすくするために欠測値は削除しています）。</p>
<div class="sourceCode" id="cb886"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_agg</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="va">gender</span><span class="op">)</span></span>
<span></span>
<span><span class="va">linelist_agg</span></span></code></pre></div>
<pre><code>##   outcome gender    n
## 1   Death      f 1227
## 2   Death      m 1228
## 3 Recover      f  953
## 4 Recover      m  950</code></pre>
<p>グループ別に（ <code>n</code>列の）カウントを合計するには、 <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> を使用しますが、新しい列を<code>sum(n, na.rm=T)</code>と設定します。合計処理に条件付きの要素を追加するには、カウント列にサブセットブラケット [ ] 構文を使用します。</p>
<div class="sourceCode" id="cb888"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_agg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    total_cases  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    male_cases   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">[</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"m"</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    female_cases <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">[</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"f"</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   outcome total_cases male_cases female_cases
##   &lt;chr&gt;         &lt;int&gt;      &lt;int&gt;        &lt;int&gt;
## 1 Death          2455       1228         1227
## 2 Recover        1903        950          953</code></pre>
</div>
<div id="across-複数の列" class="section level3 unnumbered">
<h3>
<code>across()</code> 複数の列<a class="anchor" aria-label="anchor" href="#across-%E8%A4%87%E6%95%B0%E3%81%AE%E5%88%97"><i class="fas fa-link"></i></a>
</h3>
<p>複数列に渡って<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> を使用するには <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> を使用します。こうすることで同じ統計量を多くの列で計算したい場合に便利になります。<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> の中に<code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> を置き、以下のように指定します。:</p>
<ul>
<li>
<code>.cols =</code> 列名のベクトル <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> または “tidyselect” ヘルパー関数(下記参照)</li>
<li>
<code>.fns =</code> 実行する関数（括弧なし） - <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> 内に複数を指定できます。</li>
</ul>
<p>以下では、<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> を複数の数値列に適用しています。列のベクトルは <code>.cols =</code>に明示的に命名され、ひとつの関数 <code>mean</code> は <code>.fns =</code>に（括弧なしで）指定されます。関数の追加の引数（例：<code>na.rm=TRUE</code>）は <code>.fns =</code>= の後にコンマで区切って指定されます。</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> を使用する際には、括弧やカンマの順序を正しく設定するのが難しい場合があります<code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> の中には、列、関数、そして関数に必要な追加の引数を含める必要があることを覚えておいてください。</p>
<div class="sourceCode" id="cb890"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">age_years</span>, <span class="va">temp</span>, <span class="va">wt_kg</span>, <span class="va">ht_cm</span><span class="op">)</span>,  <span class="co"># 列</span></span>
<span>                   .fns <span class="op">=</span> <span class="va">mean</span>,                               <span class="co"># 関数</span></span>
<span>                   na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span>                                  <span class="co"># その他の引数</span></span></code></pre></div>
<pre><code>## Warning: There was 1 warning in `summarise()`.
## ℹ In argument: `across(...)`.
## ℹ In group 1: `outcome = "Death"`.
## Caused by warning:
## ! The `...` argument of `across()` is deprecated as of dplyr 1.1.0.
## Supply arguments directly to `.fns` through an anonymous function instead.
## 
##   # Previously
##   across(a:b, mean, na.rm = TRUE)
## 
##   # Now
##   across(a:b, \(x) mean(x, na.rm = TRUE))</code></pre>
<pre><code>## # A tibble: 3 × 5
##   outcome age_years  temp wt_kg ht_cm
##   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Death        15.9  38.6  52.6  125.
## 2 Recover      16.1  38.6  52.5  125.
## 3 &lt;NA&gt;         16.2  38.6  53.0  125.</code></pre>
<p>複数の関数を一度に実行できます。以下では、関数 <code>mean</code> と <code>sd</code> が<code><a href="https://rdrr.io/r/base/list.html">list()</a></code> 内の <code>.fns =</code> に提供されています。新しい列名に付加される文字名（例：“mean” や “sd”）を指定することができます。</p>
<div class="sourceCode" id="cb893"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">age_years</span>, <span class="va">temp</span>, <span class="va">wt_kg</span>, <span class="va">ht_cm</span><span class="op">)</span>, <span class="co"># 列</span></span>
<span>                   .fns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"mean"</span> <span class="op">=</span> <span class="va">mean</span>, <span class="st">"sd"</span> <span class="op">=</span> <span class="va">sd</span><span class="op">)</span>,    <span class="co"># 複数の関数</span></span>
<span>                   na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span>                                 <span class="co"># 追加の引数</span></span></code></pre></div>
<pre><code>## # A tibble: 3 × 9
##   outcome age_years_mean age_years_sd temp_mean temp_sd wt_kg_mean wt_kg_sd
##   &lt;chr&gt;            &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
## 1 Death             15.9         12.3      38.6   0.962       52.6     18.4
## 2 Recover           16.1         13.0      38.6   0.997       52.5     18.6
## 3 &lt;NA&gt;              16.2         12.8      38.6   0.976       53.0     18.9
## # ℹ 2 more variables: ht_cm_mean &lt;dbl&gt;, ht_cm_sd &lt;dbl&gt;</code></pre>
<p>ここでは、列を選択するために <code>.cols =</code> に提供できるそれらの “tidyselect” ヘルパー関数です。:</p>
<ul>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/everything.html">everything()</a></code> - 記載されていない他のすべての列</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/everything.html">last_col()</a></code> - 最後の列</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/where.html">where()</a></code> - すべての列に関数を適用し、TRUE となるものを選択する</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code> - 指定された接頭辞にマッチします。例: <code>starts_with("date")</code>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code> - 指定された接尾辞にマッチします。例: <code>ends_with("_end")</code>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code> - 文字列を含む列を指定します。例: <code>contains("time")</code>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code> - 正規表現 （regex） を適用します。 例: <code>contains("[pt]al")</code>
</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">num_range()</a></code> -</li>
<li>
<code><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of()</a></code> - 列に名前がある場合にマッチします。名前が存在しない可能性がある場合に便利です。例: <code>any_of(date_onset, date_death, cardiac_arrest)</code>
</li>
</ul>
<p>例えば、すべての数値列の平均値を返すには、 <code><a href="https://tidyselect.r-lib.org/reference/where.html">where()</a></code> を使い、<code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code> という関数を（括弧を付けずに）指定します。これらはすべて <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> コマンドの中で行われます。</p>
<div class="sourceCode" id="cb895"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span></span>
<span>    .cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>,  <span class="co"># データフレーム内のすべての数値行</span></span>
<span>    .fns <span class="op">=</span> <span class="va">mean</span>,</span>
<span>    na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 3 × 12
##   outcome generation   age age_years   lon   lat wt_kg ht_cm ct_blood  temp
##   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1 Death         16.7  15.9      15.9 -13.2  8.47  52.6  125.     21.3  38.6
## 2 Recover       16.4  16.2      16.1 -13.2  8.47  52.5  125.     21.1  38.6
## 3 &lt;NA&gt;          16.5  16.3      16.2 -13.2  8.47  53.0  125.     21.2  38.6
## # ℹ 2 more variables: bmi &lt;dbl&gt;, days_onset_hosp &lt;dbl&gt;</code></pre>
</div>
<div id="tbls_pivot_wider" class="section level3 unnumbered">
<h3>横への変換<a class="anchor" aria-label="anchor" href="#tbls_pivot_wider"><i class="fas fa-link"></i></a>
</h3>
<p>表を「横」持ち形式にしたい場合は、 <strong>tidyr</strong> の <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a></code> を使って変換できます。<code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code> で列名を変更する必要があるでしょう。詳細については <a href="pivoting.html#pivoting">データの縦横変換</a> 章を参照してください。</p>
<p>以下の例では <a href="tables-descriptive.html#tbl_dplyr_prop">割合のセクション</a>から「縦」持ち表 <code>age_by_outcome</code> から始めます。わかりやすいように、もう一度作成して出力しましょう。:</p>
<div class="sourceCode" id="cb897"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_by_outcome</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  <span class="co"># linelistから開始</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                         <span class="co"># 転帰でグループ化 </span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                            <span class="co"># age_catでグループ化してカウント後、age_catのグループ化を解除</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># パーセントを計算 - 分母が転帰グループ別であることに注意</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-0dd3da88a8fcdfaefaa7" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0dd3da88a8fcdfaefaa7">{"x":{"filter":"none","vertical":false,"data":[["Death","Death","Death","Death","Death","Death","Death","Death","Death","Recover","Recover","Recover","Recover","Recover","Recover","Recover","Recover","Recover",null,null,null,null,null,null,null,null],["0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+",null,"0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+",null,"0-4","5-9","10-14","15-19","20-29","30-49","50-69",null],[471,476,438,323,477,329,33,3,32,364,391,303,251,367,238,38,3,28,260,228,200,169,229,187,24,26],["18.242%","18.435%","16.964%","12.510%","18.474%","12.742%","1.278%","0.116%","1.239%","18.36%","19.72%","15.28%","12.66%","18.51%","12.00%","1.92%","0.15%","1.41%","19.652%","17.234%","15.117%","12.774%","17.309%","14.135%","1.814%","1.965%"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>outcome<\/th>\n      <th>age_cat<\/th>\n      <th>n<\/th>\n      <th>percent<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2},{"name":"outcome","targets":0},{"name":"age_cat","targets":1},{"name":"n","targets":2},{"name":"percent","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>より広い範囲をピボット（縦横変換）するために、既存の列 <code>age_cat</code> の <u>値</u> から新しい列を作成します (<code>names_from = age_cat</code>と設定します)。また、新しいテーブルの値は既存の列 <code>n</code>から取得するように指定し、 <code>values_from = n</code>とします。ピボットコマンドで言及されていない列（<code>outcome</code>）は、左端にそのまま残ります。</p>
<div class="sourceCode" id="cb898"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_by_outcome</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">percent</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># 簡潔にするためにカウントのみを保持</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">age_cat</span>, values_from <span class="op">=</span> <span class="va">n</span><span class="op">)</span>  </span></code></pre></div>
<pre><code>## # A tibble: 3 × 10
## # Groups:   outcome [3]
##   outcome `0-4` `5-9` `10-14` `15-19` `20-29` `30-49` `50-69` `70+`  `NA`
##   &lt;chr&gt;   &lt;int&gt; &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1 Death     471   476     438     323     477     329      33     3    32
## 2 Recover   364   391     303     251     367     238      38     3    28
## 3 &lt;NA&gt;      260   228     200     169     229     187      24    NA    26</code></pre>
</div>
<div id="tbl_dplyr_totals" class="section level3 unnumbered">
<h3>行を合計する<a class="anchor" aria-label="anchor" href="#tbl_dplyr_totals"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> がグループ化されたデータを処理するとき、自動的に「合計」の統計値を生成するわけではありません。以下では、合計行を追加するための 2 つの方法を紹介します。:</p>
<div id="janitor-パッケージの-adorn_totals" class="section level4 unnumbered">
<h4>
<strong>janitor</strong> パッケージの <code>adorn_totals()</code><a class="anchor" aria-label="anchor" href="#janitor-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE-adorn_totals"><i class="fas fa-link"></i></a>
</h4>
<p>合計できる数や割合、パーセントだけで構成されている表の場合は、前のセクションで説明したように、<strong>janitor</strong> パッケージの <code>adorn_totals()</code> を使って <u>合計</u> 値を追加できます。この関数は数値列の合計しかできないことに注意してください。他の合計要約統計量を計算したい場合は、 <strong>dplyr</strong> パッケージを使った次の方法を参照してください。</p>
<p>以下では、 <code>linelist</code> を男女別に分類し、結果が判明している症例数、死亡者数、回復者数を記載した表にまとめています。この表を <code>adorn_totals()</code> にパイプ演算子で渡すと、各列の合計を反映した合計行が下部に追加されます。さらに <code>adorn_*()</code> でコードにあるように表示を調整しています。</p>
<div class="sourceCode" id="cb900"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    known_outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span><span class="op">)</span>,           <span class="co"># グループ内で結果の欠測がない行数</span></span>
<span>    n_death  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">==</span> <span class="st">"Death"</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,    <span class="co"># グループ内でoutocomeが"Death"の行数</span></span>
<span>    n_recover <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">==</span> <span class="st">"Recover"</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="co"># グループ内でoutocomeが"Recovered"の行数</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                <span class="co"># 合計行を加工 (各数値列の合計)</span></span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span><span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                      <span class="co"># 列で割合を取得</span></span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                        <span class="co"># 割合をパーセントに変換</span></span>
<span>  <span class="fu">adorn_ns</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"front"</span><span class="op">)</span>                      <span class="co"># %とカウントを表示（カウントを先に）</span></span></code></pre></div>
<pre><code>##  gender  known_outcome        n_death      n_recover
##       f 2,180  (47.8%) 1,227  (47.5%)   953  (48.1%)
##       m 2,178  (47.7%) 1,228  (47.6%)   950  (47.9%)
##    &lt;NA&gt;   207   (4.5%)   127   (4.9%)    80   (4.0%)
##   Total 4,565 (100.0%) 2,582 (100.0%) 1,983 (100.0%)</code></pre>
</div>
<div id="total-のデータに対してsummarise-を行い次に-bind_rows-を行う" class="section level4 unnumbered">
<h4>“total” のデータに対して<code>summarise()</code> を行い、次に <code>bind_rows()</code> を行う<a class="anchor" aria-label="anchor" href="#total-%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6summarise-%E3%82%92%E8%A1%8C%E3%81%84%E6%AC%A1%E3%81%AB-bind_rows-%E3%82%92%E8%A1%8C%E3%81%86"><i class="fas fa-link"></i></a>
</h4>
<p><code><a href="https://rdrr.io/r/stats/median.html">median()</a></code> や <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> などの要約統計量を含む表の場合、上記の <code>adorn_totals()</code> の方法では 十分では <u>ありません</u>。代わりに、データセット全体の要約統計を得るには、別の <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> コマンドで計算し、その結果を元のグループ化された要約表にバインドする必要があります。<a href="joining-matching.html#joining-matching">データの結合</a> の章で説明したように、 <strong>dplyr</strong> パッケージの <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows()</a></code> を使って結合を行うことができます。以下はその例です。:</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> と <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> を使って、次のように <u>病院ごと</u> の結果の要約表を作ることができます。:</p>
<div class="sourceCode" id="cb902"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">by_hospital</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">hospital</span> <span class="op">!=</span> <span class="st">"Missing"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># 転帰や病院が欠測している症例（case）を削除</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                      <span class="co"># データをグループ化</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>                                           <span class="co"># 関心のある指標の新しい要約列を作成</span></span>
<span>    N <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,                                            <span class="co"># 病院-転帰グループごとの行数      </span></span>
<span>    ct_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">ct_blood</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span>               <span class="co"># グループごとのCT値の中央値</span></span>
<span>  </span>
<span><span class="va">by_hospital</span> <span class="co"># テーブルを出力</span></span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
## # Groups:   hospital [5]
##    hospital                             outcome     N ct_value
##    &lt;chr&gt;                                &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt;
##  1 Central Hospital                     Death     193       22
##  2 Central Hospital                     Recover   165       22
##  3 Military Hospital                    Death     399       21
##  4 Military Hospital                    Recover   309       22
##  5 Other                                Death     395       22
##  6 Other                                Recover   290       21
##  7 Port Hospital                        Death     785       22
##  8 Port Hospital                        Recover   579       21
##  9 St. Mark's Maternity Hospital (SMMH) Death     199       22
## 10 St. Mark's Maternity Hospital (SMMH) Recover   126       22</code></pre>
<p>合計を得るには、同じ <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> コマンドを実行しますが、下記のように、データを hospital ではなく outcome でグループ化します。:</p>
<div class="sourceCode" id="cb904"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">totals</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">hospital</span> <span class="op">!=</span> <span class="st">"Missing"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                            <span class="co"># 病院をなくして転帰のみでグループ化    </span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>        N <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,                                       <span class="co"># 転帰ごとのみの統計量     </span></span>
<span>        ct_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">ct_blood</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">totals</span> <span class="co"># 表を出力</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   outcome     N ct_value
##   &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt;
## 1 Death    1971       22
## 2 Recover  1469       22</code></pre>
<p>この 2 つのデータフレームを結合することができます。 <code>by_hospital</code> は 4 列で、 <code>totals</code> は 3 列であることに注意してください。<code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows()</a></code> を使用すると、列は名前ごとに結合され、余分なスペースは <code>NA</code> と表示されます（例えば、新しい 2 つの <code>totals</code> 行の <code>hospital</code> 列の値）。行を結合した後、 <code><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na()</a></code> を使用してこれらの空欄を “Total” に変換します（ <a href="cleaning.html#cleaning">データクリーニングと主要関数</a> 章を参照）。</p>
<div class="sourceCode" id="cb906"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">table_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">by_hospital</span>, <span class="va">totals</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hospital <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="st">"Total"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>以下は、新しい表の下部に “Total” の行がある状態です。</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-f0941969d15090492c6a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f0941969d15090492c6a">{"x":{"filter":"none","vertical":false,"data":[["Central Hospital","Central Hospital","Military Hospital","Military Hospital","Other","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Total","Total"],["Death","Recover","Death","Recover","Death","Recover","Death","Recover","Death","Recover","Death","Recover"],[193,165,399,309,395,290,785,579,199,126,1971,1469],[22,22,21,22,22,21,22,21,22,22,22,22]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>hospital<\/th>\n      <th>outcome<\/th>\n      <th>N<\/th>\n      <th>ct_value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3]},{"name":"hospital","targets":0},{"name":"outcome","targets":1},{"name":"N","targets":2},{"name":"ct_value","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script><p>「縦」持ち形式のこの表があなたの望むものかもしれません。 <u>オプション</u> として、この表を <u>ピボット</u> で <u>横</u> 持ちにして読みやすくするができます。上記の 横変換セクションや、<a href="pivoting.html#pivoting">データの縦横変換</a> の章を参照してください。また、列を追加して、きれいに並べることもできます。このコードを以下に示します。</p>
<div class="sourceCode" id="cb907"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">table_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="co"># 横変換とフォーマット</span></span>
<span>  <span class="co">########################</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hospital <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="st">"Total"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>                                         <span class="co"># 縦から横へ変換</span></span>
<span>    values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">ct_value</span>, <span class="va">N</span><span class="op">)</span>,                       <span class="co"># ct_valueとN(カウント)列から新規の値</span></span>
<span>    names_from <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                           <span class="co"># 転帰を新しい列名に</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>                                              <span class="co"># 新規列を追加</span></span>
<span>    N_Known <span class="op">=</span> <span class="va">N_Death</span> <span class="op">+</span> <span class="va">N_Recover</span>,                               <span class="co"># 既知の症例数数</span></span>
<span>    Pct_Death <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">N_Death</span> <span class="op">/</span> <span class="va">N_Known</span>, <span class="fl">0.1</span><span class="op">)</span>,         <span class="co"># 死亡症例のパーセント（小数点1桁）</span></span>
<span>    Pct_Recover <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">N_Recover</span> <span class="op">/</span> <span class="va">N_Known</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># 回復症例のパーセント（小数点1桁）</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>                                              <span class="co"># 列の並べ替え</span></span>
<span>    <span class="va">hospital</span>, <span class="va">N_Known</span>,                                   <span class="co"># 最初の列</span></span>
<span>    <span class="va">N_Recover</span>, <span class="va">Pct_Recover</span>, <span class="va">ct_value_Recover</span>,            <span class="co"># 回復症例の列</span></span>
<span>    <span class="va">N_Death</span>, <span class="va">Pct_Death</span>, <span class="va">ct_value_Death</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>             <span class="co"># 死亡症例の列</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">N_Known</span><span class="op">)</span>                                  <span class="co"># 行を最小から最大まで並べる（合計行は最下部）</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 8
## # Groups:   hospital [6]
##   hospital      N_Known N_Recover Pct_Recover ct_value_Recover N_Death Pct_Death
##   &lt;chr&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;int&gt; &lt;chr&gt;    
## 1 St. Mark's M…     325       126 38.8%                     22     199 61.2%    
## 2 Central Hosp…     358       165 46.1%                     22     193 53.9%    
## 3 Other             685       290 42.3%                     21     395 57.7%    
## 4 Military Hos…     708       309 43.6%                     22     399 56.4%    
## 5 Port Hospital    1364       579 42.4%                     21     785 57.6%    
## 6 Total            3440      1469 42.7%                     22    1971 57.3%    
## # ℹ 1 more variable: ct_value_Death &lt;dbl&gt;</code></pre>
<p>そして、続いてこの表を画像としてきれいに出力することができます。以下は、 <strong>flextable</strong>での出力例です。今説明した例を「きれいな」表に仕上げる方法については <a href="tables-presentation.html#tables-presentation">見やすい表の作り方</a> の章で詳しく説明しています。</p>
<div class="tabwid">
<style>.cl-5c9f2834{}.cl-5c972954{font-family:'DejaVu Sans';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5c97295e{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5c99bfca{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5c99bfd4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5c99d03c{width:2.7in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d046{width:1.5in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d047{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d050{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d051{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d052{width:2.7in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d05a{width:1.5in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d05b{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d05c{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d064{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d065{width:2.7in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d066{width:1.5in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d06e{width:0.75in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d06f{width:1in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d078{width:1in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d079{width:2.7in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d07a{width:1.5in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d082{width:0.75in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d083{width:1in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5c99d084{width:1in;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<div class="inline-table"><table data-quarto-disable-processing="true" class="cl-5c9f2834">
<thead>
<tr style="overflow-wrap:break-word;">
<th rowspan="2" class="cl-5c99d03c"><p class="cl-5c99bfca"><span class="cl-5c972954">Hospital</span></p></th>
<th rowspan="2" class="cl-5c99d046"><p class="cl-5c99bfd4"><span class="cl-5c972954">Total cases with known outcome</span></p></th>
<th colspan="3" class="cl-5c99d047"><p class="cl-5c99bfd4"><span class="cl-5c972954">Recovered</span></p></th>
<th colspan="3" class="cl-5c99d047"><p class="cl-5c99bfd4"><span class="cl-5c972954">Died</span></p></th>
</tr>
<tr style="overflow-wrap:break-word;">
<th class="cl-5c99d05b"><p class="cl-5c99bfd4"><span class="cl-5c97295e">Total</span></p></th>
<th class="cl-5c99d05c"><p class="cl-5c99bfd4"><span class="cl-5c97295e">% of cases</span></p></th>
<th class="cl-5c99d064"><p class="cl-5c99bfd4"><span class="cl-5c97295e">Median CT values</span></p></th>
<th class="cl-5c99d05b"><p class="cl-5c99bfd4"><span class="cl-5c97295e">Total</span></p></th>
<th class="cl-5c99d05c"><p class="cl-5c99bfd4"><span class="cl-5c97295e">% of cases</span></p></th>
<th class="cl-5c99d05c"><p class="cl-5c99bfd4"><span class="cl-5c97295e">Median CT values</span></p></th>
</tr>
</thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-5c99d065"><p class="cl-5c99bfca"><span class="cl-5c97295e">St. Mark's Maternity Hospital (SMMH)</span></p></td>
<td class="cl-5c99d066"><p class="cl-5c99bfd4"><span class="cl-5c97295e">325</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">126</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">38.8%</span></p></td>
<td class="cl-5c99d078"><p class="cl-5c99bfd4"><span class="cl-5c97295e">22</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">199</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">61.2%</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">22</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5c99d065"><p class="cl-5c99bfca"><span class="cl-5c97295e">Central Hospital</span></p></td>
<td class="cl-5c99d066"><p class="cl-5c99bfd4"><span class="cl-5c97295e">358</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">165</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">46.1%</span></p></td>
<td class="cl-5c99d078"><p class="cl-5c99bfd4"><span class="cl-5c97295e">22</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">193</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">53.9%</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">22</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5c99d065"><p class="cl-5c99bfca"><span class="cl-5c97295e">Other</span></p></td>
<td class="cl-5c99d066"><p class="cl-5c99bfd4"><span class="cl-5c97295e">685</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">290</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">42.3%</span></p></td>
<td class="cl-5c99d078"><p class="cl-5c99bfd4"><span class="cl-5c97295e">21</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">395</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">57.7%</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">22</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5c99d065"><p class="cl-5c99bfca"><span class="cl-5c97295e">Military Hospital</span></p></td>
<td class="cl-5c99d066"><p class="cl-5c99bfd4"><span class="cl-5c97295e">708</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">309</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">43.6%</span></p></td>
<td class="cl-5c99d078"><p class="cl-5c99bfd4"><span class="cl-5c97295e">22</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">399</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">56.4%</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">21</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5c99d065"><p class="cl-5c99bfca"><span class="cl-5c97295e">Missing</span></p></td>
<td class="cl-5c99d066"><p class="cl-5c99bfd4"><span class="cl-5c97295e">1,125</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">514</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">45.7%</span></p></td>
<td class="cl-5c99d078"><p class="cl-5c99bfd4"><span class="cl-5c97295e">21</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c97295e">611</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">54.3%</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c97295e">21</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5c99d065"><p class="cl-5c99bfca"><span class="cl-5c972954">Port Hospital</span></p></td>
<td class="cl-5c99d066"><p class="cl-5c99bfd4"><span class="cl-5c972954">1,364</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c972954">579</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c972954">42.4%</span></p></td>
<td class="cl-5c99d078"><p class="cl-5c99bfd4"><span class="cl-5c972954">21</span></p></td>
<td class="cl-5c99d06e"><p class="cl-5c99bfd4"><span class="cl-5c972954">785</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c972954">57.6%</span></p></td>
<td class="cl-5c99d06f"><p class="cl-5c99bfd4"><span class="cl-5c972954">22</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5c99d079"><p class="cl-5c99bfca"><span class="cl-5c97295e">Total</span></p></td>
<td class="cl-5c99d07a"><p class="cl-5c99bfd4"><span class="cl-5c97295e">3,440</span></p></td>
<td class="cl-5c99d082"><p class="cl-5c99bfd4"><span class="cl-5c97295e">1,469</span></p></td>
<td class="cl-5c99d083"><p class="cl-5c99bfd4"><span class="cl-5c97295e">42.7%</span></p></td>
<td class="cl-5c99d084"><p class="cl-5c99bfd4"><span class="cl-5c97295e">22</span></p></td>
<td class="cl-5c99d082"><p class="cl-5c99bfd4"><span class="cl-5c97295e">1,971</span></p></td>
<td class="cl-5c99d083"><p class="cl-5c99bfd4"><span class="cl-5c97295e">57.3%</span></p></td>
<td class="cl-5c99d083"><p class="cl-5c99bfd4"><span class="cl-5c97295e">22</span></p></td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
</div>
<div id="tbl_gt" class="section level2" number="17.5">
<h2>
<span class="header-section-number">17.5</span> <strong>gtsummary</strong> パッケージ<a class="anchor" aria-label="anchor" href="#tbl_gt"><i class="fas fa-link"></i></a>
</h2>
<p>要約統計量をきれいな出版原稿レベルの図版として出力したい場合、<strong>gtsummary</strong> パッケージとそこに含まれる関数 <code>tbl_summary()</code> を使用できます。最初はコードが複雑に見えるかもしれませんが、とてもきれいな出力で、RStudio ビューアパネルに HTML イメージとして表示されます。 <a href="http://www.danieldsjoberg.com/gtsummary/articles/tbl_summary.html">ここのビニエット</a>をご一読ください。</p>
<p>また、統計的検定の結果 <strong>gtsummary</strong> テーブルに追加することもできます。この処理については、<a href="stat-tests.html#stats_gt">簡単な統計的検定</a> 章の <strong>gtsummary</strong> セクションで説明しています。</p>
<p><code>tbl_summary()</code> を紹介するにあたり、まず最も基本的な動作を示します。これだけでも、大きく美しい表が生成されます。次に、表をより適した形に調整、修正する方法の詳細を解説します。</p>
<div id="要約表" class="section level3 unnumbered">
<h3>要約表<a class="anchor" aria-label="anchor" href="#%E8%A6%81%E7%B4%84%E8%A1%A8"><i class="fas fa-link"></i></a>
</h3>
<p><code>tbl_summary()</code> のデフォルトの動作は非常に素晴らしく、指定された列を受け取り、ひとつのコマンドで要約表を作成します。この関数は、列のデータ型に応じた統計値を表示します。数値列では中央値と四分位範囲（IQR）、カテゴリ列ではカウント（％）を表示します。欠測値は “Unknown” に変換されます。統計量を説明するための脚注が下部に追加され，合計 N が上部に表示されます。</p>
<div class="sourceCode" id="cb909"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">age_years</span>, <span class="va">gender</span>, <span class="va">outcome</span>, <span class="va">fever</span>, <span class="va">temp</span>, <span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># 興味のある列のみを残す</span></span>
<span>  <span class="fu">tbl_summary</span><span class="op">(</span><span class="op">)</span>                                                  <span class="co"># デフォルト</span></span></code></pre></div>
<div id="xuwnmzbbcx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xuwnmzbbcx table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xuwnmzbbcx thead, #xuwnmzbbcx tbody, #xuwnmzbbcx tfoot, #xuwnmzbbcx tr, #xuwnmzbbcx td, #xuwnmzbbcx th {
  border-style: none;
}

#xuwnmzbbcx p {
  margin: 0;
  padding: 0;
}

#xuwnmzbbcx .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xuwnmzbbcx .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xuwnmzbbcx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xuwnmzbbcx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xuwnmzbbcx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xuwnmzbbcx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xuwnmzbbcx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xuwnmzbbcx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xuwnmzbbcx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xuwnmzbbcx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xuwnmzbbcx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xuwnmzbbcx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xuwnmzbbcx .gt_spanner_row {
  border-bottom-style: hidden;
}

#xuwnmzbbcx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xuwnmzbbcx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xuwnmzbbcx .gt_from_md > :first-child {
  margin-top: 0;
}

#xuwnmzbbcx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xuwnmzbbcx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xuwnmzbbcx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xuwnmzbbcx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xuwnmzbbcx .gt_row_group_first td {
  border-top-width: 2px;
}

#xuwnmzbbcx .gt_row_group_first th {
  border-top-width: 2px;
}

#xuwnmzbbcx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xuwnmzbbcx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xuwnmzbbcx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xuwnmzbbcx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xuwnmzbbcx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xuwnmzbbcx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xuwnmzbbcx .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xuwnmzbbcx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xuwnmzbbcx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xuwnmzbbcx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xuwnmzbbcx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xuwnmzbbcx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xuwnmzbbcx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xuwnmzbbcx .gt_left {
  text-align: left;
}

#xuwnmzbbcx .gt_center {
  text-align: center;
}

#xuwnmzbbcx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xuwnmzbbcx .gt_font_normal {
  font-weight: normal;
}

#xuwnmzbbcx .gt_font_bold {
  font-weight: bold;
}

#xuwnmzbbcx .gt_font_italic {
  font-style: italic;
}

#xuwnmzbbcx .gt_super {
  font-size: 65%;
}

#xuwnmzbbcx .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xuwnmzbbcx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xuwnmzbbcx .gt_indent_1 {
  text-indent: 5px;
}

#xuwnmzbbcx .gt_indent_2 {
  text-indent: 10px;
}

#xuwnmzbbcx .gt_indent_3 {
  text-indent: 15px;
}

#xuwnmzbbcx .gt_indent_4 {
  text-indent: 20px;
}

#xuwnmzbbcx .gt_indent_5 {
  text-indent: 25px;
}
</style>
<div class="inline-table"><table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;N = 5,888&lt;/strong&gt;&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>N = 5,888</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left">age_years</td>
<td headers="stat_0" class="gt_row gt_center">13 (6, 23)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">86</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">gender</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    f</td>
<td headers="stat_0" class="gt_row gt_center">2,807 (50%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    m</td>
<td headers="stat_0" class="gt_row gt_center">2,803 (50%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">278</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">outcome</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Death</td>
<td headers="stat_0" class="gt_row gt_center">2,582 (57%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Recover</td>
<td headers="stat_0" class="gt_row gt_center">1,983 (43%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">1,323</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">fever</td>
<td headers="stat_0" class="gt_row gt_center">4,549 (81%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">249</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">temp</td>
<td headers="stat_0" class="gt_row gt_center">38.80 (38.20, 39.20)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">149</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">hospital</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Central Hospital</td>
<td headers="stat_0" class="gt_row gt_center">454 (7.7%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Military Hospital</td>
<td headers="stat_0" class="gt_row gt_center">896 (15%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Missing</td>
<td headers="stat_0" class="gt_row gt_center">1,469 (25%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Other</td>
<td headers="stat_0" class="gt_row gt_center">885 (15%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Port Hospital</td>
<td headers="stat_0" class="gt_row gt_center">1,762 (30%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    St. Mark's Maternity Hospital (SMMH)</td>
<td headers="stat_0" class="gt_row gt_center">422 (7.2%)</td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr>
<td class="gt_footnote" colspan="2">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> Median (IQR); n (%)</td>
    </tr></tfoot>
</table></div>
</div>
</div>
<div id="調整" class="section level3 unnumbered">
<h3>調整<a class="anchor" aria-label="anchor" href="#%E8%AA%BF%E6%95%B4"><i class="fas fa-link"></i></a>
</h3>
<p>それでは、この機能の仕組みと調整方法について説明します。主要な論点を以下に詳述します。:</p>
<p><strong><code>by =</code></strong>
列で層別することで（例えば、結果で）、二元表を作成することができます。</p>
<p><strong><code>statistic =</code></strong>
表示する統計量とその表示方法を方程式で指定します。方程式は、チルダ <code>~</code> で区切られた2つの部分からなります。右側は希望する統計表示を引用符で囲み、左側にその表示を適用する列を指定します。</p>
<ul>
<li>式の右側は、 <strong>stringr</strong> の <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> の構文（ <a href="characters-strings.html#characters-strings">文字型・文字列型データ</a>を参照）を使い、希望する表示文字列を引用符で囲み、統計量そのものを波括弧で囲みます “n”（カウント数）、“N”（分母）、“mean”、“median”、“sd”、“max”、“min”、 “p##” のようなパーセンタイル値、または “p” として全体に対するパーセントなどの統計量を含めることができます。詳細は <code>?tbl_summary</code> を参照してください。</li>
<li>式の左辺では、列を名前で指定したり（<code>age</code> または <code>c(age, gender)</code> など）、 <code>all_continuous()</code>、<code>all_categorical()</code>、<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code>、<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code> などのヘルパーを使用したりすることができます。</li>
</ul>
<p><code>statistic =</code> の方程式の簡単な例として、<code>age_years</code> 列の平均値のみを表示する場合は以下のようになります。:</p>
<div class="sourceCode" id="cb910"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">age_years</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>         <span class="co"># 興味のある列だけを残す</span></span>
<span>  <span class="fu">tbl_summary</span><span class="op">(</span>                  <span class="co"># 要約表を作成</span></span>
<span>    statistic <span class="op">=</span> <span class="va">age_years</span> <span class="op">~</span> <span class="st">"{mean}"</span><span class="op">)</span> <span class="co"># 平均年齢を出力</span></span></code></pre></div>
<div id="zmxvtzcrkc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zmxvtzcrkc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zmxvtzcrkc thead, #zmxvtzcrkc tbody, #zmxvtzcrkc tfoot, #zmxvtzcrkc tr, #zmxvtzcrkc td, #zmxvtzcrkc th {
  border-style: none;
}

#zmxvtzcrkc p {
  margin: 0;
  padding: 0;
}

#zmxvtzcrkc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zmxvtzcrkc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zmxvtzcrkc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zmxvtzcrkc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zmxvtzcrkc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zmxvtzcrkc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zmxvtzcrkc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zmxvtzcrkc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zmxvtzcrkc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zmxvtzcrkc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zmxvtzcrkc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zmxvtzcrkc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zmxvtzcrkc .gt_spanner_row {
  border-bottom-style: hidden;
}

#zmxvtzcrkc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zmxvtzcrkc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zmxvtzcrkc .gt_from_md > :first-child {
  margin-top: 0;
}

#zmxvtzcrkc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zmxvtzcrkc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zmxvtzcrkc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zmxvtzcrkc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zmxvtzcrkc .gt_row_group_first td {
  border-top-width: 2px;
}

#zmxvtzcrkc .gt_row_group_first th {
  border-top-width: 2px;
}

#zmxvtzcrkc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zmxvtzcrkc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zmxvtzcrkc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zmxvtzcrkc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zmxvtzcrkc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zmxvtzcrkc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zmxvtzcrkc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zmxvtzcrkc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zmxvtzcrkc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zmxvtzcrkc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zmxvtzcrkc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zmxvtzcrkc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zmxvtzcrkc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zmxvtzcrkc .gt_left {
  text-align: left;
}

#zmxvtzcrkc .gt_center {
  text-align: center;
}

#zmxvtzcrkc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zmxvtzcrkc .gt_font_normal {
  font-weight: normal;
}

#zmxvtzcrkc .gt_font_bold {
  font-weight: bold;
}

#zmxvtzcrkc .gt_font_italic {
  font-style: italic;
}

#zmxvtzcrkc .gt_super {
  font-size: 65%;
}

#zmxvtzcrkc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zmxvtzcrkc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zmxvtzcrkc .gt_indent_1 {
  text-indent: 5px;
}

#zmxvtzcrkc .gt_indent_2 {
  text-indent: 10px;
}

#zmxvtzcrkc .gt_indent_3 {
  text-indent: 15px;
}

#zmxvtzcrkc .gt_indent_4 {
  text-indent: 20px;
}

#zmxvtzcrkc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<div class="inline-table"><table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;N = 5,888&lt;/strong&gt;&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>N = 5,888</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left">age_years</td>
<td headers="stat_0" class="gt_row gt_center">16</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">86</td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr>
<td class="gt_footnote" colspan="2">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> Mean</td>
    </tr></tfoot>
</table></div>
</div>
<p>もう少し複雑な式であれば、 <code>「({min}, {max})」</code>のように、最大値と最小値を括弧で囲み、カンマで区切ったものがあります。:</p>
<div class="sourceCode" id="cb911"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">age_years</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                       <span class="co"># 興味のある列だけを残す </span></span>
<span>  <span class="fu">tbl_summary</span><span class="op">(</span>                                <span class="co"># 要約表を作成</span></span>
<span>    statistic <span class="op">=</span> <span class="va">age_years</span> <span class="op">~</span> <span class="st">"({min}, {max})"</span><span class="op">)</span> <span class="co"># 年齢の最小値と最大値を出力</span></span></code></pre></div>
<div id="iefabmysnb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#iefabmysnb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#iefabmysnb thead, #iefabmysnb tbody, #iefabmysnb tfoot, #iefabmysnb tr, #iefabmysnb td, #iefabmysnb th {
  border-style: none;
}

#iefabmysnb p {
  margin: 0;
  padding: 0;
}

#iefabmysnb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#iefabmysnb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#iefabmysnb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#iefabmysnb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#iefabmysnb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iefabmysnb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#iefabmysnb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iefabmysnb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#iefabmysnb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#iefabmysnb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#iefabmysnb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#iefabmysnb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#iefabmysnb .gt_spanner_row {
  border-bottom-style: hidden;
}

#iefabmysnb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#iefabmysnb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#iefabmysnb .gt_from_md > :first-child {
  margin-top: 0;
}

#iefabmysnb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#iefabmysnb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#iefabmysnb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#iefabmysnb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#iefabmysnb .gt_row_group_first td {
  border-top-width: 2px;
}

#iefabmysnb .gt_row_group_first th {
  border-top-width: 2px;
}

#iefabmysnb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iefabmysnb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#iefabmysnb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#iefabmysnb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#iefabmysnb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iefabmysnb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#iefabmysnb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#iefabmysnb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#iefabmysnb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#iefabmysnb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iefabmysnb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#iefabmysnb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iefabmysnb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#iefabmysnb .gt_left {
  text-align: left;
}

#iefabmysnb .gt_center {
  text-align: center;
}

#iefabmysnb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#iefabmysnb .gt_font_normal {
  font-weight: normal;
}

#iefabmysnb .gt_font_bold {
  font-weight: bold;
}

#iefabmysnb .gt_font_italic {
  font-style: italic;
}

#iefabmysnb .gt_super {
  font-size: 65%;
}

#iefabmysnb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#iefabmysnb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#iefabmysnb .gt_indent_1 {
  text-indent: 5px;
}

#iefabmysnb .gt_indent_2 {
  text-indent: 10px;
}

#iefabmysnb .gt_indent_3 {
  text-indent: 15px;
}

#iefabmysnb .gt_indent_4 {
  text-indent: 20px;
}

#iefabmysnb .gt_indent_5 {
  text-indent: 25px;
}
</style>
<div class="inline-table"><table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;N = 5,888&lt;/strong&gt;&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>N = 5,888</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left">age_years</td>
<td headers="stat_0" class="gt_row gt_center">(0, 84)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">86</td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr>
<td class="gt_footnote" colspan="2">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> (Range)</td>
    </tr></tfoot>
</table></div>
</div>
<p>また、別々の列や列の種類に応じて構文を変えることもできます。以下の複雑な例では、 <code>statistc =</code> に指定された値は、すべての連続列に対しては平均値と括弧内の標準偏差を表示し、すべてのカテゴリ列に対しては n、分母、パーセントを表示することを示す <u>リスト</u> となっています。</p>
<p><strong><code>digits =</code></strong>
桁数や丸め方を調整します。オプションとして、連続した列のみを対象とするように指定することもできます（以下のように）。</p>
<p><strong><code>label =</code></strong>
列名の表示方法を調整します。列名と必要なラベルをチルダで区切って入力してください。デフォルトではカ列名が表示されます。</p>
<p><strong><code>missing_text =</code></strong>
欠測値の表示方法を調整します。デフォルトは “Unknown” です。</p>
<p><strong><code>type =</code></strong>
統計量を何段階で表示するかを調整するために使用します。構文は <code>statistic =</code> と似ていますが、左に列、右に値を持つ方程式を指定します。よくある 2 つのシナリオを紹介します。:</p>
<ul>
<li>
<code>type = all_categorical() ~ "categorical"</code> 強制的に二分法のカラム（例： <code>fever</code>yes/no）を使用して、“yes” の行だけではなく、すべてのレベルを表示します。</li>
<li>
<code>type = all_continuous() ~ "continuous2"</code> 後のセクションで示すように、変数ごとに複数行の統計量を可能にします。</li>
</ul>
<p>以下の例では、これらの各引数を使用して元の要約表を修正しています。:</p>
<div class="sourceCode" id="cb912"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">age_years</span>, <span class="va">gender</span>, <span class="va">outcome</span>, <span class="va">fever</span>, <span class="va">temp</span>, <span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># 興味のある列だけを残す</span></span>
<span>  <span class="fu">tbl_summary</span><span class="op">(</span>     </span>
<span>    by <span class="op">=</span> <span class="va">outcome</span>,                                               <span class="co"># 転帰ごとにテーブル全体を層別化</span></span>
<span>    statistic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu">all_continuous</span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="st">"{mean} ({sd})"</span>,        <span class="co"># 連続列に対して統計量を算出してフォーマット</span></span>
<span>                     <span class="fu">all_categorical</span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="st">"{n} / {N} ({p}%)"</span><span class="op">)</span>,   <span class="co"># カテゴリ列に対して統計量を算出してフォーマット</span></span>
<span>    digits <span class="op">=</span> <span class="fu">all_continuous</span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,                              <span class="co"># 連続列に対して丸めの指定</span></span>
<span>    type   <span class="op">=</span> <span class="fu">all_categorical</span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="st">"categorical"</span>,                 <span class="co"># 強制的に全カテゴリ水準を表示</span></span>
<span>    label  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>                                              <span class="co"># 列名のラベルを表示</span></span>
<span>      <span class="va">outcome</span>   <span class="op">~</span> <span class="st">"Outcome"</span>,                           </span>
<span>      <span class="va">age_years</span> <span class="op">~</span> <span class="st">"Age (years)"</span>,</span>
<span>      <span class="va">gender</span>    <span class="op">~</span> <span class="st">"Gender"</span>,</span>
<span>      <span class="va">temp</span>      <span class="op">~</span> <span class="st">"Temperature"</span>,</span>
<span>      <span class="va">hospital</span>  <span class="op">~</span> <span class="st">"Hospital"</span><span class="op">)</span>,</span>
<span>    missing_text <span class="op">=</span> <span class="st">"Missing"</span>                                    <span class="co"># 欠測値の表示方法</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code>## 1323 observations missing `outcome` have been removed. To include these observations, use `forcats::fct_na_value_to_level()` on `outcome` column before passing to `tbl_summary()`.</code></pre>
<div id="gegooyspwk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gegooyspwk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gegooyspwk thead, #gegooyspwk tbody, #gegooyspwk tfoot, #gegooyspwk tr, #gegooyspwk td, #gegooyspwk th {
  border-style: none;
}

#gegooyspwk p {
  margin: 0;
  padding: 0;
}

#gegooyspwk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gegooyspwk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gegooyspwk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gegooyspwk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gegooyspwk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gegooyspwk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gegooyspwk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gegooyspwk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gegooyspwk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gegooyspwk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gegooyspwk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gegooyspwk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gegooyspwk .gt_spanner_row {
  border-bottom-style: hidden;
}

#gegooyspwk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gegooyspwk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gegooyspwk .gt_from_md > :first-child {
  margin-top: 0;
}

#gegooyspwk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gegooyspwk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gegooyspwk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gegooyspwk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gegooyspwk .gt_row_group_first td {
  border-top-width: 2px;
}

#gegooyspwk .gt_row_group_first th {
  border-top-width: 2px;
}

#gegooyspwk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gegooyspwk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gegooyspwk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gegooyspwk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gegooyspwk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gegooyspwk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gegooyspwk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gegooyspwk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gegooyspwk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gegooyspwk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gegooyspwk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gegooyspwk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gegooyspwk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gegooyspwk .gt_left {
  text-align: left;
}

#gegooyspwk .gt_center {
  text-align: center;
}

#gegooyspwk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gegooyspwk .gt_font_normal {
  font-weight: normal;
}

#gegooyspwk .gt_font_bold {
  font-weight: bold;
}

#gegooyspwk .gt_font_italic {
  font-style: italic;
}

#gegooyspwk .gt_super {
  font-size: 65%;
}

#gegooyspwk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gegooyspwk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gegooyspwk .gt_indent_1 {
  text-indent: 5px;
}

#gegooyspwk .gt_indent_2 {
  text-indent: 10px;
}

#gegooyspwk .gt_indent_3 {
  text-indent: 15px;
}

#gegooyspwk .gt_indent_4 {
  text-indent: 20px;
}

#gegooyspwk .gt_indent_5 {
  text-indent: 25px;
}
</style>
<div class="inline-table"><table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;Death&lt;/strong&gt;, N = 2,582&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>Death</strong>, N = 2,582<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id='&lt;strong&gt;Recover&lt;/strong&gt;, N = 1,983&lt;span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;'>
<strong>Recover</strong>, N = 1,983<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left">Age (years)</td>
<td headers="stat_1" class="gt_row gt_center">15.9 (12.3)</td>
<td headers="stat_2" class="gt_row gt_center">16.1 (13.0)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Missing</td>
<td headers="stat_1" class="gt_row gt_center">32</td>
<td headers="stat_2" class="gt_row gt_center">28</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Gender</td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    f</td>
<td headers="stat_1" class="gt_row gt_center">1,227 / 2,455 (50%)</td>
<td headers="stat_2" class="gt_row gt_center">953 / 1,903 (50%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    m</td>
<td headers="stat_1" class="gt_row gt_center">1,228 / 2,455 (50%)</td>
<td headers="stat_2" class="gt_row gt_center">950 / 1,903 (50%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Missing</td>
<td headers="stat_1" class="gt_row gt_center">127</td>
<td headers="stat_2" class="gt_row gt_center">80</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">fever</td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    no</td>
<td headers="stat_1" class="gt_row gt_center">458 / 2,460 (19%)</td>
<td headers="stat_2" class="gt_row gt_center">361 / 1,904 (19%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    yes</td>
<td headers="stat_1" class="gt_row gt_center">2,002 / 2,460 (81%)</td>
<td headers="stat_2" class="gt_row gt_center">1,543 / 1,904 (81%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Missing</td>
<td headers="stat_1" class="gt_row gt_center">122</td>
<td headers="stat_2" class="gt_row gt_center">79</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Temperature</td>
<td headers="stat_1" class="gt_row gt_center">38.6 (1.0)</td>
<td headers="stat_2" class="gt_row gt_center">38.6 (1.0)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Missing</td>
<td headers="stat_1" class="gt_row gt_center">60</td>
<td headers="stat_2" class="gt_row gt_center">55</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">Hospital</td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Central Hospital</td>
<td headers="stat_1" class="gt_row gt_center">193 / 2,582 (7.5%)</td>
<td headers="stat_2" class="gt_row gt_center">165 / 1,983 (8.3%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Military Hospital</td>
<td headers="stat_1" class="gt_row gt_center">399 / 2,582 (15%)</td>
<td headers="stat_2" class="gt_row gt_center">309 / 1,983 (16%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Missing</td>
<td headers="stat_1" class="gt_row gt_center">611 / 2,582 (24%)</td>
<td headers="stat_2" class="gt_row gt_center">514 / 1,983 (26%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Other</td>
<td headers="stat_1" class="gt_row gt_center">395 / 2,582 (15%)</td>
<td headers="stat_2" class="gt_row gt_center">290 / 1,983 (15%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Port Hospital</td>
<td headers="stat_1" class="gt_row gt_center">785 / 2,582 (30%)</td>
<td headers="stat_2" class="gt_row gt_center">579 / 1,983 (29%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    St. Mark's Maternity Hospital (SMMH)</td>
<td headers="stat_1" class="gt_row gt_center">199 / 2,582 (7.7%)</td>
<td headers="stat_2" class="gt_row gt_center">126 / 1,983 (6.4%)</td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr>
<td class="gt_footnote" colspan="3">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> Mean (SD); n / N (%)</td>
    </tr></tfoot>
</table></div>
</div>
</div>
<div id="連続変数の統計量を複数行表示" class="section level3 unnumbered">
<h3>連続変数の統計量を複数行表示<a class="anchor" aria-label="anchor" href="#%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%81%AE%E7%B5%B1%E8%A8%88%E9%87%8F%E3%82%92%E8%A4%87%E6%95%B0%E8%A1%8C%E8%A1%A8%E7%A4%BA"><i class="fas fa-link"></i></a>
</h3>
<p>連続変数の統計量を複数行で表示したい場合は、<code>type =</code> を “continuous2” に設定することで可能です。どの統計量を表示するかを選択することで、先に示したすべての要素を 1 つの表にまとめることができます。 これを行うには、タイプを “continuous2” と入力して、表を返してほしいことを関数に伝える必要があります。欠測値の数は “Unknown” と表示されます。</p>
<div class="sourceCode" id="cb914"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">age_years</span>, <span class="va">temp</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                      <span class="co"># 興味のある列のみを残す</span></span>
<span>  <span class="fu">tbl_summary</span><span class="op">(</span>                                     <span class="co"># 要約表を作成する</span></span>
<span>    type <span class="op">=</span> <span class="fu">all_continuous</span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="st">"continuous2"</span>,       <span class="co"># 複数の統計量を出力したいことを指示 </span></span>
<span>    statistic <span class="op">=</span> <span class="fu">all_continuous</span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"{mean} ({sd})"</span>,                             <span class="co"># 行1には平均値とSD</span></span>
<span>      <span class="st">"{median} ({p25}, {p75})"</span>,                   <span class="co"># 行2には中央値とIQR</span></span>
<span>      <span class="st">"{min}, {max}"</span><span class="op">)</span>                              <span class="co"># 行3には最小値と最大値</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div id="ofkwbgelyp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ofkwbgelyp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ofkwbgelyp thead, #ofkwbgelyp tbody, #ofkwbgelyp tfoot, #ofkwbgelyp tr, #ofkwbgelyp td, #ofkwbgelyp th {
  border-style: none;
}

#ofkwbgelyp p {
  margin: 0;
  padding: 0;
}

#ofkwbgelyp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ofkwbgelyp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ofkwbgelyp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ofkwbgelyp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ofkwbgelyp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ofkwbgelyp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ofkwbgelyp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ofkwbgelyp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ofkwbgelyp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ofkwbgelyp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ofkwbgelyp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ofkwbgelyp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ofkwbgelyp .gt_spanner_row {
  border-bottom-style: hidden;
}

#ofkwbgelyp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ofkwbgelyp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ofkwbgelyp .gt_from_md > :first-child {
  margin-top: 0;
}

#ofkwbgelyp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ofkwbgelyp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ofkwbgelyp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ofkwbgelyp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ofkwbgelyp .gt_row_group_first td {
  border-top-width: 2px;
}

#ofkwbgelyp .gt_row_group_first th {
  border-top-width: 2px;
}

#ofkwbgelyp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ofkwbgelyp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ofkwbgelyp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ofkwbgelyp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ofkwbgelyp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ofkwbgelyp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ofkwbgelyp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ofkwbgelyp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ofkwbgelyp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ofkwbgelyp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ofkwbgelyp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ofkwbgelyp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ofkwbgelyp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ofkwbgelyp .gt_left {
  text-align: left;
}

#ofkwbgelyp .gt_center {
  text-align: center;
}

#ofkwbgelyp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ofkwbgelyp .gt_font_normal {
  font-weight: normal;
}

#ofkwbgelyp .gt_font_bold {
  font-weight: bold;
}

#ofkwbgelyp .gt_font_italic {
  font-style: italic;
}

#ofkwbgelyp .gt_super {
  font-size: 65%;
}

#ofkwbgelyp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ofkwbgelyp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ofkwbgelyp .gt_indent_1 {
  text-indent: 5px;
}

#ofkwbgelyp .gt_indent_2 {
  text-indent: 10px;
}

#ofkwbgelyp .gt_indent_3 {
  text-indent: 15px;
}

#ofkwbgelyp .gt_indent_4 {
  text-indent: 20px;
}

#ofkwbgelyp .gt_indent_5 {
  text-indent: 25px;
}
</style>
<div class="inline-table"><table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;N = 5,888&lt;/strong&gt;"><strong>N = 5,888</strong></th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left">age_years</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Mean (SD)</td>
<td headers="stat_0" class="gt_row gt_center">16 (13)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Median (IQR)</td>
<td headers="stat_0" class="gt_row gt_center">13 (6, 23)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Range</td>
<td headers="stat_0" class="gt_row gt_center">0, 84</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">86</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">temp</td>
<td headers="stat_0" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Mean (SD)</td>
<td headers="stat_0" class="gt_row gt_center">38.56 (0.98)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Median (IQR)</td>
<td headers="stat_0" class="gt_row gt_center">38.80 (38.20, 39.20)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Range</td>
<td headers="stat_0" class="gt_row gt_center">35.20, 40.80</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Unknown</td>
<td headers="stat_0" class="gt_row gt_center">149</td>
</tr>
</tbody>
</table></div>
</div>
<p>p 値の追加、色や見出しの調整など、これらの表を修正する方法は他にもたくさんあります。これらの多くはドキュメントに記載されており（コンソールで <code>?tbl_summary</code> と入力してください）、いくつかは <a href="https://epirhandbook.com/simple-statistical-tests.html">簡単な統計的検定</a>のセクションに記載されています。</p>
</div>
</div>
<div id="base-r-1" class="section level2" number="17.6">
<h2>
<span class="header-section-number">17.6</span> <strong>base</strong> R<a class="anchor" aria-label="anchor" href="#base-r-1"><i class="fas fa-link"></i></a>
</h2>
<p>関数 <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> を使って、列の集計やクロス集計を行うことができます。上記のオプションとは異なり、以下のように、列名を参照するたびにデータフレームを指定する必要があります。</p>
<p><span style="color: orange;"><strong><u>注意:</u></strong> 引数 <code>useNA = "always"</code> （“no” または “ifany” に設定することも可能）を含めない限り、<code>NA</code> （欠測値）値は集計 <strong>されません</strong>。</span></p>
<p><span style="color: darkgreen;"><strong><u>ヒント:</u></strong> <strong>magrittr</strong> の <code>%$%</code> を使用すれば、 <strong>ベース</strong> 関数でデータフレームの呼び出しを繰り返しする必要がなくなります。例えば、以下のように記述できます。 <code>linelist %$% table(outcome, useNA = "always")</code></span></p>
<div class="sourceCode" id="cb915"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">outcome</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 
##   Death Recover    &lt;NA&gt; 
##    2582    1983    1323</code></pre>
<p>複数の列をカンマで区切って順番に並べることで、クロス集計が可能です。 オプションとして、<code>Outcome = linelist$outcome</code>のように各列に「名前」を付けることもできます。</p>
<div class="sourceCode" id="cb917"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_by_outcome</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age_cat</span>, <span class="va">linelist</span><span class="op">$</span><span class="va">outcome</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span> <span class="co"># 表をオブジェクトとして保存</span></span>
<span><span class="va">age_by_outcome</span>   <span class="co"># 表を出力</span></span></code></pre></div>
<pre><code>##        
##         Death Recover &lt;NA&gt;
##   0-4     471     364  260
##   5-9     476     391  228
##   10-14   438     303  200
##   15-19   323     251  169
##   20-29   477     367  229
##   30-49   329     238  187
##   50-69    33      38   24
##   70+       3       3    0
##   &lt;NA&gt;     32      28   26</code></pre>
<div id="割合" class="section level3 unnumbered">
<h3>割合<a class="anchor" aria-label="anchor" href="#%E5%89%B2%E5%90%88"><i class="fas fa-link"></i></a>
</h3>
<p>割合を取得するには、上記の表を関数 <code><a href="https://rdrr.io/r/base/proportions.html">prop.table()</a></code> に渡します。引数 <code>margins =</code> を使用して、行に対しての割合の場合は “1”、列に対しての場合は “2”、または表全体に対しての場合は “3” のいずれかを指定します。 わかりやすくするために、この表を <strong>base</strong> R の <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> にパイプで渡し、2 桁の数字を指定します。</p>
<div class="sourceCode" id="cb919"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 上で定義した表の割合を、行ごとに、丸めて取得</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="va">age_by_outcome</span>, <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code>##        
##         Death Recover &lt;NA&gt;
##   0-4    0.43    0.33 0.24
##   5-9    0.43    0.36 0.21
##   10-14  0.47    0.32 0.21
##   15-19  0.43    0.34 0.23
##   20-29  0.44    0.34 0.21
##   30-49  0.44    0.32 0.25
##   50-69  0.35    0.40 0.25
##   70+    0.50    0.50 0.00
##   &lt;NA&gt;   0.37    0.33 0.30</code></pre>
</div>
<div id="合計" class="section level3 unnumbered">
<h3>合計<a class="anchor" aria-label="anchor" href="#%E5%90%88%E8%A8%88"><i class="fas fa-link"></i></a>
</h3>
<p>行と列の合計を加えるには、テーブルを <code><a href="https://rdrr.io/r/stats/addmargins.html">addmargins()</a></code> に渡します。これは、数と割合の両方で機能します。</p>
<div class="sourceCode" id="cb921"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/addmargins.html">addmargins</a></span><span class="op">(</span><span class="va">age_by_outcome</span><span class="op">)</span></span></code></pre></div>
<pre><code>##        
##         Death Recover &lt;NA&gt;  Sum
##   0-4     471     364  260 1095
##   5-9     476     391  228 1095
##   10-14   438     303  200  941
##   15-19   323     251  169  743
##   20-29   477     367  229 1073
##   30-49   329     238  187  754
##   50-69    33      38   24   95
##   70+       3       3    0    6
##   &lt;NA&gt;     32      28   26   86
##   Sum    2582    1983 1323 5888</code></pre>
</div>
<div id="データフレームに変換" class="section level3 unnumbered">
<h3>データフレームに変換<a class="anchor" aria-label="anchor" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%81%AB%E5%A4%89%E6%8F%9B"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://rdrr.io/r/base/table.html">table()</a></code> オブジェクトを直接データフレームに変換することは、簡単ではありません。以下にひとつの方法を示します。:</p>
<ol style="list-style-type: decimal">
<li>
<code>useNA = "always"</code> を <em>使用せず</em> にテーブルを作成します。代わりに <strong>forcats</strong> の <code><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na()</a></code> で <code>NA</code> 値を “(Missing)” に変換します。</li>
<li>
<code><a href="https://rdrr.io/r/stats/addmargins.html">addmargins()</a></code> にパイプ演算子で渡して合計値を追加します（オプション）</li>
<li>
<strong>base</strong> R の <code><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame.matrix()</a></code> にパイプ演算子で渡します。</li>
<li>表を <strong>tibble</strong> 関数の <code><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames_to_column()</a></code> にパイプ演算子で渡し、最初の行の名前を指定します。</li>
<li>必要に応じて、出力、表示、またはエクスポートします。この例では、 <a href="tables-presentation.html#tables-presentation">見やすい表の作り方</a> の章で説明したように、flextable パッケージの flextable() を使用します。 こうすると、RStudio の viewer ペインにきれいな HTML イメージとして出力することができます。</li>
</ol>
<div class="sourceCode" id="cb923"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age_cat</span><span class="op">)</span>, <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_explicit_na.html">fct_explicit_na</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">outcome</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/addmargins.html">addmargins</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame.matrix</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames_to_column</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"Age Category"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">flextable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-5f2fc3ec{}.cl-5f295494{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5f2bf8a2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5f2bf8ac{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5f2c0ad6{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f2c0ae0{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f2c0aea{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f2c0aeb{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f2c0af4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f2c0af5{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<div class="inline-table"><table data-quarto-disable-processing="true" class="cl-5f2fc3ec">
<thead><tr style="overflow-wrap:break-word;">
<th class="cl-5f2c0ad6"><p class="cl-5f2bf8a2"><span class="cl-5f295494">Age Category</span></p></th>
<th class="cl-5f2c0ae0"><p class="cl-5f2bf8ac"><span class="cl-5f295494">Death</span></p></th>
<th class="cl-5f2c0ae0"><p class="cl-5f2bf8ac"><span class="cl-5f295494">Recover</span></p></th>
<th class="cl-5f2c0ae0"><p class="cl-5f2bf8ac"><span class="cl-5f295494">(Missing)</span></p></th>
<th class="cl-5f2c0ae0"><p class="cl-5f2bf8ac"><span class="cl-5f295494">Sum</span></p></th>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0aea"><p class="cl-5f2bf8a2"><span class="cl-5f295494">0-4</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">471</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">364</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">260</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">1,095</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0aea"><p class="cl-5f2bf8a2"><span class="cl-5f295494">5-9</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">476</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">391</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">228</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">1,095</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0aea"><p class="cl-5f2bf8a2"><span class="cl-5f295494">10-14</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">438</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">303</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">200</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">941</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0aea"><p class="cl-5f2bf8a2"><span class="cl-5f295494">15-19</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">323</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">251</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">169</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">743</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0aea"><p class="cl-5f2bf8a2"><span class="cl-5f295494">20-29</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">477</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">367</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">229</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">1,073</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0aea"><p class="cl-5f2bf8a2"><span class="cl-5f295494">30-49</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">329</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">238</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">187</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">754</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0aea"><p class="cl-5f2bf8a2"><span class="cl-5f295494">50-69</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">33</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">38</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">24</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">95</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0aea"><p class="cl-5f2bf8a2"><span class="cl-5f295494">70+</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">3</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">3</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">0</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">6</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0aea"><p class="cl-5f2bf8a2"><span class="cl-5f295494">(Missing)</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">32</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">28</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">26</span></p></td>
<td class="cl-5f2c0aeb"><p class="cl-5f2bf8ac"><span class="cl-5f295494">86</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-5f2c0af4"><p class="cl-5f2bf8a2"><span class="cl-5f295494">Sum</span></p></td>
<td class="cl-5f2c0af5"><p class="cl-5f2bf8ac"><span class="cl-5f295494">2,582</span></p></td>
<td class="cl-5f2c0af5"><p class="cl-5f2bf8ac"><span class="cl-5f295494">1,983</span></p></td>
<td class="cl-5f2c0af5"><p class="cl-5f2bf8ac"><span class="cl-5f295494">1,323</span></p></td>
<td class="cl-5f2c0af5"><p class="cl-5f2bf8ac"><span class="cl-5f295494">5,888</span></p></td>
</tr>
</tbody>
</table></div>
</div>
<!-- ======================================================= -->
</div>
</div>
<div id="参考資料-10" class="section level2" number="17.7">
<h2>
<span class="header-section-number">17.7</span> 参考資料<a class="anchor" aria-label="anchor" href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99-10"><i class="fas fa-link"></i></a>
</h2>
<p>この章に掲載されている情報の多くは、これらのリソースやオンライン上のヴィネットを参考にしています。:</p>
<p><a href="http://www.danieldsjoberg.com/gtsummary/articles/tbl_summary.html">gtsummary</a></p>
<p><a href="https://dplyr.tidyverse.org/articles/grouping.html">dplyr</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="iteration.html"><span class="header-section-number">16</span> ループと反復処理・リストの操作</a></div>
<div class="next"><a href="stat-tests.html"><span class="header-section-number">18</span> 基本的な統計的検定</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#tables-descriptive"><span class="header-section-number">17</span> 記述統計表の作り方</a></li>
<li>
<a class="nav-link" href="#%E6%BA%96%E5%82%99-8"><span class="header-section-number">17.1</span> 準備</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF-7">パッケージの読み込み</a></li>
<li><a class="nav-link" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88-8">データのインポート</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E9%96%B2%E8%A6%A7%E3%81%99%E3%82%8B"><span class="header-section-number">17.2</span> データを閲覧する</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#skimr-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8">skimr パッケージ</a></li>
<li><a class="nav-link" href="#%E8%A6%81%E7%B4%84%E7%B5%B1%E8%A8%88%E9%87%8F">要約統計量</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tbl_janitor"><span class="header-section-number">17.3</span> janitor パッケージ</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tabyl-%E3%81%AE%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9">tabyl のシンプルな使い方</a></li>
<li><a class="nav-link" href="#%E3%82%AF%E3%83%AD%E3%82%B9%E9%9B%86%E8%A8%88%E8%A1%A8">クロス集計表</a></li>
<li><a class="nav-link" href="#tbl_adorn">tabyl を 「加工する」</a></li>
<li><a class="nav-link" href="#tabyl-%E3%81%AE%E5%87%BA%E5%8A%9B">tabyl の出力</a></li>
<li><a class="nav-link" href="#%E4%BB%96%E3%81%AE%E8%A1%A8%E3%81%A7%E3%81%AE%E4%BD%BF%E7%94%A8">他の表での使用</a></li>
<li><a class="nav-link" href="#tabyl-%E3%81%AE%E4%BF%9D%E5%AD%98">tabyl の保存</a></li>
<li><a class="nav-link" href="#janitor_age_out_stats">統計量</a></li>
<li><a class="nav-link" href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E3%83%92%E3%83%B3%E3%83%88">その他のヒント</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#dplyr-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8"><span class="header-section-number">17.4</span> dplyr パッケージ</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E6%95%B0%E3%81%AE%E5%8F%96%E5%BE%97">カウント数の取得</a></li>
<li><a class="nav-link" href="#%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%AC%E3%83%99%E3%83%AB%E3%82%92%E8%A1%A8%E7%A4%BA">すべてのレベルを表示</a></li>
<li><a class="nav-link" href="#tbl_dplyr_prop">割合</a></li>
<li><a class="nav-link" href="#%E3%83%97%E3%83%AD%E3%83%83%E3%83%88">プロット</a></li>
<li><a class="nav-link" href="#%E8%A6%81%E7%B4%84%E7%B5%B1%E8%A8%88%E9%87%8F-1">要約統計量</a></li>
<li><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E4%BB%98%E3%81%8D%E7%B5%B1%E8%A8%88%E9%87%8F">条件付き統計量</a></li>
<li><a class="nav-link" href="#%E3%81%AE%E3%82%8A%E3%81%A5%E3%81%91-glueing">のりづけ (Glueing)</a></li>
<li><a class="nav-link" href="#%E9%9B%86%E8%A8%88%E3%81%95%E3%82%8C%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B">集計されたデータをまとめる</a></li>
<li><a class="nav-link" href="#across-%E8%A4%87%E6%95%B0%E3%81%AE%E5%88%97">across() 複数の列</a></li>
<li><a class="nav-link" href="#tbls_pivot_wider">横への変換</a></li>
<li><a class="nav-link" href="#tbl_dplyr_totals">行を合計する</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tbl_gt"><span class="header-section-number">17.5</span> gtsummary パッケージ</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E8%A6%81%E7%B4%84%E8%A1%A8">要約表</a></li>
<li><a class="nav-link" href="#%E8%AA%BF%E6%95%B4">調整</a></li>
<li><a class="nav-link" href="#%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%81%AE%E7%B5%B1%E8%A8%88%E9%87%8F%E3%82%92%E8%A4%87%E6%95%B0%E8%A1%8C%E8%A1%A8%E7%A4%BA">連続変数の統計量を複数行表示</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#base-r-1"><span class="header-section-number">17.6</span> base R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%89%B2%E5%90%88">割合</a></li>
<li><a class="nav-link" href="#%E5%90%88%E8%A8%88">合計</a></li>
<li><a class="nav-link" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%81%AB%E5%A4%89%E6%8F%9B">データフレームに変換</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99-10"><span class="header-section-number">17.7</span> 参考資料</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>疫学のための R ハンドブック</strong>" was written by the handbook team. It was last built on 2023-12-28.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
