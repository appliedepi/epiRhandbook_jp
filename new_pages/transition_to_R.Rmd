<!-- ======================================================= -->

<!-- ======================================================= -->

<!-- ======================================================= -->

# Excel・Stata・SASとの比較

R に移行する場合のアドバイスとリソースを以下に示します。

R は1990年代後半に導入されて以来、その範囲は飛躍的に拡大しています。その能力は非常に広範であるため、競争力を維持するために、市販の代替品が R の開発に反応してきました。([この記事を読んで、R、SPSS、SAS、STATA、Python を比較してください。](https://www.inwt-statistics.com/read-blog/comparison-of-r-python-sas-spss-and-stata.html))

さらに、R は 10 年前よりもはるかに学びやすくなっています。以前は、R は初心者には難しいと評判でした。RStudio のような使いやすいユーザー・インターフェース、**tidyverse** のような直感的なコード、そして多くのチュートリアル・リソースを使えば、作業はずっと簡単になります。

**怖がらずに、R の世界を発見してください！**

```{r, echo=F, out.width = "75%", out.height="75%", fig.align = "center"}
knitr::include_graphics(here::here("images", "transition_door.png"))
```

## **ExcelからRへの移行**

Excel から R への直接移行は、非常に達成しやすい目標です。気が遠くなるかもしれませんが、あなたならできます！

確かに、Excel のスキルに長けていれば、VBA のようなスクリプトツールを使用して、Excel だけで非常に高度な操作を実行できます。Excel は世界中で使用されており、疫学者にとって不可欠なツールです。しかし、R で補完することで、ワークフローを劇的に改善し、拡張することができます。

### **メリット** {.unnumbered}

R を使用すると、時間の節約、より一貫性のある正確な分析、再現性、共有性、および迅速なエラー修正という点で大きな利点があります。他の新しいソフトウェアと同じように、慣れ親しむために投資しなければならない時間の「学習曲線」があります。しかし、R を使うことで得られる利益は非常に大きく、R によって新たな可能性が開かれます。

Excel はよく知られたソフトウェアで、初心者でも簡単に「ポイント ＆ クリック」を使って簡単な解析と視覚化を行うことができます。それに比べて、R の機能やインターフェースを快適に使えるようになるには数週間かかるかもしれません。しかし、近年、R は初心者にも使いやすいように進化しています。

多くの Excel ワークフローはメモリと反復に依存しているため、エラーが発生する可能性が高くなります。さらに、一般的に、データのクリーニング、解析方法、および使用される方程式は表示されません。新しい仕事仲間が Excel ブックの動作とそのトラブルシューティング方法を習得するには、かなりの時間がかかります。R を使用すると、すべてのステップがスクリプトに明示的に書き込まれ、簡単に表示、編集、修正、および他のデータセットへの適用が可能になります。

Excel から R への移行を開始するには、いくつかの重要な方法でマインドセットを調整する必要があります：

### **データの整理** {.unnumbered}

 

「人間だけが読める」乱雑なデータの代わりに、機械で可読な「きちんとした」データを使用します。[R の「きちんとした」データに関するチュートリアル](https://r4ds.had.co.nz/tidy-data.html)で説明されているように、「きちんとした」データには主に次の 3 つの要件があります：

-   各変数には独自の列が必要です
-   各観測には独自の行が必要です\
-   各値には独自のセルが必要です

Excel ユーザーの場合-データを標準化し、書式を予測しやすくする上での [Excel の「表」](https://exceljet.net/excel-tables)の役割を担っていると考えてみてください。

「きちんとした」データの例としては、このハンドブック全体で使用されている症例リストが挙げられます - 各変数は 1 列に含まれ、各観測 (症例) は独自の行を持ち、各値は 1 つのセルに収められています。下記に、症例リストの最初の 50 行を示します：

```{r, echo=F}
# import the linelist into R
linelist <- rio::import(here::here("data", "case_linelists", "linelist_cleaned.rds"))
```

```{r, message=FALSE, echo=F}
# display the linelist data as a table
DT::datatable(head(linelist, 50), rownames = FALSE, filter="top", options = list(pageLength = 5, scrollX=T), class = 'white-space: nowrap' )
```

[整然としないデータに遭遇する主な理由は、多くの Excel スプレッドシートが、機械やソフトウェアによる読みやすさではなく、人間にとっての読みやすさを優先するように設計されているためです。]{.ul}

この違いを理解しやすくするために、人間の可読性を機械の可読性より優先した**整然としないデータ**の架空の例を以下に示します：

```{r, echo=F, out.width = "100%", out.height="75%", fig.align = "center"}
knitr::include_graphics(here::here("images", "Excel_nonTidy_1.png"))
```

[問題点：]{.ul}上記のスプレッドシートには、R が消化しにくいマージされたセルがあります。どの行を「ヘッダー」と見なすかが、明確ではありません。右側にはカラーベースの辞書があり、セルの値は色で表されます。これも R (色覚異常の人間でも！)では簡単に解釈できません。さらに、異なる情報が 1 つのセルにまとめられている ( 1 つの領域で作業している複数のパートナー組織、または「パートナー D」と同じセルに「TBC」というステータスがある)。

```{r, echo=F, out.width = "100%", out.height="100%", fig.align = "center"}
knitr::include_graphics(here::here("images", "Excel_nonTidy_2.png"))
```

[問題点：]{.ul}上記のスプレッドシートでは、データセット内に空の行と列が多数あります。これは、R のクリーニングの頭痛の種になります。さらに、GPS 座標は、特定の治療センターの 2 つの行に分散しています。ちなみに、GPS 座標は 2 種類のフォーマットになっています！

「きちんとした」データセットは人間の目には読みにくいかもしれませんが、データのクリーニングと分析を簡単にしてくれます！Tidy データは、例えば "long" や "wide" ([Pivoting data] のページを参照) など、さまざまな形式で格納できますが、上記の原則は守られています。

### **関数** {.unnumbered}

R の単語「関数」は新しいかもしれませんが、この概念は Excel にも数式として存在します。Excel の数式でも、正確な構文が必要です(例えば、セミコロンと括弧の配置)。必要なのは、いくつかの新しい機能と、それらが R でどのように連携するかを学ぶことだけです。

### **スクリプト** {.unnumbered}

ボタンをクリックしてセルをドラッグする代わりに、すべてのステップとプロシージャを「スクリプト」に書き込みます。Excel ユーザーは、スクリプトによるアプローチも採用している「VBA マクロ」に精通している場合があります。

[R スクリプトは、段階的な手順で構成されています。]{.ul}これにより、すべての同僚がスクリプトを読んで、実行した手順を簡単に確認できます。これは、デバッグエラーや不正確な計算にも役立ちます。例については、スクリプトに関する [R basics] セクションを参照してください。

次に、Rスクリプトの例を示します：

```{r, echo=F, out.width = "75%", out.height="75%", fig.align = "center"}
knitr::include_graphics(here::here("images", "example_script.png"))
```

### **ExcelからRへのリソース** {.unnumbered}

ここでは、Excel から R への移行に役立つチュートリアルへのリンクをいくつか示します：

-   [R と Excel](https://www.northeastern.edu/graduate/blog/r-vs-excel/)\
-   [Excel ユーザー向け R の RStudio コース](https://rstudio-conf-2020.github.io/r-for-excel/)

### **R-Excelの相互作用** {.unnumbered}

R には、Excel ブックのインポート、データの操作、Excel ファイルのエクスポート/保存、および Excel シートのニュアンスの操作を行うための強力な方法があります。

確かに、見た目に美しい Excel の書式設定の一部は、翻訳時に失われる可能性があります ( 例：イタリック、横書きテキストなど。)。ワークフローで、元の Excel フォーマットを保持したまま R と Excel の間でドキュメントをやり取りする必要がある場合は、**openxlsx** などのパッケージを試してください。

## **Stataからの移行**

<!-- ======================================================= -->

**StataからRへ**

多くの疫学者は、最初に Stata の使い方を教えられており、R に移行するのは困難に思えるかもしれない。しかし、もしあなたが快適な Stata ユーザーであれば、R へのジャンプはあなたが考えているよりも確実に扱いやすいでしょう。Stata と R の間には、データの作成方法と変更方法、および分析機能の実装方法にいくつかの重要な違いがありますが、これらの重要な違いを学習すると、スキルを翻訳できるようになります。

以下に Stata と R の主な翻訳をいくつか紹介します。

**一般的な注意事項**

+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **STATA**                                                                                                                                                                 | **R**                                                                                                                                                                                  |
+===========================================================================================================================================================================+========================================================================================================================================================================================+
| 一度に表示および操作できるデータセットは1つだけです。                                                                                                                     | 複数のデータセットを同時に表示および操作できるため、多くの場合、コード内でデータセットを指定する必要があります。                                                                       |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 利用可能なオンラインコミュニティは<https://www.statalist.org/>                                                                                                            | 利用可能なオンラインコミュニティは[RStudio](https://community.rstudio.com/),、[StackOverFlow](https://stackoverflow.com/questions/tagged/r)、[R-bloggers](https://www.r-bloggers.com/) |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ポイント＆クリック機能をオプションで提供                                                                                                                                  | 最小限のポイント＆クリック機能                                                                                                                                                         |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `help [command]` で利用できるコマンドのヘルプ                                                                                                                             | `[function]?` で利用できるコマンドのヘルプまたはヘルプウィンドウで検索します。                                                                                                         |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| \* または /// または /\*TEXT\*/ を使用したコメントコード                                                                                                                  | \# を使用したコメントコード                                                                                                                                                            |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ほとんどすべてのコマンドは Stata に組み込まれていています。新しい関数やユーザが作成した **ssc install** [package] を使用して **ado** ファイルとしてインストールできます。 | Rは**基本関数**とともにインストールされますが、一般的な使用方法では、CRANから他のパッケージをインストールする必要があります (参照 [R Basics]) 。                                       |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 通常、分析は**do**ファイルに書き込まれます。                                                                                                                              | R StudioソースウィンドウのRスクリプトで記述された分析。Rマークダウンスクリプトは別の方法です。                                                                                         |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

**作業ディレクトリ**

+----------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **STATA**                                                                                    | **R**                                                                                                                                                                                        |
+==============================================================================================+==============================================================================================================================================================================================+
| 作業ディレクトリには絶対ファイルパスが含まれます(例:"C:/usename/documents/projects/data/")。 | 作業ディレクトリは、絶対ディレクトリにすることも、**here**パッケージを使用してプロジェクトのルートフォルダからの相対ディレクトリにすることもできます ( [インポートとエクスポート] を参照) 。 |
+----------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **pwd**で現在の作業ディレクトリを参照する                                                    | getwd () またはhere () (**here**パッケージを使用している場合) を使用します。                                                                                                                 |
+----------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **cd** "フォルダの場所 "で作業ディレクトリを設定する                                         | `setwd(“フォルダの場所”)`、または `set_here("フォルダの場所")` ( **here** パッケージを使用する場合)                                                                                          |
+----------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

**データの取り込みと表示**

+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **STATA**                                                                           | **R**                                                                                                                                                                                                                        |
+=====================================================================================+==============================================================================================================================================================================================================================+
| ファイルタイプごとの専用コマンド                                                    | ほとんどの種類のファイルに対して、**rio パッケージの** `import()` を使用します。代替となる特定の関数があります。 (参照 [Import and export])                                                                                  |
+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| csv ファイルの読み込みは、 **import delimited** "filename.csv" で行います。         | `import("filename.csv")` を使用します。                                                                                                                                                                                      |
+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| xslxファイルの読み込みは、 **import excel** "filename.xlsx" で行います。            | `import("filename.xlsx")` を使用します。                                                                                                                                                                                     |
+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **browse** コマンドを使用して、新しいウィンドウでデータをブラウズします。           | `View(dataset)` を使用して、RStudioソースウィンドウでデータセットを表示します。[複数のデータセットを同時に保持できるため、Rの関数にデータセット名を指定する必要があります。この関数の大文字 「V」 に注意してください。]{.ul} |
+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 変数名と基本情報を提供する **summarize** を使用してデータセットの概要を取得します。 | `summary(dataset)` を使用してデータセットの概要を取得します。                                                                                                                                                                |
+-------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

**基本的なデータ操作**

+----------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **STATA**                                                                        | **R**                                                                                                                                                               |
+==================================================================================+=====================================================================================================================================================================+
| データセット列は、多くの場合"変数"と呼ばれます。                                 | より一般的には 「カラム」 と呼ばれ、場合によっては 「ベクトル」 または 「変数」 と呼ばれます。                                                                      |
+----------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| データセットを指定する必要はありません。                                         | 以下の各コマンドでは、データセットを指定する必要があります。例については、[Cleaning data and core functions]のページを参照してください。                            |
+----------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 新しい変数は、コマンド **generate** *varname* = を使用して作成されます。         | 関数 `mutate(varname = )` を使用して新しい変数を作成します。以下のすべての**dplyr**関数の詳細について [Cleaning data and core functions] ページを参照してください。 |
+----------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **rename** *old_name new_name を使用して変数名を変更します。*                    | `rename(new_name = old_name)` 関数を使用して列の名前を変更することができます。                                                                                      |
+----------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 変数は **drop** *varname を使用して削除されます。*                               | 列を削除するには、 `select()` を使用して、マイナス記号に続く括弧内に列名を記述します。                                                                              |
+----------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 係数変数は、 **label define** などの一連のコマンドを使用してラベル付けできます。 | 値をラベル付けするには、列をFactorクラスに変換し、レベルを指定します。[Factors]　 のページを参照してください。列名は通常、Stataのようにラベル付けされません。       |
+----------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+

**記述的分析**

+---------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **STATA**                                                                                   | **R**                                                                                                                                                                               |
+=============================================================================================+=====================================================================================================================================================================================+
| **tab** *varname を使用して変数のカウントを表にします。*                                    | `table(dataset$colname)` のように、 `table()` にデータセット名とカラム名を指定します。[Grouping data] で説明されているように、 **dplyr** パッケージの`count(varname)`を使用します。 |
+---------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 2x2 テーブル内の2つの変数のクロス集計は、**tab** *varname1 varname2 を使用して行われます。* | `table(dataset$varname1, dataset$varname2` または `count(varname1, varname2)` を使用します。                                                                                        |
+---------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

このリストでは、StataコマンドをRに変換する基本的な方法の概要を説明しますが、すべてを網羅しているわけではありません。StataユーザがRに移行する上で興味深いリソースは他にもたくさんあります。

-   <https://dss.princeton.edu/training/RStata.pdf>\
-   <https://clanfear.github.io/Stata_R_Equivalency/docs/r_stata_commands.html>\
-   <http://r4stats.com/books/r4stata/>

## SASからの移行

<!-- ======================================================= -->

**SASからRへの移行**

SASは公衆衛生機関や学術研究分野で一般的に使用されています。新しい言語への移行は簡単なプロセスではありませんが、SASとRの主な違いを理解することは、ネイティブ言語を使用して新しい言語の操作を開始するのに役立ちます。SASとRの間のデータ管理および記述分析における主な変換の概要を以下に示します。

**一般的な注意事項**

+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
| **SAS**                                                                                                                                                                               | **R**                                                                                                                                                     |
+=======================================================================================================================================================================================+===========================================================================================================================================================+
| 利用可能なオンラインコミュニティは、[SAS Customer Support](https://support.sas.com/en/support-home.html)                                                                              | 利用可能なオンラインコミュニティは、RStudio、StackOverFlow、R-bloggers                                                                                    |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
| `help [command]` で利用できるコマンドのヘルプ                                                                                                                                         | `[function]?` で利用できるコマンドのヘルプまたはヘルプウィンドウで検索します。                                                                            |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
| `* TEXT ;` または `/* TEXT */` を使ってコードをコメントします。                                                                                                                       | コメントコードに \# を使用します。                                                                                                                        |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
| ほとんどのコマンドは組み込みです。 SAS マクロ、 SAS/IML、 SAS Component Language (SCL)、および最近では、プロシージャ `Proc Fcmp` と `Proc Proto` を使用して新しい関数を記述できます。 | Rは**基本**関数とともにインストールされますが、一般的な使用方法では、CRANから他のパッケージをインストールする必要があります ([R basics] のページを参照)。 |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
| 分析は通常、エディタウィンドウでSASプログラムを記述することによって実行されます。                                                                                                     | RStudioソースウィンドウのRスクリプトで記述された分析。Rマークダウンスクリプトは別の方法です。                                                             |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+

**作業ディレクトリ**

+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **SAS**                                                                                                                                                                                                                 | **R**                                                                                                                                                      |
+=========================================================================================================================================================================================================================+============================================================================================================================================================+
| 作業ディレクトリは、 `%let rootdir=/root path; %include “&rootdir/subfoldername/filename”` を使ってルートフォルダーを定義することで、絶対的またはプロジェクトのルートフォルダーからの相対的なものにすることができます。 | 作業ディレクトリは、絶対指定と、**here**パッケージを使用したプロジェクトルートフォルダからの相対指定があります ( [Import and export] を参照してください)。 |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 現在の作業ディレクトリを `%put %sysfunc(getoption(work));` で参照してください。                                                                                                                                         | `getwd()` または `here()` ( **here** パッケージを使用する場合) を使用し、括弧を空にします。                                                                |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `libname “フォルダ場所”` で作業ディレクトリを設定                                                                                                                                                                       | `setwd(“フォルダ場所”)`、**here** パッケージを使用する場合は`set_here("フォルダの場所)` を使用します。                                                     |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+

**Importing and viewing data**

+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **SAS**                                                                                                                                                                                                  | **R**                                                                                                                                                                                                               |
+==========================================================================================================================================================================================================+=====================================================================================================================================================================================================================+
| Use `Proc Import` procedure or using `Data Step Infile` statement.                                                                                                                                       | Use `import()` from **rio** package for almost all filetypes. Specific functions exist as alternatives (see [Import and export])                                                                                    |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Reading in csv files is done by using `Proc Import datafile=”filename.csv” out=work.filename dbms=CSV; run;` OR using [Data Step Infile statement](http://support.sas.com/techsup/technote/ts673.pdf)    | Use `import("filename.csv")`                                                                                                                                                                                        |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Reading in xslx files is done by using `Proc Import datafile=”filename.xlsx” out=work.filename dbms=xlsx; run;` OR using [Data Step Infile statement](http://support.sas.com/techsup/technote/ts673.pdf) | Use import("filename.xlsx")                                                                                                                                                                                         |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Browse your data in a new window by opening the Explorer window and select desired library and the dataset                                                                                               | View a dataset in the RStudio source pane using View(dataset). You need to specify your dataset name to the function in R because multiple datasets can be held at the same time. Note capital "V" in this function |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

**Basic data manipulation**

+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| **SAS**                                                                                                                                                                                  | **R**                                                                                                                                                   |
+==========================================================================================================================================================================================+=========================================================================================================================================================+
| Dataset columns are often referred to as "variables"                                                                                                                                     | More often referred to as "columns" or sometimes as "vectors" or "variables"                                                                            |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| No special procedures are needed to create a variable. New variables are created simply by typing the new variable name, followed by an equal sign, and then an expression for the value | Generate new variables using the function `mutate()`. See page on [Cleaning data and core functions] for details on all the below **dplyr** functions.  |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Variables are renamed using `rename *old_name=new_name*`                                                                                                                                 | Columns can be renamed using the function `rename(new_name = old_name)`                                                                                 |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Variables are kept using `**keep**=varname`                                                                                                                                              | Columns can be selected using the function `select()` with the column name in the parentheses                                                           |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Variables are dropped using `**drop**=varname`                                                                                                                                           | Columns can be removed using the function `select()` with the column name in the parentheses following a minus sign                                     |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Factor variables can be labeled in the Data Step using `Label` statement                                                                                                                 | Labeling values can done by converting the column to Factor class and specifying levels. See page on [Factors]. Column names are not typically labeled. |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Records are selected using `Where` or `If` statement in the Data Step. Multiple selection conditions are separated using "and" command.                                                  | Records are selected using the function `filter()` with multiple selection conditions separated either by an AND operator (&) or a comma                |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Datasets are combined using `Merge` statement in the Data Step. The datasets to be merged need to be sorted first using `Proc Sort` procedure.                                           | **dplyr** package offers a few functions for merging datasets. See page [Joining Data] for details.                                                     |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

**Descriptive analysis**

+----------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **SAS**                                                                                                                                | **R**                                                                                                                                                                                                                          |
+========================================================================================================================================+================================================================================================================================================================================================================================+
| Get a high-level overview of your dataset using `Proc Summary` procedure, which provides the variable names and descriptive statistics | Get a high-level overview of your dataset using `summary(dataset)` or `skim(dataset)` from the **skimr** package                                                                                                               |
+----------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Tabulate counts of a variable using `proc freq data=Dataset; Tables varname; Run;`                                                     | See the page on [Descriptive tables]. Options include `table()` from **base** R, and `tabyl()` from **janitor** package, among others. Note you will need to specify the dataset and column name as R holds multiple datasets. |
+----------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Cross-tabulation of two variables in a 2x2 table is done with `proc freq data=Dataset; Tables rowvar*colvar; Run;`                     | Again, you can use `table()`, `tabyl()` or other options as described in the [Descriptive tables] page.                                                                                                                        |
+----------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

**Some useful resources:**

[R for SAS and SPSS Users (2011)](https://www.amazon.com/SAS-SPSS-Users-Statistics-Computing/dp/1461406846/ref=sr_1_1?dchild=1&gclid=EAIaIQobChMIoqLOvf6u7wIVAhLnCh1c9w_DEAMYASAAEgJLIfD_BwE&hvadid=241675955927&hvdev=c&hvlocphy=9032185&hvnetw=g&hvqmt=e&hvrand=16854847287059617468&hvtargid=kwd-44746119007&hydadcr=16374_10302157&keywords=r+for+sas+users&qid=1615698213&sr=8-1)

[SAS and R, Second Edition (2014)](https://www.amazon.com/SAS-Management-Statistical-Analysis-Graphics-dp-1466584491/dp/1466584491/ref=dp_ob_title_bk)

## Data interoperability

<!-- ======================================================= -->

See the [Import and export] page for details on how the R package **rio** can import and export files such as STATA .dta files, SAS .xpt and.sas7bdat files, SPSS .por and.sav files, and many others.
