---
editor_options: 
  markdown: 
    wrap: 72
---

# ハンドブックとデータのダウンロード {#data-used}

<!-- Note to self: If you want to create a download link to Github, right-click the "View Raw" button on Github, copy the address, and use that in the HTML below. -->

## オフラインハンドブックのダウンロード

このハンドブックのオフライン版を HTML
ファイルとしてダウンロードすることで、インターネットに接続できない場合でも、Web
ブラウザでファイルを閲覧することができます。Epi R Handbook
のオフラインでの利用を検討されている方は、以下の点にご注意ください。

-   ファイルを開いたとき、画像と目次の読み込みに 1 ～ 2
    分かかる場合があります。
-   オフラインのハンドブックは、1
    ページが非常に長く、左側に目次があり、レイアウトが少し異なります。特定の用語を検索する際は、Ctrl +
    f (Cmd - f) を使用してください。
-   インターネットに接続できなくなる前に、適切な R
    パッケージをインストールするため、[推奨するパッケージ](#packages-suggested)のページをご参照ください。
-   すべてのサンプルデータを含む R パッケージ **epirhandbook**
    をインストールします（インストール方法は後述）。

**ハンドブックをダウンロードする方法は2つあります。**

### ダウンロードリンクの利用 {.unnumbered}

この[リンク](https://github.com/epirhandbook/Epi_R_handbook/raw/master/offline_long/Epi_R_Handbook_offline.html)を右クリックし、「リンク先を別名で保存」を選択すると、素早くアクセスすることができます。

If on a Mac, use Cmd+click. If on a mobile, press and hold the link and
select "Save link". The handbook will download to your device. If a
screen with raw HTML code appears, ensure you have followed the above
instructions or try Option 2.

Mac をお使いの場合は、Cmd +
クリックを使用します。モバイルの場合は、リンクを長押しし、「リンクを保存」を選択してください。ハンドブックがお使いの端末にダウンロードされます。生の
HTML
コードが表示された場合は、上記の手順が正しく行われているか、またはオプション
2 をお試しください。

### R パッケージの利用 {.unnumbered}

**Epirhandbook** という R パッケージがあります。このパッケージには、
Github
リポジトリからハンドブックファイルをあなたのパソコンにダウンロードするための関数
`download_book()` が含まれています。

また、このパッケージには、すべてのサンプルデータをダウンロードするための関数
`get_data()` も含まれています。

次のコードを実行し、[Github repository
[appliedepi]{.ul}](https://github.com/appliedepi/epirhandbook)から R
パッケージ **epirhandbook** をインストールします。このパッケージは CRAN
にないので、Github からインストールする場合は特別な関数 `p_install_gh()`
を使ってください。

```{r, eval=F}
# 最新版の Epi R Handbook パッケージをインストール
pacman::p_install_gh("appliedepi/epirhandbook")
```

ここで、現在の R セッションで使用するために、パッケージを読み込みます。

```{r, eval=F}
# 使用するパッケージを読み込む
pacman::p_load(epirhandbook)
```

次に、パッケージの関数 `download_book()`
（括弧内は空）を実行して、ハンドブックをパソコンにダウンロードします。RStudio
を使用していると仮定した場合、保存場所を選択するウィンドウが表示されます。

```{r, eval=F}
# オフラインハンドブックをパソコンにダウンロードする
download_book()
```

## **Download data to follow along**

## データのダウンロードを理解する

To "follow along" with the handbook pages, you can download the example
data and outputs.

ハンドブックのページを「参照しながら」、サンプルデータと出力結果をダウンロードすることができます。

### R パッケージの利用 {.unnumbered}

すべてのデータをダウンロードする最も簡単な方法は、私たちの R パッケージ
**epirhandbook**
をインストールすることです。このパッケージには、すべてのサンプルデータをパソコンの任意のフォルダに保存する関数
`get_data()` が含まれています。

To install our R package **epirhandbook**, run the following code. This
package is not on CRAN, so use the function `p_install_gh()` to install
it. The input is referencing our Github organisation ("*appliedepi*")
and the **epirhandbook** package.

R パッケージ **epirhandbook**
をインストールするには、次のコードを実行してください。このパッケージは
CRAN にないので、インストールする際には `p_install_gh()`
という関数を使います。入力は、私たちの Github
組織（"[appliedepi]{.ul}"）と **epirhandbook**
パッケージを参照しています。

```{r, eval=F}
# 最新版の Epi R Handbook パッケージをインストール
pacman::p_install_gh("appliedepi/epirhandbook")
```

ここで、現在の R セッションで使用するために、パッケージを読み込みます。

```{r, eval=F}
# 使用するパッケージを読み込む
pacman::p_load(epirhandbook)
```

次に、パッケージの関数 `get_data()`
を使って、サンプルデータをパソコンにダウンロードします。`get_data("all")`
を実行すると[すべての]{.ul}サンプルデータが取得でき、引用符の中に特定のファイル名と拡張子を指定することで
1 つのファイルのみを取得することもできます。

データはすでにパッケージと一緒にダウンロードされているため、あとはパソコンのフォルダに転送するだけです。ポップアップウィンドウが表示されますので、保存先のフォルダを選択してください。約
30
ファイル（サンプルデータ、サンプル出力を含む）ありますので、新規に「data」フォルダを作成することをお勧めします。

```{r, eval=F}
# すべてのサンプルデータをパソコンのフォルダにダウンロードする
get_data("all")

# ラインリストのサンプルデータのみをパソコンのフォルダにダウンロードする
get_data(file = "linelist_cleaned.rds")

```

```{r, eval=F}
# 特定のファイルをコンピュータのフォルダーにダウンロードする
get_data("linelist_cleaned.rds")
```

`get_data()` を使ってファイルをパソコンに保存した後、それを R
にインポートする必要があります。詳細は[データのインポート・エクスポート](#importing)のページをご参照ください。

ご希望の場合は、このハンドブックで使用したすべてのデータを、Github
リポジトリの[「data」フォルダ](https://github.com/epirhandbook/Epi_R_handbook/tree/master/data)で確認することができます。

### 1 つずつダウンロードする {.unnumbered}

このオプションは、Github
リポジトリからファイルごとにデータをダウンロードするもので、リンクまたはファイル固有の
R
コマンドのいずれかを使用します。ファイルの種類によっては、ダウンロードボタンでダウンロードできるものもあれば、R
コマンドでダウンロードできるものもあります。

#### 症例ラインリスト {.unnumbered}

これは、**outbreaks** パッケージの練習用データセット `ebola_sim`
からハンドブックチームによって拡張された架空のエボラ出血熱の発生状況のデータです。

-   <a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/case_linelists/linelist_raw.xlsx' class='download-button'>「生の」ラインリストのダウンロードはこちら（.xlsx）</span></a>。「生の」症例ラインリストは、雑多なデータを含む
    Excel
    のスプレッドシートです。[データクリーニングと主要関数](#cleaning)ページのフォローアップにご利用ください。

-   <a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/case_linelists/linelist_cleaned.rds' class='download-button'>「整理された」ラインリストのダウンロードはこちら（.rds）</a>。このファイルは、このハンドブック内でラインリストを使用するすべてのページで使用します。.rds
    ファイルは、列のクラスを保持する R
    特有のファイル形式です。これにより、R
    にデータをインポートした後、最小限のクリーニングを行うだけでよいことが保証されます。

[その他の関連ファイル]{.ul}

-   <a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/case_linelists/linelist_cleaned.xlsx' class='download-button'>「整理された」ラインリストのエクセルファイルのダウンロードはこちら</a>

-   データクリーニングのページの一部では、「クリーニング辞書」（.csvファイル）を使用しています。次のコマンドを実行することで、R
    に直接読み込むことができます。

```{r, eval=F}
pacman::p_load(rio) # rio パッケージのインストールと読み込み

# Github から直接ファイルをインポートする
cleaning_dict <- import("https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/case_linelists/cleaning_dict.csv")
```

#### マラリア発症数のデータ {#data_malaria .unnumbered}

これらのデータは、年齢層別、施設別、日別のマラリア発症数の架空の数です。.rds
ファイルは、列のクラスを保持する R 特有のファイル形式です。これにより、R
にデータをインポートした後、最小限のクリーニングを行うだけでよいことが保証されます。

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/malaria_facility_count_data.rds' class='download-button'>
マラリア発症数データのダウンロードはこちら（.rds file） </a>

#### リッカート尺度のデータ {.unnumbered}

これは、[人口ピラミッドとリッカート尺度](#age-pyramid)のページで使用した、リッカート尺度による架空の調査データです。これらのデータは、次のコマンドを実行することで、R
に直接読み込むことができます。

```{r, eval=F}
pacman::p_load(rio) # rio パッケージのインストールと読み込み

# Github から直接ファイルをインポートする
likert_data <- import("https://raw.githubusercontent.com/nsbatra/Epi_R_handbook/master/data/likert_data.csv")
```

#### Flexdashboard {#flexdashboard .unnumbered}

以下は、[R
Markdownで作るダッシュボード](#flexdashboard)のページに関連するファイルへのリンクです。

-   発症数ダッシュボードの R Markdown
    をダウンロードするには、この[リンク](https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/flexdashboard/outbreak_dashboard.Rmd)を右クリック（Mac
    の場合は Cmd +
    クリック）し、「リンク先を別名で保存」を選択してください。

-   HTML
    ダッシュボードをダウンロードするには、この[リンク](https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/flexdashboard/outbreak_dashboard_test.html)を右クリック（Mac
    の場合はCmd +
    クリック）し、「リンク先を別名で保存」を選択してください。

#### 接触者の追跡 {.unnumbered}

[接触者の追跡](#contact-tracing)のページでは、[Go.Data](https://github.com/WorldHealthOrganization/godata/tree/master/analytics/r-reporting)
のデータを例に、
接触者の追跡のデータ解析について紹介しました。このページで使用したデータは、次のリンクをクリックすると、.rds
ファイルとしてダウンロードすることができます。

<a href='https://github.com/WorldHealthOrganization/godata/blob/master/analytics/r-reporting/data/cases_clean.rds?raw=true' class='download-button'>
症例調査データのダウンロードはこちら（.rds file） </a>

<a href='https://github.com/WorldHealthOrganization/godata/blob/master/analytics/r-reporting/data/contacts_clean.rds?raw=true' class='download-button'>
接触者登録データのダウンロードはこちら（.rds file） </a>

<a href='https://github.com/WorldHealthOrganization/godata/blob/master/analytics/r-reporting/data/followups_clean.rds?raw=true' class='download-button'>
接触者フォローアップのデータのダウンロードはこちら（.rds file） </a>

[[**注釈：**]{.ul}他のソフトウェア（KoBo、DHIS2 Tracker、CommCare
など）の構造化された接触者の追跡データは、見た目が異なる場合があります。このページの代替サンプルデータやコンテンツをご提供いただける場合は[こちら](#contact_us)へご連絡ください。]{style="color: black;"}

***TIP:*** If you are deploying Go.Data and want to connect to your
instance's API, see the Import and export page [(API
section)](https://epirhandbook.com/en/import-and-export.html#import_api)
and the [Go.Data Community of
Practice](https://community-godata.who.int/).

[[**ヒント**]{.ul}: Go.Data を展開していて、実例の API
に接続したい場合は、データのインポート・エクスポートのページ [(API
セクション)](#import_api) と [Go.Data Community of
Practice](https://community-godata.who.int/)を参照してください。]{style="color: darkgreen;"}

#### GIS {#gis .unnumbered}

シェイプファイルには多くのサブファイルがあり、それぞれ異なるファイル拡張子を持っています。あるファイルの拡張子は
".shp " ですが、他のファイルは ".dbf"、".prj " などの拡張子があります。

[GIS の基礎](#gis)のページには、[Humanitarian Data Exchange]{.ul}
ウェブサイトへのリンクがあり、zip
ファイルとしてシェイプファイルを直接ダウンロードすることができます。

例えば、医療施設ポイントデータは、[こちら](https://data.humdata.org/dataset/hotosm_sierra_leone_health_facilities)からダウンロードできます。「hotosm_sierra_leone_health_facilities_points_shp.zip」をダウンロードします。パソコンに保存したら、フォルダーを「解凍」してください。拡張子が異なる複数のファイル（例：".shp"、".prj"、".shx"）が表示されますが、これらはすべてパソコンの同じフォルダに保存する必要があります。そして、R
にインポートするには、**sf** パッケージの `st_read()` に ".shp "
ファイルのパスとファイル名を指定します（[GIS
の基礎](#gis)のページに記載されています）。

オプション 1
の方法に従って、すべてのサンプルデータをダウンロードする場合（R
パッケージ **epirhandbook**
を利用）、すべてのシェイプファイルが含まれます。

または、R Handbook Github の「data」フォルダ（"gis"
サブフォルダを参照）からシェイプファイルをダウンロードすることも可能です。ただし、各サブファイルを個別にパソコンにダウンロードする必要があることに注意してください。Github
で、各ファイルを個別にクリックし、「Download」ボタンをクリックしてダウンロードします。下の図は、シェイプファイル「sle_adm3」が多くのファイルから構成されており、それぞれを
Github からダウンロードする必要があることを示しています。

```{r out.height = "50%", fig.align = "center", echo=F}
knitr::include_graphics(here::here("images", "download_shp.png"))
```

#### 系統樹 {.unnumbered}

[系統樹](#phylogenetic-trees)のページをご参照ください。299 の Shigella
sonnei サンプルの全ゲノムシークエンスから構築した系統樹の Newick
ファイルと対応するサンプルデータ（テキストファイルへ変換）です。ベルギーのサンプルとそのデータは、ECDC
EUPHEM
フェローのプロジェクトの一環として、サルモネラ菌と赤痢菌についてベルギー
NRC
から提供されたもので、原稿も掲載される予定です。国際的なデータは、公共データベース（ncbi）で公開されており、過去に発表されています。

-   系統樹ファイル「Shigella_tree.txt」をダウンロードするには、この[リンク](https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/phylo/Shigella_tree.txt)を右クリック（Mac
    の場合は Cmd +
    クリック）し、「リンク先を別名で保存」を選択してください。
-   各サンプルの追加情報を含む「sample_data_Shigella_tree.csv」をダウンロードするには、この[リンク](https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/phylo/sample_data_Shigella_tree.csv)を右クリック（Mac
    の場合は Cmd +
    クリック）し、「リンク先を別名で保存」を選択してください。
-   新しく作成されたサブセット・ツリーを見るには、この[リンク](https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/phylo/Shigella_subtree_2.txt)を右クリック（Mac
    の場合は Cmd +
    クリック）し、「リンク先を別名で保存」を選択してください。.txt
    ファイルがあなたのパソコンにダウンロードされます。

そうすると、系統樹のページの説明のとおり **ape** パッケージの
`read.tree()` で .txt ファイルを取り込むことができます。

```{r, eval=F}
ape::read.tree("Shigella_tree.txt")
```

#### 標準化 {.unnumbered}

[標準化率](#standardization)のページをご参照ください。次のコマンドで、インターネット上の
Github リポジトリから直接 R セッションにデータを読み込むことができます。

```{r, eval=F}
# rio パッケージのインストールと読み込み
pacman::p_load(rio) 

##############
# Country A
##############
# A 国の人口統計データを Github から直接インポートする
A_demo <- import("https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/country_demographics.csv")

# A 国の死因を Github から直接インポートする
A_deaths <- import("https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/deaths_countryA.csv")

##############
# Country B
##############
# B 国の人口統計データを Github から直接インポートする
B_demo <- import("https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/country_demographics_2.csv")

# B 国の死因を Github から直接インポートする
B_deaths <- import("https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/deaths_countryB.csv")


###############
# Reference Pop
###############
# B 国の人口統計データをGithubから直接インポートする
standard_pop_data <- import("https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/standardization/world_standard_population_by_sex.csv")
```

#### 時系列分析とアウトブレイクの検出 {#data_outbreak .unnumbered}

[時系列分析とアウトブレイクの検出](#ime-series)のページをご参照ください。2002
年から 2011 年までにドイツで報告されたものであり、 **surveillance** R
package
から入手可能なカンピロバクター症例を使用しています。([注：]{.ul}このデータセットは、デモのために
2011 年末から 3 ヶ月分のデータを削除し、オリジナルから改編したものです)

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/campylobacter_germany.xlsx' class='download-button'>ドイツのカンピロバクターのデータのダウンロードはこちら（.xlsx）</a>

また、ドイツの 2002 年から 2011
年の気候データ（気温：摂氏、降水量：ミリメートル）を使用します。これらは
**ecmwfr** パッケージを使用して EU Copernicus
衛星再解析データセットからダウンロードしたものです。これらをすべてダウンロードし、時系列分析のページで説明されているように
`stars::read_stars()` でインポートする必要があります。

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2002.nc' class='download-button'>ドイツの
2002 年の天気予報のダウンロードはこちら（.nc file）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2003.nc' class='download-button'>ドイツの
2003 年の天気予報のダウンロードはこちら（.nc file）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2004.nc' class='download-button'>ドイツの
2004 年の天気予報のダウンロードはこちら（.nc file）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2005.nc' class='download-button'>ドイツの
2005 年の天気予報のダウンロードはこちら（.nc file）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2006.nc' class='download-button'>ドイツの
2006 年の天気予報のダウンロードはこちら（.nc file）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2007.nc' class='download-button'>ドイツの
2007 年の天気予報のダウンロードはこちら（.nc file）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2008.nc' class='download-button'>ドイツの
2008 年の天気予報のダウンロードはこちら（.nc file）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2009.nc' class='download-button'>ドイツの
2009 年の天気予報のダウンロードはこちら（.nc file）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2010.nc' class='download-button'>ドイツの
2010 年の天気予報のダウンロードはこちら（.nc file）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/time_series/weather/germany_weather2011.nc' class='download-button'>ドイツの
2011 年の天気予報のダウンロードはこちら（.nc file）</a>

#### 調査データ分析 {#data_survey .unnumbered}

[調査データ分析](#survey-analysis)のページでは、MSF OCA
調査テンプレートをもとにした架空の死亡率調査データを使用しています。この架空のデータは[「R4Epis」プロジェクト](https://r4epis.netlify.app/)の一環として作成されたものです。

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/surveys/survey_data.xlsx' class='download-button'>
架空の調査データのダウンロードはこちら（.xlsx） </a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/surveys/survey_dict.xlsx' class='download-button'>架空の調査データの辞書はこちら（.xlsx）</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/surveys/population.xlsx' class='download-button'>架空調査母集団データのダウンロードはこちら（.xlsx）</a>

#### Shiny {#data_shiny .unnumbered}

[Shiny
で作るダッシュボード](#shiny-basics)のページでは、マラリアのデータを表示する簡単なアプリの構築を紹介しています。

Shiny アプリを生成する R ファイルのダウンロードはこちら。

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/malaria_app/app.R' class='download-button'>
Shiny アプリの UI とサーバーのコードを含む app.R
ファイルのダウンロードはこちら</a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/blob/master/data/malaria_app/data/facility_count_data.rds' class='download-button'>
Shiny アプリ用のマラリアデータを含む facility_count_data.rds
ファイルのダウンロードはこちら<span></a>。なお、`here()`
のファイルパスが正しく動作するように、「data」フォルダ内に保存する必要がある場合があります。

<a href='https://github.com/epirhandbook/Epi_R_handbook/blob/master/data/malaria_app/global.R' class='download-button'>
ページ内で説明されている、アプリを開く前に実行すべき global.R
ファイルのダウンロードはこちら<span></a>

<a href='https://github.com/epirhandbook/Epi_R_handbook/raw/master/data/malaria_app/funcs/plot_epicurve.R' class='download-button'>
global.R がもととなっている plot_epicurve.R
ファイルのダウンロードはこちら<span></a> なお、`here()`
のファイルパスが正しく動作するために、「funcs」フォルダ内に保存する必要がある場合があります。
