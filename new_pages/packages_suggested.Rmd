# 推奨パッケージ

以下は、Rでの一般的な疫学作業に推奨されるパッケージの一覧です。以下のコードをコピーし実行すると、これらのパッケージをすべてCRANからインストールし、現在のRセッションで使用するために呼び出すことができます。 パッケージがすでにインストールされている場合は、使用目的でのみ呼び出されます。

`#`記号を使用してコードを変更し、不要なパッケージを除外することができます。

注意点:

-   以下のコードを実行する前に、まず **pacman** パッケージをインストールしてください。これは`install.packages("pacman")`によって行うことができます。このハンドブックでは **pacman** の `p_load()` を強調しています。`p_load()` は必要に応じてパッケージをインストールし、現在の R セッションで使用するために呼び出します。必要に応じてパッケージをインストールし、現在の R セッションで使用するために呼び出しします。また、すでにインストールされているパッケージを**base** R の `library()` で呼び出すこともできます。
-   以下のコードでは、他のパッケージをインストール/呼び出す際に含まれるパッケージは、インデントとハッシュで表示されています。例えば、**ggplot2**は**tidyverse**の下に記載されています。
-   同じ名前の関数が複数のパッケージに存在している場合、直前に呼び出されたパッケージの関数が優先されることで[マスキング]{.ul}が発生することがあります。詳しくは\[R basics\]のページをご覧ください。このようなパッケージの対立を管理するためには、**conflicted**パッケージの使用をご検討ください。
-   **pacman** や masking についての詳しい情報は ［R basics］のパッケージの項をご覧ください。

このハンドブックの制作に使用された R、RStudio、R パッケージのバージョンは、［Editorial and technical notes］のページに記載されています。\

## CRANのパッケージ

```{r, eval=F}

##########################################
# 疫学に有用なRパッケージの一覧 #
##########################################

# 本スクリプトはpacman Rパッケージのp_load()関数を使用する。
# このp_load()関数により、まだインストールされていないパッケージはインストールされ、すでにインストールされているパッケージは使用するために呼び出される。


# "pacman "パッケージがインストールされていることを確認する
if (!require("pacman")) install.packages("pacman")


# CRANから入手可能なパッケージ
##############################
pacman::p_load(
     
     # Rを学ぶ
     ############
     learnr,   # Rチュートリアル画面でのインタラクティブ学習
     swirl,    # Rコンソールでのインタラクティブ学習
        
     # プロジェクトとファイルの管理
     #############################
     here,     # Rのプロジェクトフォルダを基準とするファイルパス
     rio,      # 様々なタイプのデータのインポート／エクスポート
     openxlsx, # 複数のシートを有するExcelファイルのインポート／エクスポート 
     
     # パッケージのインストールと管理
     ################################
     pacman,   # パッケージのインストール／呼び出し
     renv,     # 共同グループで作業する際のパッケージのバージョン管理
     remotes,  # githubからのインストール
     
     # 一般的なデータ管理
     #########################
     tidyverse,    # データを整理して表示するための多くのパッケージが含まれる
          #dplyr,      # データ管理
          #tidyr,      # データ管理
          #ggplot2,    # データのグラフ化
          #stringr,    # 文字列や文字の操作
          #forcats,    # 因子を扱う 
          #lubridate,  # 日付を扱う
          #purrr       # 反復処理とリストの操作
     linelist,     # ラインリストの整理
     naniar,       # 欠損値の評価
     
     # 統計  
     ############
     janitor,      # 表とデータの整理
     gtsummary,    # 記述的および統計的表の作成
     rstatix,      # 統計的検定と要約の実行
     broom,        # 回帰結果の整理
     lmtest,       # 尤度比検定
     easystats,
          # parameters, # 回帰結果整理のための代替パッケージ
          # see,        # フォレストプロット作成のための代替パッケージ
     
     # 疫学モデリング
     ###################
     epicontacts,  # 伝番ネットワークの分析
     EpiNow2,      # Rtの推定
     EpiEstim,     # Rtの推定
     projections,  # 発生率の予測
     incidence2,   # 流行曲線の作成と発生データの処理
     i2extras,     # incident2パッケージの追加関数
     epitrix,      # 有用な疫学関数
     distcrete,    # 離散遅延分布
     
     
     # 図 - 一般
     #################
     #ggplot2,         # パッケージに含まれる
     cowplot,          # 図を組み合わせる  
     # patchwork,      # 図を組み合わせる (代替)     
     RColorBrewer,     # カラースケール
     ggnewscale,       # 配色レイヤーの追加

     
     # 図 - 特定のタイプ
     ########################
     DiagrammeR,       # DOT言語を使用した図
     incidence2,       # 流行曲線
     gghighlight,      # データの一部をハイライトする
     ggrepel,          # ラベルの重なりを防ぐ
     plotly,           # インタラクティブ画像
     gganimate,        # アニメーション画像 

     
     # 地理情報システム(GIS)
     ######
     sf,               # SimpleFeature形式を使用して空間データを管理する
     tmap,             # シンプルな地図の作成 - インタラクティブと静的地図の両方で機能
     OpenStreetMap,    # ggplotマップにOSMベースマップを追加する
     spdep,            # 空間統計 
     
     # 文書の作成
     #################
     rmarkdown,        # PDF、Word文書、パワーポイント、およびHTMLファイルの作成
     reportfactory,    # Rマークダウンアウトプットの自動整理
     officer,          # パワーポイント
     
     # ダッシュボード
     ############
     flexdashboard,    # Rマークダウンスクリプトをダッシュボードに変換する
     shiny,            # インタラクティブなウェブアプリ
     
     # プレゼンテーション用の表の作成
     #########################
     knitr,            # RマークダウンレポートとHTML表の作成
     flextable,        # HTML 表
     #DT,              # HTML 表 (代替)
     #gt,              # HTML 表 (代替)
     #huxtable,        # HTML 表 (代替) 
     
     # 系統学
     ###############
     ggtree,           # 系統樹描画とアノテーション
     ape,              # 系統発生と進化の分析
     treeio            # 系統発生ファイルの描画
 
)

```

## Githubのパッケージ

以下は、Githubリポジトリから直接2つのパッケージをインストールするためのコマンドです。

-   **epicontacts** の開発バージョンには、時間軸xを持つ伝番ツリーを作成する機能が含まれています。

-   **epirhandbook** パッケージには、このハンドブックのすべてのサンプルデータが含まれており、ハンドブックのオフラインバージョンをダウンロードするために使用できます。

```{r, eval=F}
# Githubからダウンロードするパッケージ（CRANからはダウンロード不可）
##########################################################

# epicontacts の開発バージョン（時間軸xの伝播鎖用）
pacman::p_install_gh("reconhub/epicontacts@timeline")

# このハンドブックのパッケージには、すべてのサンプルデータが含まれる 
pacman::p_install_gh("appliedepi/epirhandbook")



```
